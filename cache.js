!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cache",[],t):"object"==typeof exports?exports.cache=t():(e.lazer=e.lazer||{},e.lazer.cache=t())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.types=t.ImageCache=t.CacheEntry=t.Cache=t.BaseCache=void 0;var u=n(1),i=o(u),a=n(4),c=r(a),f=n(5),l=r(f),s=n(6),p=r(s),d=n(7),y=r(d);t.BaseCache=c["default"],t.Cache=l["default"],t.CacheEntry=p["default"],t.ImageCache=y["default"],t.types=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageFile=t.CacheFile=void 0;var o=n(2),u=r(o),i=n(3),a=r(i);t.CacheFile=u["default"],t.ImageFile=a["default"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function o(e,t,r){n(this,o),this.key=e,this.url=t,this.data=r};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),c=r(a),f=function(e){function t(e,n,r){o(this,t);var i=u(this,Object.getPrototypeOf(t).call(this,e,n,r));return i.baseTexture="",i}return i(t,e),t}(c["default"]);t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=(r(i),function(){function e(){o(this,e),this.files=new Map}return u(e,[{key:"add",value:function(e,t){this.files.set(e,t)}},{key:"has",value:function(e){return this.files.has(e)}},{key:"get",value:function(e){return this.files.get(e)}},{key:"remove",value:function(e){this.files["delete"](e)}},{key:"destroy",value:function(){this.files.clear()}}]),e}());t["default"]=a},function(e,t){"use strict";function n(){var e=new Map;return{add:function(t,n){e.set(t,n)},has:function(t){return e.has(t)},get:function(t){return e.get(t)},remove:function(t){e["delete"](t)},total:function(){return e.size},flush:function(){e.clear()}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t){"use strict";function n(e,t,n){return{key:e,url:t,data:n}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function y(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,n)}if("value"in r)return r.value;var u=r.get;if(void 0!==u)return u.call(n)},f=n(4),l=r(f),s=n(3),p=r(s),d=function(e){function t(){return o(this,t),u(this,Object.getPrototypeOf(t).call(this))}return i(t,e),a(t,[{key:"add",value:function(e,n,r){var o=new p["default"](e,n,r);c(Object.getPrototypeOf(t.prototype),"add",this).call(this,e,o)}}]),t}(l["default"]);t["default"]=d}])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uPzVjYTYiLCJ3ZWJwYWNrOi8vL2NhY2hlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAxYjZmNThhMTc3NDUwODBmMDAxYT83NzllIiwid2VicGFjazovLy8uL3NyYy9jYWNoZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2FjaGUvdHlwZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhY2hlL3R5cGVzL0NhY2hlRmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2FjaGUvdHlwZXMvSW1hZ2VGaWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9jYWNoZS9CYXNlQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhY2hlL0NhY2hlLmpzIiwid2VicGFjazovLy8uL3NyYy9jYWNoZS9DYWNoZUVudHJ5LmpzIiwid2VicGFjazovLy8uL3NyYy9jYWNoZS9JbWFnZUNhY2hlLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwibmV3T2JqIiwia2V5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwidHlwZXMiLCJJbWFnZUNhY2hlIiwiQ2FjaGVFbnRyeSIsIkNhY2hlIiwiQmFzZUNhY2hlIiwidW5kZWZpbmVkIiwiX3R5cGVzIiwiX0Jhc2VDYWNoZSIsIl9CYXNlQ2FjaGUyIiwiX0NhY2hlIiwiX0NhY2hlMiIsIl9DYWNoZUVudHJ5IiwiX0NhY2hlRW50cnkyIiwiX0ltYWdlQ2FjaGUiLCJfSW1hZ2VDYWNoZTIiLCJJbWFnZUZpbGUiLCJDYWNoZUZpbGUiLCJfQ2FjaGVGaWxlIiwiX0NhY2hlRmlsZTIiLCJfSW1hZ2VGaWxlIiwiX0ltYWdlRmlsZTIiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwidXJsIiwiZGF0YSIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9DYWNoZUZpbGUzIiwiX3RoaXMiLCJnZXRQcm90b3R5cGVPZiIsImJhc2VUZXh0dXJlIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJmaWxlcyIsIk1hcCIsInNldCIsImhhcyIsImdldCIsImNsZWFyIiwiYWRkIiwicmVtb3ZlIiwidG90YWwiLCJzaXplIiwiZmx1c2giLCJfZ2V0Iiwib2JqZWN0IiwicHJvcGVydHkiLCJyZWNlaXZlciIsIkZ1bmN0aW9uIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInBhcmVudCIsImdldHRlciIsIl9CYXNlQ2FjaGUzIiwiZW50cnkiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsZ0JBQUFDLFVBQUEsZ0JBQUFDLFFBQ0FBLE9BQUFELFFBQUFELElBQ0Esa0JBQUFHLGdCQUFBQyxJQUNBRCxPQUFBLFdBQUFILEdBQ0EsZ0JBQUFDLFNBQ0FBLFFBQUEsTUFBQUQsS0FFQUQsRUFBQSxN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QUFVN0IsRUFBWU0sR0FRdEJxQyxFQUFhM0MsSUFDVFAsSUFBSyxNQUNMSyxNQUFPLFNTdlZQTCxFQUFLK0IsRUFBS0MsR0FFWCxHQUFNZ0QsR0FBUSxHQUFBdEQsY0FBYzFCLEVBQUsrQixFQUFLQyxFQUl0Q3NDLEdBQUFyRSxPQUFBK0MsZUFBQXpDLEVBQUFMLFdBQUEsTUFBQW5CLE1BQUFPLEtBQUFQLEtBQVVpQixFQUFLZ0YsT1QyVlh6RSxHQUNUd0UsYUFFRnBHLGNTNVdvQjRCIiwiZmlsZSI6ImNhY2hlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJjYWNoZVwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJjYWNoZVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJsYXplclwiXSA9IHJvb3RbXCJsYXplclwiXSB8fCB7fSwgcm9vdFtcImxhemVyXCJdW1wiY2FjaGVcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiBcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb25cbiAqKi8iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImNhY2hlXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImNhY2hlXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImxhemVyXCJdID0gcm9vdFtcImxhemVyXCJdIHx8IHt9LCByb290W1wibGF6ZXJcIl1bXCJjYWNoZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMudHlwZXMgPSBleHBvcnRzLkltYWdlQ2FjaGUgPSBleHBvcnRzLkNhY2hlRW50cnkgPSBleHBvcnRzLkNhY2hlID0gZXhwb3J0cy5CYXNlQ2FjaGUgPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX3R5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciB0eXBlcyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF90eXBlcyk7XG5cdFxuXHR2YXIgX0Jhc2VDYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX0Jhc2VDYWNoZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9CYXNlQ2FjaGUpO1xuXHRcblx0dmFyIF9DYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX0NhY2hlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NhY2hlKTtcblx0XG5cdHZhciBfQ2FjaGVFbnRyeSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX0NhY2hlRW50cnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ2FjaGVFbnRyeSk7XG5cdFxuXHR2YXIgX0ltYWdlQ2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9JbWFnZUNhY2hlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ltYWdlQ2FjaGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cdFxuXHRleHBvcnRzLkJhc2VDYWNoZSA9IF9CYXNlQ2FjaGUyLmRlZmF1bHQ7XG5cdGV4cG9ydHMuQ2FjaGUgPSBfQ2FjaGUyLmRlZmF1bHQ7XG5cdGV4cG9ydHMuQ2FjaGVFbnRyeSA9IF9DYWNoZUVudHJ5Mi5kZWZhdWx0O1xuXHRleHBvcnRzLkltYWdlQ2FjaGUgPSBfSW1hZ2VDYWNoZTIuZGVmYXVsdDtcblx0ZXhwb3J0cy50eXBlcyA9IHR5cGVzO1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuSW1hZ2VGaWxlID0gZXhwb3J0cy5DYWNoZUZpbGUgPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX0NhY2hlRmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX0NhY2hlRmlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DYWNoZUZpbGUpO1xuXHRcblx0dmFyIF9JbWFnZUZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9JbWFnZUZpbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSW1hZ2VGaWxlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLkNhY2hlRmlsZSA9IF9DYWNoZUZpbGUyLmRlZmF1bHQ7XG5cdGV4cG9ydHMuSW1hZ2VGaWxlID0gX0ltYWdlRmlsZTIuZGVmYXVsdDtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgQ2FjaGVGaWxlID0gZnVuY3Rpb24gQ2FjaGVGaWxlKGtleSwgdXJsLCBkYXRhKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FjaGVGaWxlKTtcblx0XG5cdCAgICB0aGlzLmtleSA9IGtleTtcblx0ICAgIHRoaXMudXJsID0gdXJsO1xuXHQgICAgdGhpcy5kYXRhID0gZGF0YTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENhY2hlRmlsZTtcblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX0NhY2hlRmlsZTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9DYWNoZUZpbGUzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ2FjaGVGaWxlMik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgSW1hZ2VGaWxlID0gZnVuY3Rpb24gKF9DYWNoZUZpbGUpIHtcblx0ICAgIF9pbmhlcml0cyhJbWFnZUZpbGUsIF9DYWNoZUZpbGUpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIEltYWdlRmlsZShrZXksIHVybCwgZGF0YSkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbWFnZUZpbGUpO1xuXHRcblx0ICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoSW1hZ2VGaWxlKS5jYWxsKHRoaXMsIGtleSwgdXJsLCBkYXRhKSk7XG5cdFxuXHQgICAgICAgIF90aGlzLmJhc2VUZXh0dXJlID0gJyc7XG5cdFxuXHQgICAgICAgIHJldHVybiBfdGhpcztcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gSW1hZ2VGaWxlO1xuXHR9KF9DYWNoZUZpbGUzLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gSW1hZ2VGaWxlO1xuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX0NhY2hlRmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX0NhY2hlRmlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DYWNoZUZpbGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgQmFzZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gQmFzZUNhY2hlKCkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCYXNlQ2FjaGUpO1xuXHRcblx0ICAgICAgICB0aGlzLmZpbGVzID0gbmV3IE1hcCgpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhCYXNlQ2FjaGUsIFt7XG5cdCAgICAgICAga2V5OiAnYWRkJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkKGtleSwgZGF0YSkge1xuXHRcblx0ICAgICAgICAgICAgdGhpcy5maWxlcy5zZXQoa2V5LCBkYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnaGFzJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFzKGtleSkge1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsZXMuaGFzKGtleSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2dldCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldChrZXkpIHtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbGVzLmdldChrZXkpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdyZW1vdmUnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoa2V5KSB7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLmZpbGVzLmRlbGV0ZShrZXkpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdkZXN0cm95Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXMuZmlsZXMuY2xlYXIoKTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIEJhc2VDYWNoZTtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQmFzZUNhY2hlO1xuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgICAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ2FjaGU7XG5cdGZ1bmN0aW9uIENhY2hlKCkge1xuXHRcblx0ICAgICAgICB2YXIgZmlsZXMgPSBuZXcgTWFwKCk7XG5cdFxuXHQgICAgICAgIHJldHVybiB7XG5cdFxuXHQgICAgICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiBhZGQoa2V5LCBkYXRhKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBmaWxlcy5zZXQoa2V5LCBkYXRhKTtcblx0ICAgICAgICAgICAgICAgIH0sXG5cdFxuXHQgICAgICAgICAgICAgICAgaGFzOiBmdW5jdGlvbiBoYXMoa2V5KSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZXMuaGFzKGtleSk7XG5cdCAgICAgICAgICAgICAgICB9LFxuXHRcblx0ICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KGtleSkge1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbGVzLmdldChrZXkpO1xuXHQgICAgICAgICAgICAgICAgfSxcblx0XG5cdCAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShrZXkpIHtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzLmRlbGV0ZShrZXkpO1xuXHQgICAgICAgICAgICAgICAgfSxcblx0XG5cdCAgICAgICAgICAgICAgICB0b3RhbDogZnVuY3Rpb24gdG90YWwoKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZXMuc2l6ZTtcblx0ICAgICAgICAgICAgICAgIH0sXG5cdFxuXHQgICAgICAgICAgICAgICAgZmx1c2g6IGZ1bmN0aW9uIGZsdXNoKCkge1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXMuY2xlYXIoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgfTtcblx0fVxuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBDYWNoZUVudHJ5O1xuXHRmdW5jdGlvbiBDYWNoZUVudHJ5KGtleSwgdXJsLCBkYXRhKSB7XG5cdFxuXHQgICAgcmV0dXJuIHtcblx0XG5cdCAgICAgICAga2V5OiBrZXksXG5cdCAgICAgICAgdXJsOiB1cmwsXG5cdCAgICAgICAgZGF0YTogZGF0YVxuXHRcblx0ICAgIH07XG5cdH1cblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXHRcblx0dmFyIF9CYXNlQ2FjaGUyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfQmFzZUNhY2hlMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Jhc2VDYWNoZTIpO1xuXHRcblx0dmFyIF9JbWFnZUZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9JbWFnZUZpbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSW1hZ2VGaWxlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBJbWFnZUNhY2hlID0gZnVuY3Rpb24gKF9CYXNlQ2FjaGUpIHtcblx0ICAgIF9pbmhlcml0cyhJbWFnZUNhY2hlLCBfQmFzZUNhY2hlKTtcblx0XG5cdCAgICBmdW5jdGlvbiBJbWFnZUNhY2hlKCkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbWFnZUNhY2hlKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihJbWFnZUNhY2hlKS5jYWxsKHRoaXMpKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoSW1hZ2VDYWNoZSwgW3tcblx0ICAgICAgICBrZXk6ICdhZGQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGQoa2V5LCB1cmwsIGRhdGEpIHtcblx0XG5cdCAgICAgICAgICAgIHZhciBlbnRyeSA9IG5ldyBfSW1hZ2VGaWxlMi5kZWZhdWx0KGtleSwgdXJsLCBkYXRhKTtcblx0XG5cdCAgICAgICAgICAgIC8vICBBZGQgQmFzZVRleHR1cmUgaGVyZVxuXHRcblx0ICAgICAgICAgICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoSW1hZ2VDYWNoZS5wcm90b3R5cGUpLCAnYWRkJywgdGhpcykuY2FsbCh0aGlzLCBrZXksIGVudHJ5KTtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIEltYWdlQ2FjaGU7XG5cdH0oX0Jhc2VDYWNoZTMuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBJbWFnZUNhY2hlO1xuXG4vKioqLyB9XG4vKioqKioqLyBdKVxufSk7XG47XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogY2FjaGUuanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIDFiNmY1OGExNzc0NTA4MGYwMDFhXG4gKiovIiwiaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi90eXBlcydcclxuaW1wb3J0IEJhc2VDYWNoZSBmcm9tICcuL0Jhc2VDYWNoZSc7XHJcbmltcG9ydCBDYWNoZSBmcm9tICcuL0NhY2hlJ1xyXG5pbXBvcnQgQ2FjaGVFbnRyeSBmcm9tICcuL0NhY2hlRW50cnknO1xyXG5pbXBvcnQgSW1hZ2VDYWNoZSBmcm9tICcuL0ltYWdlQ2FjaGUnO1xyXG5cclxuZXhwb3J0IHsgIFxyXG4gIEJhc2VDYWNoZSxcclxuICBDYWNoZSxcclxuICBDYWNoZUVudHJ5LFxyXG4gIEltYWdlQ2FjaGUsXHJcbiAgdHlwZXNcclxufVxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2NhY2hlL2luZGV4LmpzXG4gKiovIiwiaW1wb3J0IENhY2hlRmlsZSBmcm9tICcuL0NhY2hlRmlsZSc7XHJcbmltcG9ydCBJbWFnZUZpbGUgZnJvbSAnLi9JbWFnZUZpbGUnO1xyXG5cclxuZXhwb3J0IHtcclxuICBDYWNoZUZpbGUsXHJcbiAgSW1hZ2VGaWxlXHJcbn1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9jYWNoZS90eXBlcy9pbmRleC5qc1xuICoqLyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhY2hlRmlsZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKGtleSwgdXJsLCBkYXRhKSB7XHJcblxyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcblxyXG4gICAgfVxyXG5cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9jYWNoZS90eXBlcy9DYWNoZUZpbGUuanNcbiAqKi8iLCJpbXBvcnQgQ2FjaGVGaWxlIGZyb20gJy4vQ2FjaGVGaWxlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltYWdlRmlsZSBleHRlbmRzIENhY2hlRmlsZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKGtleSwgdXJsLCBkYXRhKSB7XHJcblxyXG4gICAgICAgIHN1cGVyKGtleSwgdXJsLCBkYXRhKTtcclxuXHJcbiAgICAgICAgdGhpcy5iYXNlVGV4dHVyZSA9ICcnO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvY2FjaGUvdHlwZXMvSW1hZ2VGaWxlLmpzXG4gKiovIiwiaW1wb3J0IENhY2hlRmlsZSBmcm9tICcuL3R5cGVzL0NhY2hlRmlsZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlQ2FjaGUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5maWxlcyA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYWRkIChrZXksIGRhdGEpIHtcclxuXHJcbiAgICAgICAgdGhpcy5maWxlcy5zZXQoa2V5LCBkYXRhKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgaGFzIChrZXkpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsZXMuaGFzKGtleSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldCAoa2V5KSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbGVzLmdldChrZXkpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUgKGtleSkge1xyXG5cclxuICAgICAgICB0aGlzLmZpbGVzLmRlbGV0ZShrZXkpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95ICgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5maWxlcy5jbGVhcigpO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvY2FjaGUvQmFzZUNhY2hlLmpzXG4gKiovIiwiXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENhY2hlICgpIHtcclxuXHJcbiAgICBsZXQgZmlsZXMgPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgYWRkOiBmdW5jdGlvbiAoa2V5LCBkYXRhKSB7XHJcblxyXG4gICAgICAgICAgICBmaWxlcy5zZXQoa2V5LCBkYXRhKTtcclxuXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaGFzOiBmdW5jdGlvbiAoa2V5KSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmlsZXMuaGFzKGtleSk7XHJcblxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKGtleSkge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZpbGVzLmdldChrZXkpO1xyXG5cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChrZXkpIHtcclxuXHJcbiAgICAgICAgICAgIGZpbGVzLmRlbGV0ZShrZXkpO1xyXG5cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB0b3RhbDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZpbGVzLnNpemU7XHJcblxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGZsdXNoOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBmaWxlcy5jbGVhcigpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbn1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9jYWNoZS9DYWNoZS5qc1xuICoqLyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENhY2hlRW50cnkgKGtleSwgdXJsLCBkYXRhKSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAga2V5OiBrZXksXHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgZGF0YTogZGF0YVxyXG5cclxuICAgIH07XHJcblxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2NhY2hlL0NhY2hlRW50cnkuanNcbiAqKi8iLCJpbXBvcnQgQmFzZUNhY2hlIGZyb20gJy4vQmFzZUNhY2hlJztcclxuaW1wb3J0IEltYWdlRmlsZSBmcm9tICcuL3R5cGVzL0ltYWdlRmlsZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbWFnZUNhY2hlIGV4dGVuZHMgQmFzZUNhY2hlIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoKSB7XHJcblxyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGFkZCAoa2V5LCB1cmwsIGRhdGEpIHtcclxuXHJcbiAgICAgICAgY29uc3QgZW50cnkgPSBuZXcgSW1hZ2VGaWxlKGtleSwgdXJsLCBkYXRhKTtcclxuXHJcbiAgICAgICAgLy8gIEFkZCBCYXNlVGV4dHVyZSBoZXJlXHJcblxyXG4gICAgICAgIHN1cGVyLmFkZChrZXksIGVudHJ5KTtcclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2NhY2hlL0ltYWdlQ2FjaGUuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9