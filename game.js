!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("game",[],e):"object"==typeof exports?exports.game=e():(t.lazer=t.lazer||{},t.lazer.game=e())}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.nano=void 0;var r=n(169),o=i(r);e.nano=o},,,,,,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){var t=arguments.length<=0||void 0===arguments[0]?256:arguments[0],e=arguments.length<=1||void 0===arguments[1]?256:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],i=document.createElement("canvas");return""!==n&&(i.id=n),i.width=t,i.height=e,i.style.display="block",i}},,,function(t,e){"use strict";function n(t,e){return t.getContext("2d",e)||null}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},,function(t,e){"use strict";function n(t){return t.setTransform(1,0,0,1,0,0),t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){"use strict";function n(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],i=arguments.length<=3||void 0===arguments[3]?0:arguments[3],r=arguments.length<=4||void 0===arguments[4]?0:arguments[4],o=arguments.length<=5||void 0===arguments[5]?1:arguments[5],a=t.canvas;if(e){var s=t.fillStyle;t.fillStyle="rgba("+n+","+i+","+r+","+o+")",t.fillRect(0,0,a.width,a.height),t.fillStyle=s}else t.clearRect(0,0,a.width,a.height);return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){"use strict";function n(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var r={add:function(t){i[t.name]=t.hasOwnProperty("value")?t.value:t.properties},remove:function(t){delete i[t]},require:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var o=!0,a=!1,s=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var f=u.value;i.hasOwnProperty(f.name)||r.add(f)}}catch(c){a=!0,s=c}finally{try{!o&&l["return"]&&l["return"]()}finally{if(a)throw s}}},get:function(t){return t&&i.hasOwnProperty(t)?i[t]:i}},o=!0,a=!1,s=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var f=u.value;r.add(f)}}catch(c){a=!0,s=c}finally{try{!o&&l["return"]&&l["return"]()}finally{if(a)throw s}}return r}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i={}},,function(t,e){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?800:arguments[0],e=arguments.length<=1||void 0===arguments[1]?600:arguments[1];return{name:"dimensions",properties:{width:t,height:e}}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},,,,function(t,e){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?60:arguments[0];return{name:"frameRate",value:t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},,function(t,e){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return{name:"parent",value:t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){return{name:"state",value:(0,a["default"])(t)}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var o=n(130),a=i(o)},,,,,,,,,,,,,,,,,,,,,,function(t,e){"use strict";function n(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],r=void 0;return e&&("string"==typeof e?r=document.getElementById(e):"object"===("undefined"==typeof e?"undefined":i(e))&&1===e.nodeType&&(r=e)),r||(r=document.body),n&&r.style&&(r.style.overflow="hidden"),r.appendChild(t),t}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e["default"]=n},function(t,e){"use strict";function n(){return i?void 0:new Promise(function(t,e){"complete"===document.readyState||"interactive"===document.readyState?(i=!0,t()):!function(){var e=function n(){document.removeEventListener("deviceready",n,!0),document.removeEventListener("DOMContentLoaded",n,!0),window.removeEventListener("load",n,!0),t()};document.body?(document.addEventListener("DOMContentLoaded",e,!0),window.addEventListener("load",e,!0)):window.setTimeout(e,20)}()})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i=!1},,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(157),s=i(a),u=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];r(this,t),this.root=e,this.forceSetTimeOut=n,n||(this.forceSetTimeOut=!this.normalizeRaf()),this._running=!1,this._timeOutID=null,this._callback=s["default"]}return o(t,[{key:"start",value:function(t){var e=this;this._running||(this._running=!0,this._callback=t,this.usingSetTimeout?this._timeOutID=this.root.setTimeout(function(t){return e.updateSetTimeout(Date.now())},0):this._timeOutID=this.root.requestAnimationFrame(function(t){return e.updateRAF(t)}))}},{key:"updateRAF",value:function(t){var e=this;this._callback(t),this._timeOutID=this.root.requestAnimationFrame(function(t){return e.updateRAF(t)})}},{key:"updateSetTimeout",value:function(t){var e=this;this._timeOutID=this.root.setTimeout(function(t){return e.updateSetTimeout(Date.now())},0)}},{key:"stop",value:function(){this._running&&(this.usingSetTimeout?this.root.clearTimeout(this._timeOutID):this.root.cancelAnimationFrame(this._timeOutID),this._running=!1)}},{key:"normalizeRaf",value:function(){if(this.root.requestAnimationFrame)return!0;for(var t=["ms","moz","webkit","o"],e=0;e<t.length;e++){var n=t[e];return this.root.requestAnimationFrame=this.root[n]+"RequestAnimationFrame",this.root.cancelAnimationFrame=this.root[n]+"CancelAnimationFrame",!0}return!1}},{key:"usingSetTimeout",get:function(){return this.forceSetTimeOut}},{key:"usingRAF",get:function(){return!this.forceSetTimeOut}},{key:"isRunning",get:function(){return this._running},set:function(t){t?this.start():this.stop()}}]),t}();e["default"]=u},function(t,e){"use strict";function n(){}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},,,,,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=e.Game=void 0;var r=n(170),o=i(r),a=n(190),s=i(a);e.Game=o["default"],e.Sprite=s["default"]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(120),s=i(a),u=n(122),l=i(u),f=n(128),c=i(f),h=n(126),d=i(h),v=n(130),p=i(v),y=n(153),g=i(y),m=n(171),b=i(m),_=n(173),O=i(_),w=n(9),P=i(w),k=n(12),j=i(k),M=n(152),T=i(M),E=n(58),D=i(E),S=n(174),x=i(S),L=n(14),F=i(L),C=function(){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?(0,s["default"])():arguments[0];r(this,t),this.config=n,this.config.require((0,l["default"])(),(0,c["default"])(),(0,d["default"])(),(0,p["default"])()),this.canvas=null,this.context=null,this.load=null,(0,g["default"])().then(function(){return e.init()})}return o(t,[{key:"init",value:function(){var t=this;(0,b["default"])(this.config.get("gameTitle").name,this.config.get("gameTitle").url);var e=this.config.get("dimensions");this.canvas=(0,P["default"])(e.width,e.height),this.context=(0,j["default"])(this.canvas),(0,T["default"])(this.canvas,this.config.get("parent")),this.state=this.config.get("state"),this.load=new x["default"],this.state.canvas=this.canvas,this.state.context=this.context,this.state.load=this.load,this.state.init(),this.state.preload(),this.load.start().then(function(e){return t.start(e)})}},{key:"start",value:function(t){var e=this;this.state.create(),this.loop=new O["default"](this.config.get("frameRate")),this.loop.begin=function(t){return e.begin(t)},this.loop.update=function(t){return e.update(t)},this.loop.draw=function(t){return e.render(t)},this.loop.start()}},{key:"begin",value:function(){(0,F["default"])(this.context),(0,D["default"])(this.context,!1)}},{key:"update",value:function(t){this.state.update(t)}},{key:"render",value:function(t){this.state.preRender(),this.state.render(t),this.state.postRender()}}]),t}();e["default"]=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var n="%c %c %c %c %c  ";t&&(n=n.concat(t+" powered by ")),n=n.concat("Lazer v"+a["default"].major+"."+a["default"].minor),void 0===e?n=n.concat(" - https://lazerjs.io"):""!==e&&(n=n.concat(" - "+e)),n=n.concat("  "),console.log.apply(console,[n,"background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #ffffff; background: #000;"])}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var o=n(172),a=i(o)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={major:1,minor:2,point:3,build:1,date:"12th January 2016"};e["default"]=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(156),s=i(a),u=n(157),l=i(u),f=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?60:arguments[0];r(this,t),this.getTime=Date.now,window.performance&&(window.performance.now?this.getTime=function(){return window.performance.now()}:window.performance.webkitNow&&(this.getTime=function(){return window.performance.webkitNow()})),this.timestep=1e3/e,this.physicsStep=1/e,this.frameDelta=0,this.lastFrameTimeMs=0,this.fps=60,this.lastFpsUpdate=0,this.framesThisSecond=0,this.numUpdateSteps=0,this.minFrameDelay=0,this.running=!1,this.started=!1,this.panic=!1,this.begin=l["default"],this.update=l["default"],this.draw=l["default"],this.end=l["default"],this.raf=new s["default"](window,!1)}return o(t,[{key:"resetFrameDelta",value:function(){var t=this.frameDelta;return this.frameDelta=0,t}},{key:"start",value:function(){var t=this;return this.started?this:(this.started=!0,this.running=!0,this.lastFrameTimeMs=this.getTime(),this.lastFpsUpdate=this.getTime(),this.framesThisSecond=0,void this.raf.start(function(e){return t.step(e)}))}},{key:"step",value:function(t){if(!(t<this.lastFrameTimeMs+this.minFrameDelay)){for(this.frameDelta+=t-this.lastFrameTimeMs,this.lastFrameTimeMs=t,this.begin(t,this.frameDelta),t>this.lastFpsUpdate+1e3&&(this.fps=.25*this.framesThisSecond+.75*this.fps,this.lastFpsUpdate=t,this.framesThisSecond=0),this.framesThisSecond++,this.numUpdateSteps=0;this.frameDelta>=this.timestep;)if(this.update(this.timestep),this.frameDelta-=this.timestep,++this.numUpdateSteps>=240){this.panic=!0;break}this.draw(this.frameDelta/this.timestep),this.end(this.fps,this.panic),this.panic=!1}}},{key:"stop",value:function(){return this.running=!1,this.started=!1,this.raf.stop(),this}},{key:"maxFPS",get:function(){return 1e3/this.minFrameDelay},set:function(){var t=arguments.length<=0||void 0===arguments[0]?1/0:arguments[0];0===t?this.stop():this.minFrameDelay=1e3/t}},{key:"isRunning",get:function(){return this.running}}]),t}();e["default"]=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(175),l=i(u),f=n(180),c=i(f),h=n(181),d=i(h),v=n(182),p=i(v),y=n(184),g=i(y),m=n(185),b=i(m),_=n(186),O=i(_),w=n(187),P=i(w),k=n(189),j=i(k),M=function(t){function e(){return r(this,e),o(this,Object.getPrototypeOf(e).call(this))}return a(e,t),s(e,[{key:"image",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return this.addFile((0,c["default"])(t,e))}},{key:"images",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(Array.isArray(e))for(var n=0;n<t.length;n++)this.image(t[n],e[n]);else for(var i=0;i<t.length;i++)this.image(t[i]);return this}},{key:"json",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return this.addFile((0,d["default"])(t,e))}},{key:"text",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return this.addFile((0,g["default"])(t,e))}},{key:"glsl",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return this.addFile((0,b["default"])(t,e))}},{key:"shader",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return this.addFile((0,b["default"])(t,e))}},{key:"xml",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return this.addFile((0,p["default"])(t,e))}},{key:"binary",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2],i=(0,O["default"])(t,e);return i.processCallback=n,this.addFile(i)}},{key:"atlas",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],i=arguments.length<=3||void 0===arguments[3]?void 0:arguments[3];return this.addFile((0,P["default"])(t,e,n,i))}},{key:"atlasXML",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],i=arguments.length<=3||void 0===arguments[3]?void 0:arguments[3];return this.addFile((0,j["default"])(t,e,n,i))}}]),e}(l["default"]);e["default"]=M},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.DESTROYED=e.FAILED=e.COMPLETE=e.PROCESSING=e.LOADING=e.PENDING=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(176),u=r(s),l=n(177),f=i(l),c=e.PENDING=0,h=e.LOADING=1,d=e.PROCESSING=2,v=e.COMPLETE=3,p=e.FAILED=4,y=e.DESTROYED=5,g=function(){function t(){o(this,t),this.baseURL="",this.path="",this.tag="",this.enableParallel=!0,this.maxParallelDownloads=4,this.xhr=(0,u["default"])(),this.crossOrigin=void 0,this.list=new Set,this.inflight=new Set,this.failed=new Set,this.queue=new Set,this.storage=new Set,this._state=c,this._resolve=void 0,this._reject=void 0}return a(t,[{key:"startFileGroup",value:function(t){this.tag=t}},{key:"stopFileGroup",value:function(){this.tag=""}},{key:"addFile",value:function(t){return this.isReady?(t.multipart?(t.fileA.path=this.path,t.fileB.path=this.path,t.fileA.tag=this.tag,t.fileB.tag=this.tag,this.list.add(t.fileA),this.list.add(t.fileB)):(t.path=this.path,t.tag=this.tag,this.list.add(t)),new Promise(function(e,n){t.resolve=e,t.reject=n})):-1}},{key:"start",value:function(){var t=this;if(this.isReady)return 0===this.list.size?this.finishedLoading():(this.state=h,this.failed.clear(),this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.processLoadQueue()),new Promise(function(e,n){t._resolve=e,t._reject=n})}},{key:"updateProgress",value:function(){}},{key:"processLoadQueue",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.list[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;if(o.state===f.PENDING&&this.inflight.size<this.maxParallelDownloads&&(this.inflight.add(o),this.list["delete"](o),this.loadFile(o)),this.inflight.size===this.maxParallelDownloads)break}}catch(a){e=!0,n=a}finally{try{!t&&r["return"]&&r["return"]()}finally{if(e)throw n}}}},{key:"loadFile",value:function(t){var e=this;t.src=this.getURL(t),void 0===t.crossOrigin&&this.crossOrigin&&(t.crossOrigin=this.crossOrigin),t.load(this.xhr).then(function(t){return e.nextFile(t,!0)})["catch"](function(t){return e.nextFile(t,!1)})}},{key:"nextFile",value:function(t,e){e?this.queue.add(t):this.failed.add(t),this.inflight["delete"](t),this.list.size>0?this.processLoadQueue():0===this.inflight.size&&this.finishedLoading()}},{key:"getURL",value:function(t){return t.url?t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:this.baseURL+t.path+t.url:!1}},{key:"finishedLoading",value:function(){this.state=d,this.storage.clear();var t=!0,e=!1,n=void 0;try{for(var i,r=this.queue[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;o.onProcess(),o.processCallback&&o.processCallback(o),o.onComplete(),this.storage.add(o)}}catch(a){e=!0,n=a}finally{try{!t&&r["return"]&&r["return"]()}finally{if(e)throw n}}this.list.clear(),this.inflight.clear(),this.queue.clear(),console.log("Loader Complete. Loaded:",this.storage.size,"Failed:",this.failed.size),this.state=v}},{key:"getLoadedFilesByType",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],i=!0,r=!1,o=void 0;try{for(var a,s=this.storage[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value;u.state===f.COMPLETE&&u.tag===e&&u.type===t&&n.push(u)}}catch(l){r=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw o}}return n}},{key:"getLoadedFiles",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=!0,i=!1,r=void 0;try{for(var o,a=this.storage[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.state===f.COMPLETE&&s.tag===t&&""!==type&&s.type===type&&e.push(s)}}catch(u){i=!0,r=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}return e}},{key:"reset",value:function(){this.list.clear(),this.inflight.clear(),this.failed.clear(),this.queue.clear(),this.storage.clear(),this.tag="",this.path="",this.baseURL="",this.state=c}},{key:"destroy",value:function(){this.reset(),this.state=y}},{key:"state",get:function(){return this._state},set:function(t){this._state!==t&&(this._state=t,t===v&&this._resolve?this._resolve(this.getLoadedFiles(),this):t===p&&this._reject&&this._reject(this))}},{key:"isLoading",get:function(){return this._state===h||this._state===d}},{key:"isReady",get:function(){return this._state===c||this._state===v||this._state===p}}]),t}();e["default"]=g},function(t,e){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],i=arguments.length<=3||void 0===arguments[3]?"":arguments[3],r=arguments.length<=4||void 0===arguments[4]?0:arguments[4];return{responseType:t,async:e,user:n,password:i,timeout:r,header:void 0,headerValue:void 0,overrideMimeType:void 0}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n){return t?{key:t,url:e,path:"",src:e,tag:"",type:n,state:l,multipart:void 0,linkFile:void 0,data:void 0,crossOrigin:void 0,resolve:void 0,reject:void 0,processCallback:void 0,xhr:(0,u["default"])("text"),onStateChange:function(t){this.state!==t&&(this.state=t,t===v?(this.multipart&&this.linkFile.state===v&&this.multipart.resolve&&this.multipart.resolve(this.multipart),this.resolve&&this.resolve(this)):t===h&&(this.multipart&&this.multipart.reject&&this.multipart.reject(this.multipart,error),this.reject&&this.reject(this)))},load:function(t){return this.onStateChange(f),(0,a["default"])(this,t)},onLoad:function(){this.onStateChange(c)},onError:function(){this.onStateChange(h)},onProcess:function(){this.onStateChange(d)},onComplete:function(){this.onStateChange(v)},onDestroy:function(){this.onStateChange(p)}}:void console.warn("Invalid File key")}Object.defineProperty(e,"__esModule",{value:!0}),e.DESTROYED=e.COMPLETE=e.PROCESSING=e.FAILED=e.LOADED=e.LOADING=e.PENDING=void 0,e["default"]=r;var o=n(178),a=i(o),s=n(176),u=i(s),l=e.PENDING=0,f=e.LOADING=1,c=e.LOADED=2,h=e.FAILED=3,d=e.PROCESSING=4,v=e.COMPLETE=5,p=e.DESTROYED=6},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var n=(0,a["default"])(e,t.xhr),i=new XMLHttpRequest;return i.open("GET",t.src,n.async,n.user,n.password),i.responseType=t.xhr.responseType,i.timeout=n.timeout,n.header&&n.headerValue&&i.setRequestHeader(n.header,n.headerValue),n.overrideMimeType&&i.overrideMimeType(n.overrideMimeType),new Promise(function(e,n){i.onload=function(){t.onLoad(i),e(t)},i.onerror=function(){t.onError(i),n(t)},i.send()})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var o=n(179),a=i(o)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var n=void 0===t?(0,a["default"])():Object.assign(t);if(e)for(var i in e)void 0!==e[i]&&(n[i]=e[i]);return n}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var o=n(176),a=i(o)},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];""!==e||n||(e=t+".png");var i=(0,a["default"])(t,e,s);return i.load=function(){var e=this;return this.onStateChange(a.LOADING),this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),new Promise(function(n,r){e.data.onload=function(){e.data.onload&&(e.data.onload=null,e.data.onerror=null,e.state=a.LOADED,n(i))},e.data.onerror=function(t){e.data.onload&&(e.data.onload=null,e.data.onerror=null,e.error=t,e.state=a.FAILED,r(i))},e.data.name=t,e.data.src=e.src,e.data.complete&&e.data.width&&e.data.height&&(e.data.onload=null,e.data.onerror=null,e.state=a.LOADED,n(i))})},i}Object.defineProperty(e,"__esModule",{value:!0}),e.TYPE=void 0,e["default"]=r;var o=n(177),a=i(o),s=e.TYPE="image"},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];""!==e||n||(e=t+".json");var i=(0,a["default"])(t,e,s);return i.xhr.responseType="text",i.onLoad=function(t){this.data=t.responseText,this.onStateChange(a.LOADED)},i.onProcess=function(){this.onStateChange(a.PROCESSING),this.data=JSON.parse(this.data)},n&&(i.data=n,i.onProcess()),i}Object.defineProperty(e,"__esModule",{value:!0}),e.TYPE=void 0,e["default"]=r;var o=n(177),a=i(o),s=e.TYPE="json"},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];""!==e||n||(e=t+".xml");var i=(0,l["default"])(t,e,f);return i.xhr.responseType="text",i.onLoad=function(t){this.data=t.responseText,this.onStateChange(l.LOADED)},i.onProcess=function(){this.onStateChange(l.PROCESSING);var t=(0,s["default"])(this.data);if(!t)throw new Error("XMLFile: Invalid XML");this.data=t},n&&(i.data=n,i.onProcess()),i}Object.defineProperty(e,"__esModule",{value:!0}),e.TYPE=void 0,e["default"]=o;var a=n(183),s=r(a),u=n(177),l=i(u),f=e.TYPE="xml"},function(t,e){"use strict";function n(t){var e="";try{if(window.DOMParser){var n=new DOMParser;e=n.parseFromString(t,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.loadXML(t)}catch(i){e=null}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length?e:null}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];""!==e||n||(e=t+".txt");var i=(0,a["default"])(t,e,s);return i.xhr.responseType="text",i.onLoad=function(t){this.data=t.responseText,this.onStateChange(a.LOADED)},n&&(i.data=n,i.onProcess()),i}Object.defineProperty(e,"__esModule",{value:!0}),e.TYPE=void 0,e["default"]=r;var o=n(177),a=i(o),s=e.TYPE="text"},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];""!==e||n||(e=t+".glsl");var i=(0,a["default"])(t,e,s);return i.xhr.responseType="text",i.onLoad=function(t){this.data=t.responseText,this.onStateChange(a.LOADED)},n&&(i.data=n,i.onProcess()),i}Object.defineProperty(e,"__esModule",{value:!0}),e.TYPE=void 0,e["default"]=r;var o=n(177),a=i(o),s=e.TYPE="glsl"},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];""!==e||n||(e=t+".bin");var i=(0,a["default"])(t,e,s);return i.xhr.responseType="arraybuffer",i.onLoad=function(t){this.data=t.response,this.onStateChange(a.LOADED)},n&&(i.data=n,i.onProcess()),i}Object.defineProperty(e,"__esModule",{value:!0}),e.TYPE=void 0,e["default"]=r;var o=n(177),a=i(o),s=e.TYPE="binary"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n,i){return""===n&&null===i&&(n=t+".json"),(0,f["default"])((0,a["default"])(t,e),(0,u["default"])(t,n,i))}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var o=n(180),a=i(o),s=n(181),u=i(s),l=n(188),f=i(l)},function(t,e){"use strict";function n(t,e){t.linkFile=e,e.linkFile=t;var n={multipart:!0,fileA:t,fileB:e,resolve:void 0,reject:void 0,load:function(){var t=this;return new Promise(function(e,n){t.resolve=e,t.reject=n,t.fileA.load().then(function(t){t.onProcess(),t.processCallback&&t.processCallback(t),t.onComplete()})["catch"](function(t){t.onError()}),t.fileB.load().then(function(t){t.onProcess(),t.processCallback&&t.processCallback(t),t.onComplete()})["catch"](function(t){t.onError()})})}};return t.multipart=n,e.multipart=n,n}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n,i){return""===n&&null===i&&(n=t+".xml"),(0,l["default"])((0,a["default"])(t,e),XMLFile(t,n,i))}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var o=n(180),a=i(o),s=n(181),u=(i(s),n(188)),l=i(u)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(191),l=i(u),f=n(200),c=i(f),h=function(t){function e(t,n,i){r(this,e);var a=o(this,Object.getPrototypeOf(e).call(this,n,i));return a.texture={image:t,width:t.width,height:t.height},a}return a(e,t),s(e,[{key:"render",value:function(t,e){(0,c["default"])(this.transform,t,e);var n=this.rotationAnchor.x*-this.texture.width,i=this.rotationAnchor.y*-this.texture.height;t.drawImage(this.texture.image,n,i)}}]),e}(l["default"]);e["default"]=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(192),s=i(a),u=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=arguments.length<=3||void 0===arguments[3]?1:arguments[3],a=arguments.length<=4||void 0===arguments[4]?1:arguments[4];r(this,t),this.transform=new s["default"](e,n,i,o,a),this.position=this.transform.position,this.scale=this.transform.scale,this.rotationAnchor=this.transform.rotationAnchor;
}return o(t,[{key:"x",get:function(){return this.position.getX()},set:function(t){return this.position.setX(t)}},{key:"y",get:function(){return this.position.getY()},set:function(t){return this.position.setY(t)}},{key:"rotation",get:function(){return this.transform.rotation.getValue()},set:function(t){return this.transform.rotation.setValue(t)}}]),t}();e["default"]=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(193),s=i(a),u=n(194),l=i(u),f=n(196),c=i(f),h=n(197),d=i(h),v=n(199),p=i(v),y=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=arguments.length<=3||void 0===arguments[3]?1:arguments[3],a=arguments.length<=4||void 0===arguments[4]?1:arguments[4];r(this,t),this.position=new c["default"](this,e,n),this.scale=new l["default"](this,o,a),this.rotation=new d["default"](this,i),this.rotationAnchor=new p["default"](this,0,0),this.local=(0,s["default"])(o,0,0,a,e,n),this.interpolate=!1,this.immediate=!1,this.dirty=!0}return o(t,[{key:"addProperties",value:function(t){return this.position.addProperties(t),this.rotation.addProperties(t),t.position=this.position,t.scale=this.scale,t.rotationAnchor=this.rotationAnchor,t}},{key:"enableImmediateUpdates",value:function(){return this.immediate=!0,this}},{key:"disableImmediateUpdates",value:function(){return this.immediate=!1,this.dirty=!0,this}},{key:"enableInterpolation",value:function(){return this.interpolate=!0,this.position.reset(this.position.x,this.position.y),this.scale.reset(this.scale.x,this.scale.y),this}},{key:"disableInterpolation",value:function(){return this.interpolate=!1,this}},{key:"setDirty",value:function(){return this.immediate?this.updateTransform():this.dirty=!0,this}},{key:"updateTransform",value:function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return this.rotation.isFast?(this.local[0]=this.scale[0],this.local[1]=0,this.local[2]=0,this.local[3]=this.scale[1]):(this.local[0]=this.rotation.cr*this.scale[0],this.local[1]=this.rotation.sr*this.scale[0],this.local[2]=-this.rotation.sr*this.scale[1],this.local[3]=this.rotation.cr*this.scale[1]),this.interpolate?(this.local[4]=this.position.getDeltaX(t),this.local[5]=this.position.getDeltaY(t)):(this.local[4]=this.position[0],this.local[5]=this.position[1]),this.dirty=!1,this}},{key:"destroy",value:function(){this.position.destroy(),this.scale.destroy(),this.rotation.destroy(),this.rotationAnchor.destroy(),this.local=void 0}}]),t}();e["default"]=y},function(t,e){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=arguments.length<=3||void 0===arguments[3]?1:arguments[3],o=arguments.length<=4||void 0===arguments[4]?0:arguments[4],a=arguments.length<=5||void 0===arguments[5]?0:arguments[5],s=arguments.length<=6||void 0===arguments[6]?new i(6):arguments[6];return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=o,s[5]=a,s}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i=Float32Array},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(195),l=i(u),f=function(t){function e(t){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,n,i))}return a(e,t),s(e,[{key:"addProperties",value:function(t){var e=this;t.hasOwnProperty("scale")||(t.scale={}),Object.defineProperties(t.scale,{x:{enumerable:!0,get:function(){return e.getX()},set:function(t){return e.setX(t)}},y:{enumerable:!0,get:function(){return e.getY()},set:function(t){return e.setY(t)}}})}}]),e}(l["default"]);e["default"]=f},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){var i=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2];n(this,t),this.transform=e,this[0]=i,this[1]=r,this[2]=i,this[3]=r}return i(t,[{key:"getX",value:function(){return this[0]}},{key:"getY",value:function(){return this[1]}},{key:"getDeltaX",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this[2]+(this[0]-this[2])*t}},{key:"getDeltaY",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this[3]+(this[1]-this[3])*t}},{key:"setX",value:function(t){this[0]!==t&&(this[2]=this[0],this[0]=t,this.transform.setDirty())}},{key:"setY",value:function(t){this[1]!==t&&(this[3]=this[1],this[1]=t,this.transform.setDirty())}},{key:"set",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?t:arguments[1];this[2]=this[0],this[3]=this[1],this[0]=t,this[1]=e,this.transform.setDirty()}},{key:"resetX",value:function(t){this[0]=t,this[2]=t,this.transform.setDirty()}},{key:"resetY",value:function(t){this[1]=t,this[3]=t,this.transform.setDirty()}},{key:"reset",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?t:arguments[1];this[0]=t,this[1]=e,this[2]=t,this[3]=e,this.transform.setDirty()}},{key:"setTransform",value:function(t){this.transform=t}},{key:"destroy",value:function(){this.transform=void 0}},{key:"x",get:function(){return this[0]},set:function(t){this.setX(t)}},{key:"y",get:function(){return this[1]},set:function(t){this.setY(t)}}]),t}();e["default"]=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(195),l=i(u),f=function(t){function e(t){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,n,i))}return a(e,t),s(e,[{key:"addProperties",value:function(t){var e=this;Object.defineProperties(t,{x:{enumerable:!0,get:function(){return e.getX()},set:function(t){return e.setX(t)}},y:{enumerable:!0,get:function(){return e.getY()},set:function(t){return e.setY(t)}}})}}]),e}(l["default"]);e["default"]=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(198),a=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1];i(this,t),this.transform=e,this[0]=n,this[1]=n%o.PI2,this.sr=0,this.cr=0}return r(t,[{key:"getValue",value:function(){return this[0]}},{key:"setValue",value:function(t){this[0]!==t&&(this[0]=t,this[1]=t%o.PI2,this[1]&&(this.sr=Math.sin(t),this.cr=Math.cos(t)),this.transform.setDirty())}},{key:"setTransform",value:function(t){this.transform=t}},{key:"addProperties",value:function(t){var e=this;Object.defineProperties(t,{rotation:{enumerable:!0,get:function(){return e.getValue()},set:function(t){return e.setValue(t)}}})}},{key:"destroy",value:function(){this.transform=void 0}},{key:"isFast",get:function(){return 0===this[1]}}]),t}();e["default"]=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PI2=2*Math.PI,e.HALFPI=.5*Math.PI,e.EPSILON=1e-6},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(195),l=i(u),f=function(t){function e(t){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return r(this,e),o(this,Object.getPrototypeOf(e).call(this,t,n,i))}return a(e,t),s(e,[{key:"addProperties",value:function(t){var e=this;t.hasOwnProperty("rotationAnchor")||(t.rotationAnchor={}),Object.defineProperties(t.rotationAnchor,{x:{enumerable:!0,get:function(){return e.getX()},set:function(t){return e.setX(t)}},y:{enumerable:!0,get:function(){return e.getY()},set:function(t){return e.setY(t)}}})}}]),e}(l["default"]);e["default"]=f},function(t,e){"use strict";function n(t,e){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];t.dirty&&t.updateTransform(n),e.setTransform(t.local[0],t.local[1],t.local[2],t.local[3],t.local[4],t.local[5])}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n}])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uPzVjYTYqKioqKioqKiIsIndlYnBhY2s6Ly8vZ2FtZS5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMWI2ZjU4YTE3NzQ1MDgwZjAwMWE/Nzc5ZSoqKioqKioqIiwid2VicGFjazovLy8uL3NyYy9nYW1lL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9jYW52YXMvQ2FudmFzLmpzPzg4OWEqIiwid2VicGFjazovLy8uL3NyYy9jYW52YXMvR2V0Q29udGV4dC5qcz9jYjcxKiIsIndlYnBhY2s6Ly8vLi9zcmMvY2FudmFzL1Jlc2V0VHJhbnNmb3JtLmpzP2FmN2QiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy9ncmFwaGljcy9DbGVhci5qcz85NGFmIiwid2VicGFjazovLy8uL3NyYy9jb25maWcvQ29uZmlnLmpzPzZjNGYiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy9zZXR0aW5ncy9EaW1lbnNpb25zLmpzP2E3MjUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy9zZXR0aW5ncy9GcmFtZVJhdGUuanM/MjIzZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29uZmlnL3NldHRpbmdzL1BhcmVudC5qcz9iNmQ0Iiwid2VicGFjazovLy8uL3NyYy9jb25maWcvc2V0dGluZ3MvU3RhdGUuanM/ZGQzMyIsIndlYnBhY2s6Ly8vLi9zcmMvZG9tL0FkZFRvRE9NLmpzPzE4ZDEiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RvbS9Cb290LmpzPzdiN2UiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RvbS9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanM/NWVjNSIsIndlYnBhY2s6Ly8vLi9zcmMvc3lzdGVtL05PT1AuanM/MWNmZCIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9uYW5vL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL25hbm8vR2FtZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvQmFubmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9WZXJzaW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9zeXN0ZW0vTWFpbkxvb3AuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xvYWRlci9Mb2FkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xvYWRlci9CYXNlTG9hZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9sb2FkZXIvWEhSU2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xvYWRlci9GaWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9sb2FkZXIvWEhSTG9hZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9sb2FkZXIvTWVyZ2VYSFJTZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbG9hZGVyL3R5cGVzL0ltYWdlRmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbG9hZGVyL3R5cGVzL0pTT05GaWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9sb2FkZXIvdHlwZXMvWE1MRmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3lzdGVtL1BhcnNlWE1MLmpzIiwid2VicGFjazovLy8uL3NyYy9sb2FkZXIvdHlwZXMvVGV4dEZpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xvYWRlci90eXBlcy9HTFNMRmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbG9hZGVyL3R5cGVzL0JpbmFyeUZpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xvYWRlci90eXBlcy9BdGxhc0pTT05GaWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9sb2FkZXIvTXVsdGlGaWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9sb2FkZXIvdHlwZXMvQXRsYXNYTUxGaWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL25hbm8vU3ByaXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXRoL3RyYW5zZm9ybS8yZC9iYXNpYy9CYXNlVHJhbnNmb3JtLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXRoL3RyYW5zZm9ybS8yZC9iYXNpYy9UcmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hdGgvbWF0cml4L21hdDIzL0J1aWxkLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXRoL3RyYW5zZm9ybS8yZC9jb21wb25lbnRzL1NjYWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXRoL3RyYW5zZm9ybS8yZC9jb21wb25lbnRzL0Jhc2VUcmFuc2Zvcm1Db21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hdGgvdHJhbnNmb3JtLzJkL2NvbXBvbmVudHMvUG9zaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hdGgvdHJhbnNmb3JtLzJkL2NvbXBvbmVudHMvUm90YXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hdGgvQ29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXRoL3RyYW5zZm9ybS8yZC9jb21wb25lbnRzL1JvdGF0aW9uQW5jaG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXRoL3RyYW5zZm9ybS8yZC9TZXRUcmFuc2Zvcm1Ub0NvbnRleHQuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJvYmoiLCJfX2VzTW9kdWxlIiwibmV3T2JqIiwia2V5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwibmFubyIsInVuZGVmaW5lZCIsIl9uYW5vIiwid2lkdGgiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJoZWlnaHQiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJHZXRDb250ZXh0Iiwib3B0aW9ucyIsImdldENvbnRleHQiLCJSZXNldFRyYW5zZm9ybSIsImNvbnRleHQiLCJzZXRUcmFuc2Zvcm0iLCJDbGVhciIsImZpbGwiLCJyIiwiZyIsImIiLCJhIiwib2xkU3R5bGUiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImNsZWFyUmVjdCIsIkNvbmZpZyIsIl9sZW4iLCJzZXR0aW5ncyIsIkFycmF5IiwiX2tleSIsImNvbmZpZyIsImFkZCIsInNldHRpbmciLCJkYXRhIiwibmFtZSIsInByb3BlcnRpZXMiLCJyZW1vdmUiLCJyZXF1aXJlIiwiX2xlbjIiLCJfa2V5MiIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwiZXJyIiwiZ2V0IiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIiLCJfZGlkSXRlcmF0b3JFcnJvcjIiLCJfaXRlcmF0b3JFcnJvcjIiLCJfc3RlcDIiLCJfaXRlcmF0b3IyIiwiRGltZW5zaW9ucyIsIkZyYW1lUmF0ZSIsIlBhcmVudCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJkZWZhdWx0IiwiU3RhdGUiLCJfU3RhdGUyIiwiX1N0YXRlIiwiQWRkVG9ET00iLCJlbGVtZW50IiwicGFyZW50Iiwib3ZlcmZsb3dIaWRkZW4iLCJ0YXJnZXQiLCJnZXRFbGVtZW50QnlJZCIsIl90eXBlb2YiLCJub2RlVHlwZSIsImJvZHkiLCJvdmVyZmxvdyIsImFwcGVuZENoaWxkIiwiY29uc3RydWN0b3IiLCJCb290IiwiaXNCb290ZWQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlYWR5U3RhdGUiLCJjaGVjayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwic2V0VGltZW91dCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJpIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9OT09QIiwiX05PT1AyIiwiUmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZm9yY2VTZXRUaW1lT3V0Iiwibm9ybWFsaXplUmFmIiwiX3J1bm5pbmciLCJfdGltZU91dElEIiwiX2NhbGxiYWNrIiwiY2FsbGJhY2siLCJfdGhpcyIsInVzaW5nU2V0VGltZW91dCIsIm5vdyIsInVwZGF0ZVNldFRpbWVvdXQiLCJEYXRlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidXBkYXRlUkFGIiwiX3RoaXMyIiwiX3RoaXMzIiwiY2xlYXJUaW1lb3V0IiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJfYXJyIiwiX2kiLCJ2ZW5kb3IiLCJzZXQiLCJzdGFydCIsInN0b3AiLCJOT09QIiwiU3ByaXRlIiwiR2FtZSIsIl9HYW1lIiwiX0dhbWUyIiwiX1Nwcml0ZSIsIl9TcHJpdGUyIiwiX0NvbmZpZyIsIl9Db25maWcyIiwiX0RpbWVuc2lvbnMiLCJfRGltZW5zaW9uczIiLCJfUGFyZW50IiwiX1BhcmVudDIiLCJfRnJhbWVSYXRlIiwiX0ZyYW1lUmF0ZTIiLCJfQm9vdCIsIl9Cb290MiIsIl9CYW5uZXIiLCJfQmFubmVyMiIsIl9NYWluTG9vcCIsIl9NYWluTG9vcDIiLCJfQ2FudmFzIiwiX0NhbnZhczIiLCJfR2V0Q29udGV4dCIsIl9HZXRDb250ZXh0MiIsIl9BZGRUb0RPTSIsIl9BZGRUb0RPTTIiLCJfQ2xlYXIiLCJfQ2xlYXIyIiwiX0xvYWRlciIsIl9Mb2FkZXIyIiwiX1Jlc2V0VHJhbnNmb3JtIiwiX1Jlc2V0VHJhbnNmb3JtMiIsImxvYWQiLCJ0aGVuIiwiaW5pdCIsInVybCIsInNpemUiLCJzdGF0ZSIsInByZWxvYWQiLCJmaWxlcyIsImNyZWF0ZSIsImxvb3AiLCJiZWdpbiIsInQiLCJ1cGRhdGUiLCJkZWx0YSIsImRyYXciLCJyZW5kZXIiLCJwcmVSZW5kZXIiLCJwb3N0UmVuZGVyIiwiQmFubmVyIiwidGl0bGUiLCJtc2ciLCJjb25jYXQiLCJfVmVyc2lvbjIiLCJtYWpvciIsIm1pbm9yIiwiY29uc29sZSIsImxvZyIsImFwcGx5IiwiX1ZlcnNpb24iLCJWZXJzaW9uIiwicG9pbnQiLCJidWlsZCIsImRhdGUiLCJfUmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiX1JlcXVlc3RBbmltYXRpb25GcmFtZTIiLCJNYWluTG9vcCIsImZyYW1lcmF0ZSIsImdldFRpbWUiLCJwZXJmb3JtYW5jZSIsIndlYmtpdE5vdyIsInRpbWVzdGVwIiwicGh5c2ljc1N0ZXAiLCJmcmFtZURlbHRhIiwibGFzdEZyYW1lVGltZU1zIiwiZnBzIiwibGFzdEZwc1VwZGF0ZSIsImZyYW1lc1RoaXNTZWNvbmQiLCJudW1VcGRhdGVTdGVwcyIsIm1pbkZyYW1lRGVsYXkiLCJydW5uaW5nIiwic3RhcnRlZCIsInBhbmljIiwiZW5kIiwicmFmIiwib2xkRnJhbWVEZWx0YSIsInN0ZXAiLCJ0aW1lc3RhbXAiLCJJbmZpbml0eSIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfQmFzZUxvYWRlcjIiLCJfQmFzZUxvYWRlcjMiLCJfSW1hZ2VGaWxlIiwiX0ltYWdlRmlsZTIiLCJfSlNPTkZpbGUiLCJfSlNPTkZpbGUyIiwiX1hNTEZpbGUiLCJfWE1MRmlsZTIiLCJfVGV4dEZpbGUiLCJfVGV4dEZpbGUyIiwiX0dMU0xGaWxlIiwiX0dMU0xGaWxlMiIsIl9CaW5hcnlGaWxlIiwiX0JpbmFyeUZpbGUyIiwiX0F0bGFzSlNPTkZpbGUiLCJfQXRsYXNKU09ORmlsZTIiLCJfQXRsYXNYTUxGaWxlIiwiX0F0bGFzWE1MRmlsZTIiLCJMb2FkZXIiLCJfQmFzZUxvYWRlciIsImdldFByb3RvdHlwZU9mIiwiYWRkRmlsZSIsImtleXMiLCJ1cmxzIiwiaXNBcnJheSIsImltYWdlIiwiZmlsZSIsInByb2Nlc3NDYWxsYmFjayIsInRleHR1cmVVUkwiLCJhdGxhc1VSTCIsImF0bGFzRGF0YSIsIkRFU1RST1lFRCIsIkZBSUxFRCIsIkNPTVBMRVRFIiwiUFJPQ0VTU0lORyIsIkxPQURJTkciLCJQRU5ESU5HIiwiX1hIUlNldHRpbmdzIiwiX1hIUlNldHRpbmdzMiIsIl9GaWxlIiwiRklMRSIsIkJhc2VMb2FkZXIiLCJiYXNlVVJMIiwicGF0aCIsInRhZyIsImVuYWJsZVBhcmFsbGVsIiwibWF4UGFyYWxsZWxEb3dubG9hZHMiLCJ4aHIiLCJjcm9zc09yaWdpbiIsImxpc3QiLCJTZXQiLCJpbmZsaWdodCIsImZhaWxlZCIsInF1ZXVlIiwic3RvcmFnZSIsIl9zdGF0ZSIsIl9yZXNvbHZlIiwiX3JlamVjdCIsImlzUmVhZHkiLCJtdWx0aXBhcnQiLCJmaWxlQSIsImZpbGVCIiwiZmluaXNoZWRMb2FkaW5nIiwiY2xlYXIiLCJ1cGRhdGVQcm9ncmVzcyIsInByb2Nlc3NMb2FkUXVldWUiLCJsb2FkRmlsZSIsInNyYyIsImdldFVSTCIsIm5leHRGaWxlIiwicHJldmlvdXNGaWxlIiwic3VjY2VzcyIsIm1hdGNoIiwib25Qcm9jZXNzIiwib25Db21wbGV0ZSIsInR5cGUiLCJncm91cCIsIm91dHB1dCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zIiwiX2RpZEl0ZXJhdG9yRXJyb3IzIiwiX2l0ZXJhdG9yRXJyb3IzIiwiX3N0ZXAzIiwiX2l0ZXJhdG9yMyIsInB1c2giLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCIsIl9kaWRJdGVyYXRvckVycm9yNCIsIl9pdGVyYXRvckVycm9yNCIsIl9zdGVwNCIsIl9pdGVyYXRvcjQiLCJyZXNldCIsImdldExvYWRlZEZpbGVzIiwiWEhSU2V0dGluZ3MiLCJyZXNwb25zZVR5cGUiLCJhc3luYyIsInVzZXIiLCJwYXNzd29yZCIsInRpbWVvdXQiLCJoZWFkZXIiLCJoZWFkZXJWYWx1ZSIsIm92ZXJyaWRlTWltZVR5cGUiLCJGaWxlIiwibGlua0ZpbGUiLCJvblN0YXRlQ2hhbmdlIiwiZXJyb3IiLCJnbG9iYWxYSFJTZXR0aW5ncyIsIl9YSFJMb2FkZXIyIiwib25Mb2FkIiwiTE9BREVEIiwib25FcnJvciIsIm9uRGVzdHJveSIsIndhcm4iLCJfWEhSTG9hZGVyIiwiWEhSTG9hZGVyIiwiX01lcmdlWEhSU2V0dGluZ3MyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsIm9uZXJyb3IiLCJzZW5kIiwiX01lcmdlWEhSU2V0dGluZ3MiLCJNZXJnZVhIUlNldHRpbmdzIiwiZ2xvYmFsIiwibG9jYWwiLCJhc3NpZ24iLCJJbWFnZUZpbGUiLCJUWVBFIiwiSW1hZ2UiLCJldmVudCIsImNvbXBsZXRlIiwiSlNPTkZpbGUiLCJyZXNwb25zZVRleHQiLCJKU09OIiwicGFyc2UiLCJYTUxGaWxlIiwieG1sIiwiX1BhcnNlWE1MMiIsIkVycm9yIiwiX1BhcnNlWE1MIiwiUGFyc2VYTUwiLCJkb21wYXJzZXIiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJBY3RpdmVYT2JqZWN0IiwibG9hZFhNTCIsImUiLCJkb2N1bWVudEVsZW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIlRleHRGaWxlIiwiR0xTTEZpbGUiLCJCaW5hcnlGaWxlIiwicmVzcG9uc2UiLCJBdGxhc0pTT05GaWxlIiwiX011bHRpRmlsZTIiLCJfTXVsdGlGaWxlIiwiTXVsdGlGaWxlIiwiQXRsYXNYTUxGaWxlIiwiX0Jhc2VUcmFuc2Zvcm0yIiwiX0Jhc2VUcmFuc2Zvcm0zIiwiX1NldFRyYW5zZm9ybVRvQ29udGV4dCIsIl9TZXRUcmFuc2Zvcm1Ub0NvbnRleHQyIiwiX0Jhc2VUcmFuc2Zvcm0iLCJ4IiwieSIsInRleHR1cmUiLCJjdHgiLCJ0cmFuc2Zvcm0iLCJkeCIsInJvdGF0aW9uQW5jaG9yIiwiZHkiLCJkcmF3SW1hZ2UiLCJfVHJhbnNmb3JtIiwiX1RyYW5zZm9ybTIiLCJCYXNlVHJhbnNmb3JtIiwicm90YXRpb24iLCJzY2FsZVgiLCJzY2FsZVkiLCJwb3NpdGlvbiIsInNjYWxlIiwiZ2V0WCIsInNldFgiLCJnZXRZIiwic2V0WSIsImdldFZhbHVlIiwic2V0VmFsdWUiLCJfQnVpbGQiLCJfQnVpbGQyIiwiX1NjYWxlIiwiX1NjYWxlMiIsIl9Qb3NpdGlvbiIsIl9Qb3NpdGlvbjIiLCJfUm90YXRpb24iLCJfUm90YXRpb24yIiwiX1JvdGF0aW9uQW5jaG9yIiwiX1JvdGF0aW9uQW5jaG9yMiIsIlRyYW5zZm9ybSIsImludGVycG9sYXRlIiwiaW1tZWRpYXRlIiwiZGlydHkiLCJhZGRQcm9wZXJ0aWVzIiwidXBkYXRlVHJhbnNmb3JtIiwiaXNGYXN0IiwiY3IiLCJzciIsImdldERlbHRhWCIsImdldERlbHRhWSIsImRlc3Ryb3kiLCJNYXQyMyIsImQiLCJmIiwiZHN0IiwibWF0IiwiRmxvYXQzMkFycmF5IiwiX0Jhc2VUcmFuc2Zvcm1Db21wb25lbnQiLCJfQmFzZVRyYW5zZm9ybUNvbXBvbmVudDIiLCJTY2FsZSIsIl9CYXNlVHJhbnNmb3JtQ29tcG9uZSIsIkJhc2VUcmFuc2Zvcm1Db21wb25lbnQiLCJzZXREaXJ0eSIsIlBvc2l0aW9uIiwiX0NvbnN0YW50cyIsIlJvdGF0aW9uIiwiUEkyIiwiTWF0aCIsInNpbiIsImNvcyIsIlBJIiwiSEFMRlBJIiwiRVBTSUxPTiIsIlJvdGF0aW9uQW5jaG9yIiwiU2V0VHJhbnNmb3JtVG9Db250ZXh0Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGdCQUFBQyxVQUFBLGdCQUFBQyxRQUNBQSxPQUFBRCxRQUFBRCxJQUNBLGtCQUFBRyxnQkFBQUMsSUFDQUQsT0FBQSxVQUFBSCxHQUNBLGdCQUFBQyxTQUNBQSxRQUFBLEtBQUFELEtBRUFELEVBQUEsTUFBQUEsRUFBQSxVQUFxQ0EsRUFBQSxXQUFBQyxNQUNwQ0ssS0FBQSxXQUNELE1D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QyxhQUNKMFgsRUFBVTNDLE1BQU0sR0FDaEIyQyxFQUFVM0MsTUFBTSxHQUNoQjJDLEVBQVUzQyxNQUFNLEdBQ2hCMkMsRUFBVTNDLE1BQU0sR0FDaEIyQyxFQUFVM0MsTUFBTSxHQUNoQjJDLEVBQVUzQyxNQUFNLEkvQ3doSHZCclcsT0FBT0csZUFBZXZCLEVBQVMsY0FDM0J3QixPQUFPLElBRVh4QixhK0N4aUh1Qm9lIiwiZmlsZSI6ImdhbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImdhbWVcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiZ2FtZVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJsYXplclwiXSA9IHJvb3RbXCJsYXplclwiXSB8fCB7fSwgcm9vdFtcImxhemVyXCJdW1wiZ2FtZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIFxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvblxuICoqLyIsIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiZ2FtZVwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJnYW1lXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImxhemVyXCJdID0gcm9vdFtcImxhemVyXCJdIHx8IHt9LCByb290W1wibGF6ZXJcIl1bXCJnYW1lXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLm5hbm8gPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX25hbm8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OSk7XG5cdFxuXHR2YXIgbmFubyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9uYW5vKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cdFxuXHRleHBvcnRzLm5hbm8gPSBuYW5vO1xuXG4vKioqLyB9LFxuLyogMSAqLyxcbi8qIDIgKi8sXG4vKiAzICovLFxuLyogNCAqLyxcbi8qIDUgKi8sXG4vKiA2ICovLFxuLyogNyAqLyxcbi8qIDggKi8sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHdpZHRoID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gMjU2IDogYXJndW1lbnRzWzBdO1xuXHQgICAgdmFyIGhlaWdodCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IDI1NiA6IGFyZ3VtZW50c1sxXTtcblx0ICAgIHZhciBpZCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/ICcnIDogYXJndW1lbnRzWzJdO1xuXHRcblx0XG5cdCAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cdFxuXHQgICAgaWYgKGlkICE9PSAnJykge1xuXHQgICAgICAgIGNhbnZhcy5pZCA9IGlkO1xuXHQgICAgfVxuXHRcblx0ICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuXHQgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcblx0ICAgIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XG5cdCAgICByZXR1cm4gY2FudmFzO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTAgKi8sXG4vKiAxMSAqLyxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBHZXRDb250ZXh0O1xuXHRmdW5jdGlvbiBHZXRDb250ZXh0KGNhbnZhcywgb3B0aW9ucykge1xuXHRcblx0ICAgIHJldHVybiBjYW52YXMuZ2V0Q29udGV4dCgnMmQnLCBvcHRpb25zKSB8fCBudWxsO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxMyAqLyxcbi8qIDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFJlc2V0VHJhbnNmb3JtO1xuXHRmdW5jdGlvbiBSZXNldFRyYW5zZm9ybShjb250ZXh0KSB7XG5cdFxuXHQgICAgY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG5cdFxuXHQgICAgcmV0dXJuIGNvbnRleHQ7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE1ICovLFxuLyogMTYgKi8sXG4vKiAxNyAqLyxcbi8qIDE4ICovLFxuLyogMTkgKi8sXG4vKiAyMCAqLyxcbi8qIDIxICovLFxuLyogMjIgKi8sXG4vKiAyMyAqLyxcbi8qIDI0ICovLFxuLyogMjUgKi8sXG4vKiAyNiAqLyxcbi8qIDI3ICovLFxuLyogMjggKi8sXG4vKiAyOSAqLyxcbi8qIDMwICovLFxuLyogMzEgKi8sXG4vKiAzMiAqLyxcbi8qIDMzICovLFxuLyogMzQgKi8sXG4vKiAzNSAqLyxcbi8qIDM2ICovLFxuLyogMzcgKi8sXG4vKiAzOCAqLyxcbi8qIDM5ICovLFxuLyogNDAgKi8sXG4vKiA0MSAqLyxcbi8qIDQyICovLFxuLyogNDMgKi8sXG4vKiA0NCAqLyxcbi8qIDQ1ICovLFxuLyogNDYgKi8sXG4vKiA0NyAqLyxcbi8qIDQ4ICovLFxuLyogNDkgKi8sXG4vKiA1MCAqLyxcbi8qIDUxICovLFxuLyogNTIgKi8sXG4vKiA1MyAqLyxcbi8qIDU0ICovLFxuLyogNTUgKi8sXG4vKiA1NiAqLyxcbi8qIDU3ICovLFxuLyogNTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENsZWFyO1xuXHQvKipcclxuXHQqIEZpbGxzIHRoZSBCaXRtYXBEYXRhIHdpdGggdGhlIGdpdmVuIGNvbG9yLlxyXG5cdCpcclxuXHQqIEBtZXRob2QgUGhhc2VyLkJpdG1hcERhdGEjZmlsbFxyXG5cdCogQHBhcmFtIHtudW1iZXJ9IHIgLSBUaGUgcmVkIGNvbG9yIHZhbHVlLCBiZXR3ZWVuIDAgYW5kIDB4RkYgKDI1NSkuXHJcblx0KiBAcGFyYW0ge251bWJlcn0gZyAtIFRoZSBncmVlbiBjb2xvciB2YWx1ZSwgYmV0d2VlbiAwIGFuZCAweEZGICgyNTUpLlxyXG5cdCogQHBhcmFtIHtudW1iZXJ9IGIgLSBUaGUgYmx1ZSBjb2xvciB2YWx1ZSwgYmV0d2VlbiAwIGFuZCAweEZGICgyNTUpLlxyXG5cdCogQHBhcmFtIHtudW1iZXJ9IFthPTFdIC0gVGhlIGFscGhhIGNvbG9yIHZhbHVlLCBiZXR3ZWVuIDAgYW5kIDEuXHJcblx0KiBAcmV0dXJuIHtQaGFzZXIuQml0bWFwRGF0YX0gVGhpcyBCaXRtYXBEYXRhIG9iamVjdCBmb3IgbWV0aG9kIGNoYWluaW5nLlxyXG5cdCovXG5cdFxuXHRmdW5jdGlvbiBDbGVhcihjb250ZXh0KSB7XG5cdCAgICB2YXIgZmlsbCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzFdO1xuXHQgICAgdmFyIHIgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzJdO1xuXHQgICAgdmFyIGcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzNdO1xuXHQgICAgdmFyIGIgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDQgfHwgYXJndW1lbnRzWzRdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzRdO1xuXHQgICAgdmFyIGEgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDUgfHwgYXJndW1lbnRzWzVdID09PSB1bmRlZmluZWQgPyAxIDogYXJndW1lbnRzWzVdO1xuXHRcblx0XG5cdCAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG5cdFxuXHQgICAgaWYgKCFmaWxsKSB7XG5cdCAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFyIG9sZFN0eWxlID0gY29udGV4dC5maWxsU3R5bGU7XG5cdFxuXHQgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJ3JnYmEoJyArIHIgKyAnLCcgKyBnICsgJywnICsgYiArICcsJyArIGEgKyAnKSc7XG5cdFxuXHQgICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblx0XG5cdCAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBvbGRTdHlsZTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gY29udGV4dDtcblx0fVxuXG4vKioqLyB9LFxuLyogNTkgKi8sXG4vKiA2MCAqLyxcbi8qIDYxICovLFxuLyogNjIgKi8sXG4vKiA2MyAqLyxcbi8qIDY0ICovLFxuLyogNjUgKi8sXG4vKiA2NiAqLyxcbi8qIDY3ICovLFxuLyogNjggKi8sXG4vKiA2OSAqLyxcbi8qIDcwICovLFxuLyogNzEgKi8sXG4vKiA3MiAqLyxcbi8qIDczICovLFxuLyogNzQgKi8sXG4vKiA3NSAqLyxcbi8qIDc2ICovLFxuLyogNzcgKi8sXG4vKiA3OCAqLyxcbi8qIDc5ICovLFxuLyogODAgKi8sXG4vKiA4MSAqLyxcbi8qIDgyICovLFxuLyogODMgKi8sXG4vKiA4NCAqLyxcbi8qIDg1ICovLFxuLyogODYgKi8sXG4vKiA4NyAqLyxcbi8qIDg4ICovLFxuLyogODkgKi8sXG4vKiA5MCAqLyxcbi8qIDkxICovLFxuLyogOTIgKi8sXG4vKiA5MyAqLyxcbi8qIDk0ICovLFxuLyogOTUgKi8sXG4vKiA5NiAqLyxcbi8qIDk3ICovLFxuLyogOTggKi8sXG4vKiA5OSAqLyxcbi8qIDEwMCAqLyxcbi8qIDEwMSAqLyxcbi8qIDEwMiAqLyxcbi8qIDEwMyAqLyxcbi8qIDEwNCAqLyxcbi8qIDEwNSAqLyxcbi8qIDEwNiAqLyxcbi8qIDEwNyAqLyxcbi8qIDEwOCAqLyxcbi8qIDEwOSAqLyxcbi8qIDExMCAqLyxcbi8qIDExMSAqLyxcbi8qIDExMiAqLyxcbi8qIDExMyAqLyxcbi8qIDExNCAqLyxcbi8qIDExNSAqLyxcbi8qIDExNiAqLyxcbi8qIDExNyAqLyxcbi8qIDExOCAqLyxcbi8qIDExOSAqLyxcbi8qIDEyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ29uZmlnO1xuXHQvLyAgQ29uZmlnIExvYWRlclxuXHRcblx0dmFyIGRhdGEgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIENvbmZpZygpIHtcblx0ICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBzZXR0aW5ncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICAgIHNldHRpbmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjb25maWcgPSB7XG5cdFxuXHQgICAgICAgIGFkZDogZnVuY3Rpb24gYWRkKHNldHRpbmcpIHtcblx0XG5cdCAgICAgICAgICAgIGRhdGFbc2V0dGluZy5uYW1lXSA9IHNldHRpbmcuaGFzT3duUHJvcGVydHkoJ3ZhbHVlJykgPyBzZXR0aW5nLnZhbHVlIDogc2V0dGluZy5wcm9wZXJ0aWVzO1xuXHQgICAgICAgIH0sXG5cdFxuXHQgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHtcblx0XG5cdCAgICAgICAgICAgIGRlbGV0ZSBkYXRhW25hbWVdO1xuXHQgICAgICAgIH0sXG5cdFxuXHQgICAgICAgIHJlcXVpcmU6IGZ1bmN0aW9uIHJlcXVpcmUoKSB7XG5cdCAgICAgICAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgc2V0dGluZ3MgPSBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuXHQgICAgICAgICAgICAgICAgc2V0dGluZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXHRcblx0ICAgICAgICAgICAgdHJ5IHtcblx0XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBzZXR0aW5nc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgc2V0dGluZyA9IF9zdGVwLnZhbHVlO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoc2V0dGluZy5uYW1lKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuYWRkKHNldHRpbmcpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcblx0ICAgICAgICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0sXG5cdFxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KGtleSkge1xuXHRcblx0ICAgICAgICAgICAgaWYgKGtleSAmJiBkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBkYXRhW2tleV07XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG5cdCAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG5cdCAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IHNldHRpbmdzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG5cdCAgICAgICAgICAgIHZhciBzZXR0aW5nID0gX3N0ZXAyLnZhbHVlO1xuXHRcblx0ICAgICAgICAgICAgY29uZmlnLmFkZChzZXR0aW5nKTtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuXHQgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcblx0ICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuXHQgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcblx0ICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gY29uZmlnO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxMjEgKi8sXG4vKiAxMjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IERpbWVuc2lvbnM7XG5cdGZ1bmN0aW9uIERpbWVuc2lvbnMoKSB7XG5cdCAgICB2YXIgd2lkdGggPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyA4MDAgOiBhcmd1bWVudHNbMF07XG5cdCAgICB2YXIgaGVpZ2h0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gNjAwIDogYXJndW1lbnRzWzFdO1xuXHRcblx0XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICAgIG5hbWU6ICdkaW1lbnNpb25zJyxcblx0ICAgICAgICBwcm9wZXJ0aWVzOiB7XG5cdCAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcblx0ICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxMjMgKi8sXG4vKiAxMjQgKi8sXG4vKiAxMjUgKi8sXG4vKiAxMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEZyYW1lUmF0ZTtcblx0ZnVuY3Rpb24gRnJhbWVSYXRlKCkge1xuXHQgICAgdmFyIHZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gNjAgOiBhcmd1bWVudHNbMF07XG5cdFxuXHRcblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgbmFtZTogJ2ZyYW1lUmF0ZScsXG5cdCAgICAgICAgdmFsdWU6IHZhbHVlXG5cdCAgICB9O1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxMjcgKi8sXG4vKiAxMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFBhcmVudDtcblx0ZnVuY3Rpb24gUGFyZW50KCkge1xuXHQgICAgdmFyIHZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMF07XG5cdFxuXHRcblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgbmFtZTogJ3BhcmVudCcsXG5cdCAgICAgICAgdmFsdWU6IHZhbHVlXG5cdCAgICB9O1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxMjkgKi8sXG4vKiAxMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFN0YXRlO1xuXHRcblx0dmFyIF9TdGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMwKTtcblx0XG5cdHZhciBfU3RhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3RhdGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIFN0YXRlKHNldHRpbmdzKSB7XG5cdFxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBuYW1lOiAnc3RhdGUnLFxuXHQgICAgICAgIHZhbHVlOiAoMCwgX1N0YXRlMi5kZWZhdWx0KShzZXR0aW5ncylcblx0ICAgIH07XG5cdH1cblxuLyoqKi8gfSxcbi8qIDEzMSAqLyxcbi8qIDEzMiAqLyxcbi8qIDEzMyAqLyxcbi8qIDEzNCAqLyxcbi8qIDEzNSAqLyxcbi8qIDEzNiAqLyxcbi8qIDEzNyAqLyxcbi8qIDEzOCAqLyxcbi8qIDEzOSAqLyxcbi8qIDE0MCAqLyxcbi8qIDE0MSAqLyxcbi8qIDE0MiAqLyxcbi8qIDE0MyAqLyxcbi8qIDE0NCAqLyxcbi8qIDE0NSAqLyxcbi8qIDE0NiAqLyxcbi8qIDE0NyAqLyxcbi8qIDE0OCAqLyxcbi8qIDE0OSAqLyxcbi8qIDE1MCAqLyxcbi8qIDE1MSAqLyxcbi8qIDE1MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQWRkVG9ET007XG5cdGZ1bmN0aW9uIEFkZFRvRE9NKGVsZW1lbnQpIHtcblx0ICAgIHZhciBwYXJlbnQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzFdO1xuXHQgICAgdmFyIG92ZXJmbG93SGlkZGVuID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1syXTtcblx0XG5cdFxuXHQgICAgdmFyIHRhcmdldCA9IHZvaWQgMDtcblx0XG5cdCAgICBpZiAocGFyZW50KSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBwYXJlbnQgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgIC8vIGhvcGVmdWxseSBhbiBlbGVtZW50IElEXG5cdCAgICAgICAgICAgIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudCk7XG5cdCAgICAgICAgfSBlbHNlIGlmICgodHlwZW9mIHBhcmVudCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocGFyZW50KSkgPT09ICdvYmplY3QnICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSkge1xuXHQgICAgICAgICAgICAvLyBxdWljayB0ZXN0IGZvciBhIEhUTUxlbGVtZW50XG5cdCAgICAgICAgICAgIHRhcmdldCA9IHBhcmVudDtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gRmFsbGJhY2ssIGNvdmVycyBhbiBpbnZhbGlkIElEIGFuZCBhIG5vbiBIVE1MZWxlbWVudCBvYmplY3Rcblx0ICAgIGlmICghdGFyZ2V0KSB7XG5cdCAgICAgICAgdGFyZ2V0ID0gZG9jdW1lbnQuYm9keTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAob3ZlcmZsb3dIaWRkZW4gJiYgdGFyZ2V0LnN0eWxlKSB7XG5cdCAgICAgICAgdGFyZ2V0LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cdCAgICB9XG5cdFxuXHQgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuXHRcblx0ICAgIHJldHVybiBlbGVtZW50O1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxNTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEJvb3Q7XG5cdHZhciBpc0Jvb3RlZCA9IGZhbHNlO1xuXHRcblx0ZnVuY3Rpb24gQm9vdCgpIHtcblx0XG5cdCAgICBpZiAoaXNCb290ZWQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJyB8fCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnaW50ZXJhY3RpdmUnKSB7XG5cdCAgICAgICAgICAgIGlzQm9vdGVkID0gdHJ1ZTtcblx0XG5cdCAgICAgICAgICAgIHJlc29sdmUoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIGNoZWNrID0gZnVuY3Rpb24gY2hlY2soKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgY2hlY2ssIHRydWUpO1xuXHQgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBjaGVjaywgdHJ1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBjaGVjaywgdHJ1ZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcblx0ICAgICAgICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5ib2R5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2hlY2ssIDIwKTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGNoZWNrLCB0cnVlKTtcblx0ICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGNoZWNrLCB0cnVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSkoKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTU0ICovLFxuLyogMTU1ICovLFxuLyogMTU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfTk9PUCA9IF9fd2VicGFja19yZXF1aXJlX18oMTU3KTtcblx0XG5cdHZhciBfTk9PUDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9OT09QKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0dmFyIFJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFJlcXVlc3RBbmltYXRpb25GcmFtZShyb290KSB7XG5cdCAgICAgICAgdmFyIGZvcmNlU2V0VGltZU91dCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzFdO1xuXHRcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVxdWVzdEFuaW1hdGlvbkZyYW1lKTtcblx0XG5cdCAgICAgICAgdGhpcy5yb290ID0gcm9vdDtcblx0ICAgICAgICB0aGlzLmZvcmNlU2V0VGltZU91dCA9IGZvcmNlU2V0VGltZU91dDtcblx0XG5cdCAgICAgICAgLy8gIElmIHRoZXJlJ3Mgbm8gd2luZG93IG9iamVjdCBvciBSQUYgdGhlbiB3ZSBoYXZlIHRvIHVzZSBTVCBhbnl3YXlcblx0ICAgICAgICBpZiAoIWZvcmNlU2V0VGltZU91dCkge1xuXHQgICAgICAgICAgICB0aGlzLmZvcmNlU2V0VGltZU91dCA9ICF0aGlzLm5vcm1hbGl6ZVJhZigpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5fcnVubmluZyA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuX3RpbWVPdXRJRCA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSBfTk9PUDIuZGVmYXVsdDtcblx0ICAgIH1cblx0XG5cdCAgICAvLyAgVW5kZXIgU2V0VGltZW91dCB0aGUgY2FsbGJhY2sgbXVzdCByZXR1cm4gdGhlIG1zIHZhbHVlIG9mIHdoZW4gdG8gcnVuIHRoZSBuZXh0IHVwZGF0ZVxuXHRcblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoUmVxdWVzdEFuaW1hdGlvbkZyYW1lLCBbe1xuXHQgICAgICAgIGtleTogJ3N0YXJ0Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQoY2FsbGJhY2spIHtcblx0ICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgICAgICAgIGlmICghdGhpcy5fcnVubmluZykge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5fcnVubmluZyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuXHRcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzaW5nU2V0VGltZW91dCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVPdXRJRCA9IHRoaXMucm9vdC5zZXRUaW1lb3V0KGZ1bmN0aW9uIChub3cpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnVwZGF0ZVNldFRpbWVvdXQoRGF0ZS5ub3coKSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSwgMCk7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVPdXRJRCA9IHRoaXMucm9vdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKG5vdykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudXBkYXRlUkFGKG5vdyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAndXBkYXRlUkFGJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlUkFGKG5vdykge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrKG5vdyk7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLl90aW1lT3V0SUQgPSB0aGlzLnJvb3QucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIChub3cpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIudXBkYXRlUkFGKG5vdyk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICd1cGRhdGVTZXRUaW1lb3V0Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU2V0VGltZW91dChub3cpIHtcblx0ICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLl90aW1lT3V0SUQgPSB0aGlzLnJvb3Quc2V0VGltZW91dChmdW5jdGlvbiAobm93KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLnVwZGF0ZVNldFRpbWVvdXQoRGF0ZS5ub3coKSk7XG5cdCAgICAgICAgICAgIH0sIDApO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdzdG9wJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcCgpIHtcblx0XG5cdCAgICAgICAgICAgIGlmICh0aGlzLl9ydW5uaW5nKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAodGhpcy51c2luZ1NldFRpbWVvdXQpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3QuY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVPdXRJRCk7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucm9vdC5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl90aW1lT3V0SUQpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIHRoaXMuX3J1bm5pbmcgPSBmYWxzZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdub3JtYWxpemVSYWYnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBub3JtYWxpemVSYWYoKSB7XG5cdFxuXHQgICAgICAgICAgICBpZiAodGhpcy5yb290LnJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgX2FyciA9IFsnbXMnLCAnbW96JywgJ3dlYmtpdCcsICdvJ107XG5cdFxuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IF9hcnIubGVuZ3RoOyBfaSsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHZlbmRvciA9IF9hcnJbX2ldO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0cnVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9vdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB0aGlzLnJvb3RbdmVuZG9yXSArICdSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3QuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB0aGlzLnJvb3RbdmVuZG9yXSArICdDYW5jZWxBbmltYXRpb25GcmFtZSc7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICd1c2luZ1NldFRpbWVvdXQnLFxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VTZXRUaW1lT3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICd1c2luZ1JBRicsXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gIXRoaXMuZm9yY2VTZXRUaW1lT3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdpc1J1bm5pbmcnLFxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3J1bm5pbmc7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuXHRcblx0ICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnN0b3AoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblx0XG5cdCAgICByZXR1cm4gUmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG5cbi8qKiovIH0sXG4vKiAxNTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gTk9PUDtcblx0Ly8gSW4gYWxsIG1ham9yIGJyb3dzZXJzLCByZXBsYWNpbmcgbm9uLXNwZWNpZmllZCBmdW5jdGlvbnMgd2l0aCBOT09Qc1xuXHQvLyBzZWVtcyB0byBiZSBhcyBmYXN0IG9yIHNsaWdodGx5IGZhc3RlciB0aGFuIHVzaW5nIGNvbmRpdGlvbnMgdG8gb25seVxuXHQvLyBjYWxsIHRoZSBmdW5jdGlvbnMgaWYgdGhleSBhcmUgc3BlY2lmaWVkLiBUaGlzIGlzIHByb2JhYmx5IGR1ZSB0byBlbXB0eVxuXHQvLyBmdW5jdGlvbnMgYmVpbmcgb3B0aW1pemVkIGF3YXkuIGh0dHA6Ly9qc3BlcmYuY29tL25vb3AtdnMtY29uZGl0aW9uXG5cdFxuXHRmdW5jdGlvbiBOT09QKCkge1xuXHRcblx0ICAgIC8vICBUaGF0J3MgcmlnaHQsIHRoZXJlJ3Mgbm90aGluZyBoZXJlLlxuXHRcblx0fVxuXG4vKioqLyB9LFxuLyogMTU4ICovLFxuLyogMTU5ICovLFxuLyogMTYwICovLFxuLyogMTYxICovLFxuLyogMTYyICovLFxuLyogMTYzICovLFxuLyogMTY0ICovLFxuLyogMTY1ICovLFxuLyogMTY2ICovLFxuLyogMTY3ICovLFxuLyogMTY4ICovLFxuLyogMTY5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlNwcml0ZSA9IGV4cG9ydHMuR2FtZSA9IHVuZGVmaW5lZDtcblx0XG5cdHZhciBfR2FtZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcwKTtcblx0XG5cdHZhciBfR2FtZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9HYW1lKTtcblx0XG5cdHZhciBfU3ByaXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTApO1xuXHRcblx0dmFyIF9TcHJpdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3ByaXRlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLkdhbWUgPSBfR2FtZTIuZGVmYXVsdDtcblx0ZXhwb3J0cy5TcHJpdGUgPSBfU3ByaXRlMi5kZWZhdWx0O1xuXG4vKioqLyB9LFxuLyogMTcwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgICAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX0NvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIwKTtcblx0XG5cdHZhciBfQ29uZmlnMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbmZpZyk7XG5cdFxuXHR2YXIgX0RpbWVuc2lvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMik7XG5cdFxuXHR2YXIgX0RpbWVuc2lvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGltZW5zaW9ucyk7XG5cdFxuXHR2YXIgX1BhcmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTI4KTtcblx0XG5cdHZhciBfUGFyZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BhcmVudCk7XG5cdFxuXHR2YXIgX0ZyYW1lUmF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI2KTtcblx0XG5cdHZhciBfRnJhbWVSYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ZyYW1lUmF0ZSk7XG5cdFxuXHR2YXIgX1N0YXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzApO1xuXHRcblx0dmFyIF9TdGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdGF0ZSk7XG5cdFxuXHR2YXIgX0Jvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Myk7XG5cdFxuXHR2YXIgX0Jvb3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQm9vdCk7XG5cdFxuXHR2YXIgX0Jhbm5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMTcxKTtcblx0XG5cdHZhciBfQmFubmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Jhbm5lcik7XG5cdFxuXHR2YXIgX01haW5Mb29wID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzMpO1xuXHRcblx0dmFyIF9NYWluTG9vcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NYWluTG9vcCk7XG5cdFxuXHR2YXIgX0NhbnZhcyA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgX0NhbnZhczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DYW52YXMpO1xuXHRcblx0dmFyIF9HZXRDb250ZXh0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX0dldENvbnRleHQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfR2V0Q29udGV4dCk7XG5cdFxuXHR2YXIgX0FkZFRvRE9NID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTIpO1xuXHRcblx0dmFyIF9BZGRUb0RPTTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BZGRUb0RPTSk7XG5cdFxuXHR2YXIgX0NsZWFyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7XG5cdFxuXHR2YXIgX0NsZWFyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NsZWFyKTtcblx0XG5cdHZhciBfTG9hZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzQpO1xuXHRcblx0dmFyIF9Mb2FkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTG9hZGVyKTtcblx0XG5cdHZhciBfUmVzZXRUcmFuc2Zvcm0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfUmVzZXRUcmFuc2Zvcm0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmVzZXRUcmFuc2Zvcm0pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgR2FtZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBmdW5jdGlvbiBHYW1lKCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gKDAsIF9Db25maWcyLmRlZmF1bHQpKCkgOiBhcmd1bWVudHNbMF07XG5cdFxuXHQgICAgICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdhbWUpO1xuXHRcblx0ICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuXHRcblx0ICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLnJlcXVpcmUoKDAsIF9EaW1lbnNpb25zMi5kZWZhdWx0KSgpLCAoMCwgX1BhcmVudDIuZGVmYXVsdCkoKSwgKDAsIF9GcmFtZVJhdGUyLmRlZmF1bHQpKCksICgwLCBfU3RhdGUyLmRlZmF1bHQpKCkpO1xuXHRcblx0ICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmxvYWQgPSBudWxsO1xuXHRcblx0ICAgICAgICAgICAgICAgICgwLCBfQm9vdDIuZGVmYXVsdCkoKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmluaXQoKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEdhbWUsIFt7XG5cdCAgICAgICAgICAgICAgICBrZXk6ICdpbml0Jyxcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICgwLCBfQmFubmVyMi5kZWZhdWx0KSh0aGlzLmNvbmZpZy5nZXQoJ2dhbWVUaXRsZScpLm5hbWUsIHRoaXMuY29uZmlnLmdldCgnZ2FtZVRpdGxlJykudXJsKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5jb25maWcuZ2V0KCdkaW1lbnNpb25zJyk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcyA9ICgwLCBfQ2FudmFzMi5kZWZhdWx0KShzaXplLndpZHRoLCBzaXplLmhlaWdodCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dCA9ICgwLCBfR2V0Q29udGV4dDIuZGVmYXVsdCkodGhpcy5jYW52YXMpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgKDAsIF9BZGRUb0RPTTIuZGVmYXVsdCkodGhpcy5jYW52YXMsIHRoaXMuY29uZmlnLmdldCgncGFyZW50JykpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuY29uZmlnLmdldCgnc3RhdGUnKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZCA9IG5ldyBfTG9hZGVyMi5kZWZhdWx0KCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyAgTGluayBzeXN0ZW1zIHRvIHRoZSBTdGF0ZVxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNhbnZhcyA9IHRoaXMuY2FudmFzO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubG9hZCA9IHRoaXMubG9hZDtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vICBQb3B1bGF0ZSB0aGUgTG9hZGVyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaW5pdCgpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnByZWxvYWQoKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZC5zdGFydCgpLnRoZW4oZnVuY3Rpb24gKGZpbGVzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5zdGFydChmaWxlcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgICAgIGtleTogJ3N0YXJ0Jyxcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydChmaWxlcykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vICBBZGQgdG8gY2FjaGU/XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuY3JlYXRlKCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb3AgPSBuZXcgX01haW5Mb29wMi5kZWZhdWx0KHRoaXMuY29uZmlnLmdldCgnZnJhbWVSYXRlJykpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29wLmJlZ2luID0gZnVuY3Rpb24gKHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmJlZ2luKHQpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb3AudXBkYXRlID0gZnVuY3Rpb24gKGRlbHRhKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy51cGRhdGUoZGVsdGEpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb3AuZHJhdyA9IGZ1bmN0aW9uICh0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5yZW5kZXIodCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb3Auc3RhcnQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICBrZXk6ICdiZWdpbicsXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmVnaW4oKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAoMCwgX1Jlc2V0VHJhbnNmb3JtMi5kZWZhdWx0KSh0aGlzLmNvbnRleHQpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgKDAsIF9DbGVhcjIuZGVmYXVsdCkodGhpcy5jb250ZXh0LCBmYWxzZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAga2V5OiAndXBkYXRlJyxcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoZGVsdGEpIHtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudXBkYXRlKGRlbHRhKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcih0KSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnByZVJlbmRlcigpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZW5kZXIodCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnBvc3RSZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICB9XSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBHYW1lO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBHYW1lO1xuXG4vKioqLyB9LFxuLyogMTcxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBCYW5uZXI7XG5cdFxuXHR2YXIgX1ZlcnNpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Mik7XG5cdFxuXHR2YXIgX1ZlcnNpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVmVyc2lvbik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gQmFubmVyKHRpdGxlLCB1cmwpIHtcblx0XG5cdCAgICB2YXIgbXNnID0gJyVjICVjICVjICVjICVjICAnO1xuXHRcblx0ICAgIGlmICh0aXRsZSkge1xuXHQgICAgICAgIG1zZyA9IG1zZy5jb25jYXQodGl0bGUgKyAnIHBvd2VyZWQgYnkgJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgbXNnID0gbXNnLmNvbmNhdCgnTGF6ZXIgdicgKyBfVmVyc2lvbjIuZGVmYXVsdC5tYWpvciArICcuJyArIF9WZXJzaW9uMi5kZWZhdWx0Lm1pbm9yKTtcblx0XG5cdCAgICBpZiAodXJsID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBtc2cgPSBtc2cuY29uY2F0KCcgLSBodHRwczovL2xhemVyanMuaW8nKTtcblx0ICAgIH0gZWxzZSBpZiAodXJsICE9PSAnJykge1xuXHQgICAgICAgIG1zZyA9IG1zZy5jb25jYXQoJyAtICcgKyB1cmwpO1xuXHQgICAgfVxuXHRcblx0ICAgIG1zZyA9IG1zZy5jb25jYXQoJyAgJyk7XG5cdFxuXHQgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgW21zZywgJ2JhY2tncm91bmQ6ICNmZjAwMDAnLCAnYmFja2dyb3VuZDogI2ZmZmYwMCcsICdiYWNrZ3JvdW5kOiAjMDBmZjAwJywgJ2JhY2tncm91bmQ6ICMwMGZmZmYnLCAnY29sb3I6ICNmZmZmZmY7IGJhY2tncm91bmQ6ICMwMDA7J10pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxNzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdHZhciBWZXJzaW9uID0ge1xuXHQgICAgbWFqb3I6IDEsXG5cdCAgICBtaW5vcjogMixcblx0ICAgIHBvaW50OiAzLFxuXHQgICAgYnVpbGQ6IDEsXG5cdCAgICBkYXRlOiAnMTJ0aCBKYW51YXJ5IDIwMTYnXG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBWZXJzaW9uO1xuXG4vKioqLyB9LFxuLyogMTczICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgICAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX1JlcXVlc3RBbmltYXRpb25GcmFtZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU2KTtcblx0XG5cdHZhciBfUmVxdWVzdEFuaW1hdGlvbkZyYW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1JlcXVlc3RBbmltYXRpb25GcmFtZSk7XG5cdFxuXHR2YXIgX05PT1AgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nyk7XG5cdFxuXHR2YXIgX05PT1AyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTk9PUCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdC8vICBNeSB0aGFua3MgdG8gSXNhYWMgU3VraW4gZm9yIHNvbWUgb2YgdGhlIGNvbmNlcHRzIHVzZWQgaW4gdGhpcyBjbGFzc1xuXHRcblx0dmFyIE1haW5Mb29wID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGZ1bmN0aW9uIE1haW5Mb29wKCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIGZyYW1lcmF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IDYwIDogYXJndW1lbnRzWzBdO1xuXHRcblx0ICAgICAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNYWluTG9vcCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gIE1vdmUgdG8gZXh0ZXJuYWwgZmlsZSBvbmNlIHRlc3RlZFxuXHQgICAgICAgICAgICAgICAgdGhpcy5nZXRUaW1lID0gRGF0ZS5ub3c7XG5cdFxuXHQgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5wZXJmb3JtYW5jZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LnBlcmZvcm1hbmNlLm5vdykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGltZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cucGVyZm9ybWFuY2Uud2Via2l0Tm93KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUaW1lID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5wZXJmb3JtYW5jZS53ZWJraXROb3coKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgdGhpcy50aW1lc3RlcCA9IDEwMDAgLyBmcmFtZXJhdGU7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnBoeXNpY3NTdGVwID0gMSAvIGZyYW1lcmF0ZTtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBUaGUgY3VtdWxhdGl2ZSBhbW91bnQgb2YgaW4tYXBwIHRpbWUgdGhhdCBoYXNuJ3QgYmVlbiBzaW11bGF0ZWQgeWV0LlxuXHQgICAgICAgICAgICAgICAgLy8gU2VlIHRoZSBjb21tZW50cyBpbnNpZGUgYW5pbWF0ZSgpIGZvciBkZXRhaWxzLlxuXHQgICAgICAgICAgICAgICAgdGhpcy5mcmFtZURlbHRhID0gMDtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBUaGUgdGltZXN0YW1wIGluIG1pbGxpc2Vjb25kcyBvZiB0aGUgbGFzdCB0aW1lIHRoZSBtYWluIGxvb3Agd2FzIHJ1bi5cblx0ICAgICAgICAgICAgICAgIC8vIFVzZWQgdG8gY29tcHV0ZSB0aGUgdGltZSBlbGFwc2VkIGJldHdlZW4gZnJhbWVzLlxuXHQgICAgICAgICAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lTXMgPSAwO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIEFuIGV4cG9uZW50aWFsIG1vdmluZyBhdmVyYWdlIG9mIHRoZSBmcmFtZXMgcGVyIHNlY29uZC5cblx0ICAgICAgICAgICAgICAgIHRoaXMuZnBzID0gNjA7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gVGhlIHRpbWVzdGFtcCAoaW4gbWlsbGlzZWNvbmRzKSBvZiB0aGUgbGFzdCB0aW1lIHRoZSBgZnBzYCBtb3Zpbmdcblx0ICAgICAgICAgICAgICAgIC8vIGF2ZXJhZ2Ugd2FzIHVwZGF0ZWQuXG5cdCAgICAgICAgICAgICAgICB0aGlzLmxhc3RGcHNVcGRhdGUgPSAwO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIFRoZSBudW1iZXIgb2YgZnJhbWVzIGRlbGl2ZXJlZCBpbiB0aGUgY3VycmVudCBzZWNvbmQuXG5cdCAgICAgICAgICAgICAgICB0aGlzLmZyYW1lc1RoaXNTZWNvbmQgPSAwO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIFRoZSBudW1iZXIgb2YgdGltZXMgdXBkYXRlKCkgaXMgY2FsbGVkIGluIGEgZ2l2ZW4gZnJhbWUuIFRoaXMgaXMgb25seVxuXHQgICAgICAgICAgICAgICAgLy8gcmVsZXZhbnQgaW5zaWRlIG9mIGFuaW1hdGUoKSwgYnV0IGEgcmVmZXJlbmNlIGlzIGhlbGQgZXh0ZXJuYWxseSBzbyB0aGF0XG5cdCAgICAgICAgICAgICAgICAvLyB0aGlzIHZhcmlhYmxlIGlzIG5vdCBtYXJrZWQgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbiBldmVyeSB0aW1lIHRoZSBtYWluXG5cdCAgICAgICAgICAgICAgICAvLyBsb29wIHJ1bnMuXG5cdCAgICAgICAgICAgICAgICB0aGlzLm51bVVwZGF0ZVN0ZXBzID0gMDtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBUaGUgbWluaW11bSBhbW91bnQgb2YgdGltZSBpbiBtaWxsaXNlY29uZHMgdGhhdCBtdXN0IHBhc3Mgc2luY2UgdGhlIGxhc3Rcblx0ICAgICAgICAgICAgICAgIC8vIGZyYW1lIHdhcyBleGVjdXRlZCBiZWZvcmUgYW5vdGhlciBmcmFtZSBjYW4gYmUgZXhlY3V0ZWQuIFRoZVxuXHQgICAgICAgICAgICAgICAgLy8gbXVsdGlwbGljYXRpdmUgaW52ZXJzZSBjYXBzIHRoZSBGUFMgKHRoZSBkZWZhdWx0IG9mIHplcm8gbWVhbnMgdGhlcmUgaXNcblx0ICAgICAgICAgICAgICAgIC8vIG5vIGNhcCkuXG5cdCAgICAgICAgICAgICAgICB0aGlzLm1pbkZyYW1lRGVsYXkgPSAwO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vIFdoZXRoZXIgdGhlIG1haW4gbG9vcCBpcyBydW5uaW5nLlxuXHQgICAgICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gYHRydWVgIGlmIGBNYWluTG9vcC5zdGFydCgpYCBoYXMgYmVlbiBjYWxsZWQgYW5kIHRoZSBtb3N0IHJlY2VudCB0aW1lIGl0XG5cdCAgICAgICAgICAgICAgICAvLyB3YXMgY2FsbGVkIGhhcyBub3QgYmVlbiBmb2xsb3dlZCBieSBhIGNhbGwgdG8gYE1haW5Mb29wLnN0b3AoKWAuIFRoaXMgaXNcblx0ICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVudCB0aGFuIGBydW5uaW5nYCBiZWNhdXNlIHRoZXJlIGlzIGEgZGVsYXkgb2YgYSBmZXcgbWlsbGlzZWNvbmRzXG5cdCAgICAgICAgICAgICAgICAvLyBhZnRlciBgTWFpbkxvb3Auc3RhcnQoKWAgaXMgY2FsbGVkIGJlZm9yZSB0aGUgYXBwbGljYXRpb24gaXMgY29uc2lkZXJlZFxuXHQgICAgICAgICAgICAgICAgLy8gXCJydW5uaW5nLlwiIFRoaXMgZGVsYXkgaXMgZHVlIHRvIHdhaXRpbmcgZm9yIHRoZSBuZXh0IGZyYW1lLlxuXHQgICAgICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gV2hldGhlciB0aGUgc2ltdWxhdGlvbiBoYXMgZmFsbGVuIHRvbyBmYXIgYmVoaW5kIHJlYWwgdGltZS5cblx0ICAgICAgICAgICAgICAgIC8vIFNwZWNpZmljYWxseSwgYHBhbmljYCB3aWxsIGJlIHNldCB0byBgdHJ1ZWAgaWYgdG9vIG1hbnkgdXBkYXRlcyBvY2N1ciBpblxuXHQgICAgICAgICAgICAgICAgLy8gb25lIGZyYW1lLiBUaGlzIGlzIG9ubHkgcmVsZXZhbnQgaW5zaWRlIG9mIGFuaW1hdGUoKSwgYnV0IGEgcmVmZXJlbmNlIGlzXG5cdCAgICAgICAgICAgICAgICAvLyBoZWxkIGV4dGVybmFsbHkgc28gdGhhdCB0aGlzIHZhcmlhYmxlIGlzIG5vdCBtYXJrZWQgZm9yIGdhcmJhZ2Vcblx0ICAgICAgICAgICAgICAgIC8vIGNvbGxlY3Rpb24gZXZlcnkgdGltZSB0aGUgbWFpbiBsb29wIHJ1bnMuXG5cdCAgICAgICAgICAgICAgICB0aGlzLnBhbmljID0gZmFsc2U7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gQSBmdW5jdGlvbiB0aGF0IHJ1bnMgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgbWFpbiBsb29wLlxuXHQgICAgICAgICAgICAgICAgLy8gU2VlIGBNYWluTG9vcC5zZXRCZWdpbigpYCBmb3IgZGV0YWlscy5cblx0ICAgICAgICAgICAgICAgIHRoaXMuYmVnaW4gPSBfTk9PUDIuZGVmYXVsdDtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBBIGZ1bmN0aW9uIHRoYXQgcnVucyB1cGRhdGVzIChpLmUuIEFJIGFuZCBwaHlzaWNzKS5cblx0ICAgICAgICAgICAgICAgIC8vIFNlZSBgTWFpbkxvb3Auc2V0VXBkYXRlKClgIGZvciBkZXRhaWxzLlxuXHQgICAgICAgICAgICAgICAgdGhpcy51cGRhdGUgPSBfTk9PUDIuZGVmYXVsdDtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBBIGZ1bmN0aW9uIHRoYXQgZHJhd3MgdGhpbmdzIG9uIHRoZSBzY3JlZW4uXG5cdCAgICAgICAgICAgICAgICAvLyBTZWUgYE1haW5Mb29wLnNldERyYXcoKWAgZm9yIGRldGFpbHMuXG5cdCAgICAgICAgICAgICAgICB0aGlzLmRyYXcgPSBfTk9PUDIuZGVmYXVsdDtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyBBIGZ1bmN0aW9uIHRoYXQgcnVucyBhdCB0aGUgZW5kIG9mIHRoZSBtYWluIGxvb3AuXG5cdCAgICAgICAgICAgICAgICAvLyBTZWUgYE1haW5Mb29wLnNldEVuZCgpYCBmb3IgZGV0YWlscy5cblx0ICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gX05PT1AyLmRlZmF1bHQ7XG5cdFxuXHQgICAgICAgICAgICAgICAgdGhpcy5yYWYgPSBuZXcgX1JlcXVlc3RBbmltYXRpb25GcmFtZTIuZGVmYXVsdCh3aW5kb3csIGZhbHNlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhNYWluTG9vcCwgW3tcblx0ICAgICAgICAgICAgICAgIGtleTogJ3Jlc2V0RnJhbWVEZWx0YScsXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXRGcmFtZURlbHRhKCkge1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZEZyYW1lRGVsdGEgPSB0aGlzLmZyYW1lRGVsdGE7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lRGVsdGEgPSAwO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9sZEZyYW1lRGVsdGE7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAga2V5OiAnc3RhcnQnLFxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lTXMgPSB0aGlzLmdldFRpbWUoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0RnBzVXBkYXRlID0gdGhpcy5nZXRUaW1lKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVzVGhpc1NlY29uZCA9IDA7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyAgVGhpcyBzdGFydHMgUkFGIGdvaW5nIGF1dG9tYXRpY2FsbHlcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yYWYuc3RhcnQoZnVuY3Rpb24gKG5vdykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zdGVwKG5vdyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgICAgIGtleTogJ3N0ZXAnLFxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0ZXAodGltZXN0YW1wKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aW1lc3RhbXApO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWJ1Z2dlcjtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRocm90dGxlIHRoZSBmcmFtZSByYXRlIChpZiBtaW5GcmFtZURlbGF5IGlzIHNldCB0byBhIG5vbi16ZXJvIHZhbHVlIGJ5XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIGBNYWluTG9vcC5zZXRNYXhBbGxvd2VkRlBTKClgKS5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCA8IHRoaXMubGFzdEZyYW1lVGltZU1zICsgdGhpcy5taW5GcmFtZURlbGF5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUnVuIHRoZSBsb29wIGFnYWluIHRoZSBuZXh0IHRpbWUgdGhlIGJyb3dzZXIgaXMgcmVhZHkgdG8gcmVuZGVyLlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJhZkhhbmRsZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyYW1lRGVsdGEgaXMgdGhlIGN1bXVsYXRpdmUgYW1vdW50IG9mIGluLWFwcCB0aW1lIHRoYXQgaGFzbid0IGJlZW5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2ltdWxhdGVkIHlldC4gQWRkIHRoZSB0aW1lIHNpbmNlIHRoZSBsYXN0IGZyYW1lLiBXZSBuZWVkIHRvIHRyYWNrIHRvdGFsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdC15ZXQtc2ltdWxhdGVkIHRpbWUgKGFzIG9wcG9zZWQgdG8ganVzdCB0aGUgdGltZSBlbGFwc2VkIHNpbmNlIHRoZVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBsYXN0IGZyYW1lKSBiZWNhdXNlIG5vdCBhbGwgYWN0dWFsbHkgZWxhcHNlZCB0aW1lIGlzIGd1YXJhbnRlZWQgdG8gYmVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2ltdWxhdGVkIGVhY2ggZnJhbWUuIFNlZSB0aGUgY29tbWVudHMgYmVsb3cgZm9yIGRldGFpbHMuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVEZWx0YSArPSB0aW1lc3RhbXAgLSB0aGlzLmxhc3RGcmFtZVRpbWVNcztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lTXMgPSB0aW1lc3RhbXA7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBSdW4gYW55IHVwZGF0ZXMgdGhhdCBhcmUgbm90IGRlcGVuZGVudCBvbiB0aW1lIGluIHRoZSBzaW11bGF0aW9uLiBTZWVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gYE1haW5Mb29wLnNldEJlZ2luKClgIGZvciBhZGRpdGlvbmFsIGRldGFpbHMgb24gaG93IHRvIHVzZSB0aGlzLlxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJlZ2luKHRpbWVzdGFtcCwgdGhpcy5mcmFtZURlbHRhKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5iZWdpbih0aGlzLmZyYW1lRGVsdGEpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBlc3RpbWF0ZSBvZiB0aGUgZnJhbWUgcmF0ZSwgYGZwc2AuIEV2ZXJ5IHNlY29uZCwgdGhlIG51bWJlclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBvZiBmcmFtZXMgdGhhdCBvY2N1cnJlZCBpbiB0aGF0IHNlY29uZCBhcmUgaW5jbHVkZWQgaW4gYW4gZXhwb25lbnRpYWxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gbW92aW5nIGF2ZXJhZ2Ugb2YgYWxsIGZyYW1lcyBwZXIgc2Vjb25kLCB3aXRoIGFuIGFscGhhIG9mIDAuMjUuIFRoaXNcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVhbnMgdGhhdCBtb3JlIHJlY2VudCBzZWNvbmRzIGFmZmVjdCB0aGUgZXN0aW1hdGVkIGZyYW1lIHJhdGUgbW9yZSB0aGFuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9sZGVyIHNlY29uZHMuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPiB0aGlzLmxhc3RGcHNVcGRhdGUgKyAxMDAwKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHV0ZSB0aGUgbmV3IGV4cG9uZW50aWFsIG1vdmluZyBhdmVyYWdlIHdpdGggYW4gYWxwaGEgb2YgMC4yNS5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2luZyBjb25zdGFudHMgaW5saW5lIGlzIG9rYXkgaGVyZS5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZwcyA9IDAuMjUgKiB0aGlzLmZyYW1lc1RoaXNTZWNvbmQgKyAwLjc1ICogdGhpcy5mcHM7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdEZwc1VwZGF0ZSA9IHRpbWVzdGFtcDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lc1RoaXNTZWNvbmQgPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lc1RoaXNTZWNvbmQrKztcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubnVtVXBkYXRlU3RlcHMgPSAwO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuZnJhbWVEZWx0YSA+PSB0aGlzLnRpbWVzdGVwKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy50aW1lc3RlcCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVEZWx0YSAtPSB0aGlzLnRpbWVzdGVwO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKyt0aGlzLm51bVVwZGF0ZVN0ZXBzID49IDI0MCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYW5pYyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdyh0aGlzLmZyYW1lRGVsdGEgLyB0aGlzLnRpbWVzdGVwKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJ1biBhbnkgdXBkYXRlcyB0aGF0IGFyZSBub3QgZGVwZW5kZW50IG9uIHRpbWUgaW4gdGhlIHNpbXVsYXRpb24uIFNlZVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBgTWFpbkxvb3Auc2V0RW5kKClgIGZvciBhZGRpdGlvbmFsIGRldGFpbHMgb24gaG93IHRvIHVzZSB0aGlzLlxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZCh0aGlzLmZwcywgdGhpcy5wYW5pYyk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhbmljID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgICAgICAga2V5OiAnc3RvcCcsXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcCgpIHtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmFmLnN0b3AoKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgICAgIGtleTogJ21heEZQUycsXG5cdCAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxMDAwIC8gdGhpcy5taW5GcmFtZURlbGF5O1xuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnBzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gSW5maW5pdHkgOiBhcmd1bWVudHNbMF07XG5cdFxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZwcyA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWluRnJhbWVEZWxheSA9IDEwMDAgLyBmcHM7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICBrZXk6ICdpc1J1bm5pbmcnLFxuXHQgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ydW5uaW5nO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgIH1dKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIE1haW5Mb29wO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBNYWluTG9vcDtcblxuLyoqKi8gfSxcbi8qIDE3NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX0Jhc2VMb2FkZXIyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzUpO1xuXHRcblx0dmFyIF9CYXNlTG9hZGVyMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Jhc2VMb2FkZXIyKTtcblx0XG5cdHZhciBfSW1hZ2VGaWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODApO1xuXHRcblx0dmFyIF9JbWFnZUZpbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSW1hZ2VGaWxlKTtcblx0XG5cdHZhciBfSlNPTkZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MSk7XG5cdFxuXHR2YXIgX0pTT05GaWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0pTT05GaWxlKTtcblx0XG5cdHZhciBfWE1MRmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgyKTtcblx0XG5cdHZhciBfWE1MRmlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9YTUxGaWxlKTtcblx0XG5cdHZhciBfVGV4dEZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4NCk7XG5cdFxuXHR2YXIgX1RleHRGaWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RleHRGaWxlKTtcblx0XG5cdHZhciBfR0xTTEZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4NSk7XG5cdFxuXHR2YXIgX0dMU0xGaWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0dMU0xGaWxlKTtcblx0XG5cdHZhciBfQmluYXJ5RmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTg2KTtcblx0XG5cdHZhciBfQmluYXJ5RmlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9CaW5hcnlGaWxlKTtcblx0XG5cdHZhciBfQXRsYXNKU09ORmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTg3KTtcblx0XG5cdHZhciBfQXRsYXNKU09ORmlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BdGxhc0pTT05GaWxlKTtcblx0XG5cdHZhciBfQXRsYXNYTUxGaWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODkpO1xuXHRcblx0dmFyIF9BdGxhc1hNTEZpbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXRsYXNYTUxGaWxlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdC8vICBUaGlzIGlzIG91ciBQaGFzZXItbGlrZSBMb2FkZXIgY2xhc3MuIFlvdSBkb24ndCBoYXZlIHRvIHVzZSBpdCA6KVxuXHRcblx0dmFyIExvYWRlciA9IGZ1bmN0aW9uIChfQmFzZUxvYWRlcikge1xuXHQgICAgX2luaGVyaXRzKExvYWRlciwgX0Jhc2VMb2FkZXIpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIExvYWRlcigpIHtcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9hZGVyKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihMb2FkZXIpLmNhbGwodGhpcykpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhMb2FkZXIsIFt7XG5cdCAgICAgICAga2V5OiAnaW1hZ2UnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbWFnZShrZXkpIHtcblx0ICAgICAgICAgICAgdmFyIHVybCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/ICcnIDogYXJndW1lbnRzWzFdO1xuXHRcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZEZpbGUoKDAsIF9JbWFnZUZpbGUyLmRlZmF1bHQpKGtleSwgdXJsKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2ltYWdlcycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGltYWdlcyhrZXlzKSB7XG5cdCAgICAgICAgICAgIHZhciB1cmxzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGFyZ3VtZW50c1sxXTtcblx0XG5cdFxuXHQgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh1cmxzKSkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZShrZXlzW2ldLCB1cmxzW2ldKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBrZXlzLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uoa2V5c1tfaV0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnanNvbicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGpzb24oa2V5KSB7XG5cdCAgICAgICAgICAgIHZhciB1cmwgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1sxXTtcblx0XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRGaWxlKCgwLCBfSlNPTkZpbGUyLmRlZmF1bHQpKGtleSwgdXJsKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3RleHQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0ZXh0KGtleSkge1xuXHQgICAgICAgICAgICB2YXIgdXJsID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMV07XG5cdFxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkRmlsZSgoMCwgX1RleHRGaWxlMi5kZWZhdWx0KShrZXksIHVybCkpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdnbHNsJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2xzbChrZXkpIHtcblx0ICAgICAgICAgICAgdmFyIHVybCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/ICcnIDogYXJndW1lbnRzWzFdO1xuXHRcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZEZpbGUoKDAsIF9HTFNMRmlsZTIuZGVmYXVsdCkoa2V5LCB1cmwpKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnc2hhZGVyJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2hhZGVyKGtleSkge1xuXHQgICAgICAgICAgICB2YXIgdXJsID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMV07XG5cdFxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkRmlsZSgoMCwgX0dMU0xGaWxlMi5kZWZhdWx0KShrZXksIHVybCkpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICd4bWwnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB4bWwoa2V5KSB7XG5cdCAgICAgICAgICAgIHZhciB1cmwgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1sxXTtcblx0XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRGaWxlKCgwLCBfWE1MRmlsZTIuZGVmYXVsdCkoa2V5LCB1cmwpKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnYmluYXJ5Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmluYXJ5KGtleSkge1xuXHQgICAgICAgICAgICB2YXIgdXJsID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMV07XG5cdCAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1syXTtcblx0XG5cdFxuXHQgICAgICAgICAgICB2YXIgZmlsZSA9ICgwLCBfQmluYXJ5RmlsZTIuZGVmYXVsdCkoa2V5LCB1cmwpO1xuXHRcblx0ICAgICAgICAgICAgZmlsZS5wcm9jZXNzQ2FsbGJhY2sgPSBjYWxsYmFjaztcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZEZpbGUoZmlsZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2F0bGFzJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYXRsYXMoa2V5KSB7XG5cdCAgICAgICAgICAgIHZhciB0ZXh0dXJlVVJMID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMV07XG5cdCAgICAgICAgICAgIHZhciBhdGxhc1VSTCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/ICcnIDogYXJndW1lbnRzWzJdO1xuXHQgICAgICAgICAgICB2YXIgYXRsYXNEYXRhID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzNdO1xuXHRcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZEZpbGUoKDAsIF9BdGxhc0pTT05GaWxlMi5kZWZhdWx0KShrZXksIHRleHR1cmVVUkwsIGF0bGFzVVJMLCBhdGxhc0RhdGEpKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnYXRsYXNYTUwnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhdGxhc1hNTChrZXkpIHtcblx0ICAgICAgICAgICAgdmFyIHRleHR1cmVVUkwgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1sxXTtcblx0ICAgICAgICAgICAgdmFyIGF0bGFzVVJMID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMl07XG5cdCAgICAgICAgICAgIHZhciBhdGxhc0RhdGEgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbM107XG5cdFxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkRmlsZSgoMCwgX0F0bGFzWE1MRmlsZTIuZGVmYXVsdCkoa2V5LCB0ZXh0dXJlVVJMLCBhdGxhc1VSTCwgYXRsYXNEYXRhKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBMb2FkZXI7XG5cdH0oX0Jhc2VMb2FkZXIzLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gTG9hZGVyO1xuXG4vKioqLyB9LFxuLyogMTc1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkRFU1RST1lFRCA9IGV4cG9ydHMuRkFJTEVEID0gZXhwb3J0cy5DT01QTEVURSA9IGV4cG9ydHMuUFJPQ0VTU0lORyA9IGV4cG9ydHMuTE9BRElORyA9IGV4cG9ydHMuUEVORElORyA9IHVuZGVmaW5lZDtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX1hIUlNldHRpbmdzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzYpO1xuXHRcblx0dmFyIF9YSFJTZXR0aW5nczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9YSFJTZXR0aW5ncyk7XG5cdFxuXHR2YXIgX0ZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nyk7XG5cdFxuXHR2YXIgRklMRSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9GaWxlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBQRU5ESU5HID0gZXhwb3J0cy5QRU5ESU5HID0gMDtcblx0dmFyIExPQURJTkcgPSBleHBvcnRzLkxPQURJTkcgPSAxO1xuXHR2YXIgUFJPQ0VTU0lORyA9IGV4cG9ydHMuUFJPQ0VTU0lORyA9IDI7XG5cdHZhciBDT01QTEVURSA9IGV4cG9ydHMuQ09NUExFVEUgPSAzO1xuXHR2YXIgRkFJTEVEID0gZXhwb3J0cy5GQUlMRUQgPSA0O1xuXHR2YXIgREVTVFJPWUVEID0gZXhwb3J0cy5ERVNUUk9ZRUQgPSA1O1xuXHRcblx0dmFyIEJhc2VMb2FkZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBCYXNlTG9hZGVyKCkge1xuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCYXNlTG9hZGVyKTtcblx0XG5cdCAgICAgICAgdGhpcy5iYXNlVVJMID0gJyc7XG5cdFxuXHQgICAgICAgIHRoaXMucGF0aCA9ICcnO1xuXHRcblx0ICAgICAgICB0aGlzLnRhZyA9ICcnO1xuXHRcblx0ICAgICAgICB0aGlzLmVuYWJsZVBhcmFsbGVsID0gdHJ1ZTtcblx0XG5cdCAgICAgICAgdGhpcy5tYXhQYXJhbGxlbERvd25sb2FkcyA9IDQ7XG5cdFxuXHQgICAgICAgIC8vICB4aHIgc3BlY2lmaWMgZ2xvYmFsIHNldHRpbmdzIChjYW4gYmUgb3ZlcnJpZGRlbiBvbiBhIHBlci1maWxlIGJhc2lzKVxuXHQgICAgICAgIHRoaXMueGhyID0gKDAsIF9YSFJTZXR0aW5nczIuZGVmYXVsdCkoKTtcblx0XG5cdCAgICAgICAgdGhpcy5jcm9zc09yaWdpbiA9IHVuZGVmaW5lZDtcblx0XG5cdCAgICAgICAgdGhpcy5saXN0ID0gbmV3IFNldCgpO1xuXHQgICAgICAgIHRoaXMuaW5mbGlnaHQgPSBuZXcgU2V0KCk7XG5cdCAgICAgICAgdGhpcy5mYWlsZWQgPSBuZXcgU2V0KCk7XG5cdCAgICAgICAgdGhpcy5xdWV1ZSA9IG5ldyBTZXQoKTtcblx0ICAgICAgICB0aGlzLnN0b3JhZ2UgPSBuZXcgU2V0KCk7XG5cdFxuXHQgICAgICAgIHRoaXMuX3N0YXRlID0gUEVORElORztcblx0ICAgICAgICB0aGlzLl9yZXNvbHZlID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuX3JlamVjdCA9IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoQmFzZUxvYWRlciwgW3tcblx0ICAgICAgICBrZXk6ICdzdGFydEZpbGVHcm91cCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0RmlsZUdyb3VwKG5hbWUpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXMudGFnID0gbmFtZTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnc3RvcEZpbGVHcm91cCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3BGaWxlR3JvdXAoKSB7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLnRhZyA9ICcnO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdhZGRGaWxlJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkRmlsZShmaWxlKSB7XG5cdFxuXHQgICAgICAgICAgICBpZiAoIXRoaXMuaXNSZWFkeSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAvLyAgTXVsdGlwYXJ0IGZpbGU/XG5cdCAgICAgICAgICAgIGlmIChmaWxlLm11bHRpcGFydCkge1xuXHQgICAgICAgICAgICAgICAgZmlsZS5maWxlQS5wYXRoID0gdGhpcy5wYXRoO1xuXHQgICAgICAgICAgICAgICAgZmlsZS5maWxlQi5wYXRoID0gdGhpcy5wYXRoO1xuXHRcblx0ICAgICAgICAgICAgICAgIGZpbGUuZmlsZUEudGFnID0gdGhpcy50YWc7XG5cdCAgICAgICAgICAgICAgICBmaWxlLmZpbGVCLnRhZyA9IHRoaXMudGFnO1xuXHRcblx0ICAgICAgICAgICAgICAgIHRoaXMubGlzdC5hZGQoZmlsZS5maWxlQSk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmxpc3QuYWRkKGZpbGUuZmlsZUIpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgZmlsZS5wYXRoID0gdGhpcy5wYXRoO1xuXHQgICAgICAgICAgICAgICAgZmlsZS50YWcgPSB0aGlzLnRhZztcblx0XG5cdCAgICAgICAgICAgICAgICB0aGlzLmxpc3QuYWRkKGZpbGUpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vICBXaGVuIHRoaXMgZmlsZSBsb2FkcyB3ZSBuZWVkIHRvIGNhbGwgJ3Jlc29sdmUnXG5cdCAgICAgICAgICAgICAgICBmaWxlLnJlc29sdmUgPSByZXNvbHZlO1xuXHQgICAgICAgICAgICAgICAgZmlsZS5yZWplY3QgPSByZWplY3Q7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdzdGFydCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KCkge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0Jhc2VMb2FkZXIgc3RhcnQuIEZpbGVzIHRvIGxvYWQ6JywgdGhpcy5saXN0LnNpemUpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKCF0aGlzLmlzUmVhZHkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgaWYgKHRoaXMubGlzdC5zaXplID09PSAwKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmZpbmlzaGVkTG9hZGluZygpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IExPQURJTkc7XG5cdFxuXHQgICAgICAgICAgICAgICAgdGhpcy5mYWlsZWQuY2xlYXIoKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMuaW5mbGlnaHQuY2xlYXIoKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMucXVldWUuY2xlYXIoKTtcblx0XG5cdCAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzKCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzTG9hZFF1ZXVlKCk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICBfdGhpcy5fcmVzb2x2ZSA9IHJlc29sdmU7XG5cdCAgICAgICAgICAgICAgICBfdGhpcy5fcmVqZWN0ID0gcmVqZWN0O1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAndXBkYXRlUHJvZ3Jlc3MnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcygpIHtcblx0XG5cdCAgICAgICAgICAgIC8vICBUT0RPXG5cdFxuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdwcm9jZXNzTG9hZFF1ZXVlJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc0xvYWRRdWV1ZSgpIHtcblx0XG5cdCAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdCYXNlTG9hZGVyIHByb2Nlc3NMb2FkUXVldWUnLCB0aGlzLmxpc3Quc2l6ZSk7XG5cdFxuXHQgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG5cdCAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuXHQgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cdFxuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdGhpcy5saXN0W1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gX3N0ZXAudmFsdWU7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlLnN0YXRlID09PSBGSUxFLlBFTkRJTkcgJiYgdGhpcy5pbmZsaWdodC5zaXplIDwgdGhpcy5tYXhQYXJhbGxlbERvd25sb2Fkcykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnQURERUQgVE8gUVVFVUU6JywgZmlsZS5zcmMpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZsaWdodC5hZGQoZmlsZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3QuZGVsZXRlKGZpbGUpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRmlsZShmaWxlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmluZmxpZ2h0LnNpemUgPT09IHRoaXMubWF4UGFyYWxsZWxEb3dubG9hZHMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuXHQgICAgICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyAgcHJpdmF0ZVxuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdsb2FkRmlsZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRGaWxlKGZpbGUpIHtcblx0ICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICAgICAgICBmaWxlLnNyYyA9IHRoaXMuZ2V0VVJMKGZpbGUpO1xuXHRcblx0ICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0xPQURJTkcnLCBmaWxlLnNyYyk7XG5cdFxuXHQgICAgICAgICAgICAvLyAgSWYgdGhlIGZpbGUgZG9lc24ndCBoYXZlIGl0cyBvd24gY3Jvc3NPcmlnaW4gc2V0LCB3ZSdsbCB1c2UgdGhlIExvYWRlcnMgKHdoaWNoIGlzIHVuZGVmaW5lZCBieSBkZWZhdWx0KVxuXHQgICAgICAgICAgICBpZiAoZmlsZS5jcm9zc09yaWdpbiA9PT0gdW5kZWZpbmVkICYmIHRoaXMuY3Jvc3NPcmlnaW4pIHtcblx0ICAgICAgICAgICAgICAgIGZpbGUuY3Jvc3NPcmlnaW4gPSB0aGlzLmNyb3NzT3JpZ2luO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAvLyAgVGhlIGFyZ3VtZW50IGlzIGFuIFhIUlNldHRpbmdzIG9iamVjdFxuXHQgICAgICAgICAgICBmaWxlLmxvYWQodGhpcy54aHIpLnRoZW4oZnVuY3Rpb24gKGZpbGUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIubmV4dEZpbGUoZmlsZSwgdHJ1ZSk7XG5cdCAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChmaWxlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLm5leHRGaWxlKGZpbGUsIGZhbHNlKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ25leHRGaWxlJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dEZpbGUocHJldmlvdXNGaWxlLCBzdWNjZXNzKSB7XG5cdFxuXHQgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnTE9BREVEOicsIHByZXZpb3VzRmlsZS5zcmMsIHN1Y2Nlc3MpO1xuXHRcblx0ICAgICAgICAgICAgLy8gIE1vdmUgdGhlIGZpbGUgdGhhdCBqdXN0IGxvYWRlZCBmcm9tIHRoZSBpbmZsaWdodCBsaXN0IHRvIHRoZSBxdWV1ZSBvciBmYWlsZWQgU2V0XG5cdFxuXHQgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQocHJldmlvdXNGaWxlKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZmFpbGVkLmFkZChwcmV2aW91c0ZpbGUpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICB0aGlzLmluZmxpZ2h0LmRlbGV0ZShwcmV2aW91c0ZpbGUpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKHRoaXMubGlzdC5zaXplID4gMCkge1xuXHQgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ25leHRGaWxlIC0gc3RpbGwgc29tZXRoaW5nIGluIHRoZSBsaXN0Jyk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NMb2FkUXVldWUoKTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmluZmxpZ2h0LnNpemUgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCduZXh0RmlsZSBjYWxsaW5nIGZpbmlzaGVkTG9hZGluZycpO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5maW5pc2hlZExvYWRpbmcoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdnZXRVUkwnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVUkwoZmlsZSkge1xuXHRcblx0ICAgICAgICAgICAgaWYgKCFmaWxlLnVybCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBpZiAoZmlsZS51cmwubWF0Y2goL14oPzpibG9iOnxkYXRhOnxodHRwOlxcL1xcL3xodHRwczpcXC9cXC98XFwvXFwvKS8pKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZmlsZS51cmw7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5iYXNlVVJMICsgZmlsZS5wYXRoICsgZmlsZS51cmw7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnZmluaXNoZWRMb2FkaW5nJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmluaXNoZWRMb2FkaW5nKCkge1xuXHRcblx0ICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0Jhc2VMb2FkZXIuZmluaXNoZWRMb2FkaW5nIFBST0NFU1NJTkcnKTtcblx0XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBQUk9DRVNTSU5HO1xuXHRcblx0ICAgICAgICAgICAgdGhpcy5zdG9yYWdlLmNsZWFyKCk7XG5cdFxuXHQgICAgICAgICAgICAvLyAgVGhpcyBjb3VsZCBiZSBQcm9taXNlIGJhc2VkIGFzIHdlbGwsIGFsbG93aW5nIGZvciBhc3luYyBwcm9jZXNzaW5nXG5cdCAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG5cdCAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblx0XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gdGhpcy5xdWV1ZVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IChfc3RlcDIgPSBfaXRlcmF0b3IyLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gX3N0ZXAyLnZhbHVlO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICBmaWxlLm9uUHJvY2VzcygpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAvLyAgVGhlIEZpbGUgc3BlY2lmaWMgcHJvY2VzcyBoYW5kbGVyIGhhcyBydW5cblx0ICAgICAgICAgICAgICAgICAgICAvLyAgTm93IHJ1biBhbnkgY3VzdG9tIGNhbGxiYWNrc1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlLnByb2Nlc3NDYWxsYmFjaykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnByb2Nlc3NDYWxsYmFjayhmaWxlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGZpbGUub25Db21wbGV0ZSgpO1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2UuYWRkKGZpbGUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG5cdCAgICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgdGhpcy5saXN0LmNsZWFyKCk7XG5cdCAgICAgICAgICAgIHRoaXMuaW5mbGlnaHQuY2xlYXIoKTtcblx0ICAgICAgICAgICAgdGhpcy5xdWV1ZS5jbGVhcigpO1xuXHRcblx0ICAgICAgICAgICAgY29uc29sZS5sb2coJ0xvYWRlciBDb21wbGV0ZS4gTG9hZGVkOicsIHRoaXMuc3RvcmFnZS5zaXplLCAnRmFpbGVkOicsIHRoaXMuZmFpbGVkLnNpemUpO1xuXHRcblx0ICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0Jhc2VMb2FkZXIgQ09NUExFVEUnKTtcblx0XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBDT01QTEVURTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnZ2V0TG9hZGVkRmlsZXNCeVR5cGUnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMb2FkZWRGaWxlc0J5VHlwZSh0eXBlKSB7XG5cdCAgICAgICAgICAgIHZhciBncm91cCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/ICcnIDogYXJndW1lbnRzWzFdO1xuXHQgICAgICAgICAgICB2YXIgb3V0cHV0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gW10gOiBhcmd1bWVudHNbMl07XG5cdFxuXHRcblx0ICAgICAgICAgICAgLy8gIFJldHVybiBhbiBhcnJheSBvZiBhbGwgZmlsZXMgdGhhdCBoYXZlIHN0YXRlID0gQ09NUExFVEUgKHdoaWNoIG1lYW5zIGxvYWRlZCArIHByb2Nlc3NlZClcblx0XG5cdCAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWU7XG5cdCAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjMgPSBmYWxzZTtcblx0ICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMyA9IHVuZGVmaW5lZDtcblx0XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0gdGhpcy5zdG9yYWdlW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAzOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gKF9zdGVwMyA9IF9pdGVyYXRvcjMubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBfc3RlcDMudmFsdWU7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlLnN0YXRlID09PSBGSUxFLkNPTVBMRVRFICYmIGZpbGUudGFnID09PSBncm91cCAmJiBmaWxlLnR5cGUgPT09IHR5cGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goZmlsZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjMgPSBlcnI7XG5cdCAgICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgJiYgX2l0ZXJhdG9yMy5yZXR1cm4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5yZXR1cm4oKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IzO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnZ2V0TG9hZGVkRmlsZXMnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMb2FkZWRGaWxlcygpIHtcblx0ICAgICAgICAgICAgdmFyIGdyb3VwID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgICAgIHZhciBvdXRwdXQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBbXSA6IGFyZ3VtZW50c1sxXTtcblx0XG5cdFxuXHQgICAgICAgICAgICAvLyAgUmV0dXJuIGFuIGFycmF5IG9mIGFsbCBmaWxlcyB0aGF0IGhhdmUgc3RhdGUgPSBDT01QTEVURSAod2hpY2ggbWVhbnMgbG9hZGVkICsgcHJvY2Vzc2VkKVxuXHRcblx0ICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZTtcblx0ICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yNCA9IGZhbHNlO1xuXHQgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3I0ID0gdW5kZWZpbmVkO1xuXHRcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjQgPSB0aGlzLnN0b3JhZ2VbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDQ7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSAoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IHRydWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZSA9IF9zdGVwNC52YWx1ZTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUuc3RhdGUgPT09IEZJTEUuQ09NUExFVEUgJiYgZmlsZS50YWcgPT09IGdyb3VwICYmIHR5cGUgIT09ICcnICYmIGZpbGUudHlwZSA9PT0gdHlwZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChmaWxlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3I0ID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yNCA9IGVycjtcblx0ICAgICAgICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCAmJiBfaXRlcmF0b3I0LnJldHVybikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3I0LnJldHVybigpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjQ7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdyZXNldCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0KCkge1xuXHRcblx0ICAgICAgICAgICAgdGhpcy5saXN0LmNsZWFyKCk7XG5cdCAgICAgICAgICAgIHRoaXMuaW5mbGlnaHQuY2xlYXIoKTtcblx0ICAgICAgICAgICAgdGhpcy5mYWlsZWQuY2xlYXIoKTtcblx0ICAgICAgICAgICAgdGhpcy5xdWV1ZS5jbGVhcigpO1xuXHQgICAgICAgICAgICB0aGlzLnN0b3JhZ2UuY2xlYXIoKTtcblx0XG5cdCAgICAgICAgICAgIHRoaXMudGFnID0gJyc7XG5cdCAgICAgICAgICAgIHRoaXMucGF0aCA9ICcnO1xuXHQgICAgICAgICAgICB0aGlzLmJhc2VVUkwgPSAnJztcblx0XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBQRU5ESU5HO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdkZXN0cm95Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IERFU1RST1lFRDtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnc3RhdGUnLFxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcblx0XG5cdCAgICAgICAgICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gdmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gdmFsdWU7XG5cdFxuXHQgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBDT01QTEVURSAmJiB0aGlzLl9yZXNvbHZlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLmdldExvYWRlZEZpbGVzKCksIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gRkFJTEVEICYmIHRoaXMuX3JlamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdCh0aGlzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gIElzIHRoZSBMb2FkZXIgYWN0aXZlbHkgbG9hZGluZyAob3IgcHJvY2Vzc2luZyBsb2FkZWQgZmlsZXMpXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2lzTG9hZGluZycsXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGUgPT09IExPQURJTkcgfHwgdGhpcy5fc3RhdGUgPT09IFBST0NFU1NJTkc7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyAgSXMgdGhlIExvYWRlciByZWFkeSB0byBzdGFydCBhIG5ldyBsb2FkP1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdpc1JlYWR5Jyxcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZSA9PT0gUEVORElORyB8fCB0aGlzLl9zdGF0ZSA9PT0gQ09NUExFVEUgfHwgdGhpcy5fc3RhdGUgPT09IEZBSUxFRDtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIEJhc2VMb2FkZXI7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEJhc2VMb2FkZXI7XG5cbi8qKiovIH0sXG4vKiAxNzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBYSFJTZXR0aW5ncztcblx0Ly8gIENyZWF0ZXMgYW4gWEhSU2V0dGluZ3MgT2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXNcblx0XG5cdGZ1bmN0aW9uIFhIUlNldHRpbmdzKCkge1xuXHQgICAgICAgIHZhciByZXNwb25zZVR5cGUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1swXTtcblx0ICAgICAgICB2YXIgYXN5bmMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzFdO1xuXHQgICAgICAgIHZhciB1c2VyID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMl07XG5cdCAgICAgICAgdmFyIHBhc3N3b3JkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbM107XG5cdCAgICAgICAgdmFyIHRpbWVvdXQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDQgfHwgYXJndW1lbnRzWzRdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzRdO1xuXHRcblx0XG5cdCAgICAgICAgcmV0dXJuIHtcblx0XG5cdCAgICAgICAgICAgICAgICAvLyAgSWdub3JlZCBieSB0aGUgTG9hZGVyLCBvbmx5IHVzZWQgYnkgRmlsZS5cblx0ICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogcmVzcG9uc2VUeXBlLFxuXHRcblx0ICAgICAgICAgICAgICAgIGFzeW5jOiBhc3luYyxcblx0XG5cdCAgICAgICAgICAgICAgICAvLyAgY3JlZGVudGlhbHNcblx0ICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIsXG5cdCAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gIHRpbWVvdXQgaW4gbXMgKDAgPSBubyB0aW1lb3V0KVxuXHQgICAgICAgICAgICAgICAgdGltZW91dDogdGltZW91dCxcblx0XG5cdCAgICAgICAgICAgICAgICAvLyAgc2V0UmVxdWVzdEhlYWRlclxuXHQgICAgICAgICAgICAgICAgaGVhZGVyOiB1bmRlZmluZWQsXG5cdCAgICAgICAgICAgICAgICBoZWFkZXJWYWx1ZTogdW5kZWZpbmVkLFxuXHRcblx0ICAgICAgICAgICAgICAgIC8vICBvdmVycmlkZU1pbWVUeXBlXG5cdCAgICAgICAgICAgICAgICBvdmVycmlkZU1pbWVUeXBlOiB1bmRlZmluZWRcblx0XG5cdCAgICAgICAgfTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTc3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgICAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5ERVNUUk9ZRUQgPSBleHBvcnRzLkNPTVBMRVRFID0gZXhwb3J0cy5QUk9DRVNTSU5HID0gZXhwb3J0cy5GQUlMRUQgPSBleHBvcnRzLkxPQURFRCA9IGV4cG9ydHMuTE9BRElORyA9IGV4cG9ydHMuUEVORElORyA9IHVuZGVmaW5lZDtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRmlsZTtcblx0XG5cdHZhciBfWEhSTG9hZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzgpO1xuXHRcblx0dmFyIF9YSFJMb2FkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfWEhSTG9hZGVyKTtcblx0XG5cdHZhciBfWEhSU2V0dGluZ3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nik7XG5cdFxuXHR2YXIgX1hIUlNldHRpbmdzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1hIUlNldHRpbmdzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvLyAgRmlsZSBsZXZlbCBjb25zdHNcblx0XG5cdHZhciBQRU5ESU5HID0gZXhwb3J0cy5QRU5ESU5HID0gMDsgLy8gZmlsZSBpcyBpbiB0aGUgbG9hZCBxdWV1ZSBidXQgbm90IHlldCBzdGFydGVkXG5cdHZhciBMT0FESU5HID0gZXhwb3J0cy5MT0FESU5HID0gMTsgLy8gZmlsZSBoYXMgYmVlbiBzdGFydGVkIHRvIGxvYWQgYnkgdGhlIGxvYWRlciAob25Mb2FkIGNhbGxlZClcblx0dmFyIExPQURFRCA9IGV4cG9ydHMuTE9BREVEID0gMjsgLy8gZmlsZSBoYXMgbG9hZGVkIHN1Y2Nlc3NmdWxseSwgYXdhaXRpbmcgcHJvY2Vzc2luZ1xuXHR2YXIgRkFJTEVEID0gZXhwb3J0cy5GQUlMRUQgPSAzOyAvLyBmaWxlIGZhaWxlZCB0byBsb2FkXG5cdHZhciBQUk9DRVNTSU5HID0gZXhwb3J0cy5QUk9DRVNTSU5HID0gNDsgLy8gZmlsZSBpcyBiZWluZyBwcm9jZXNzZWQgKG9uUHJvY2VzcyBjYWxsYmFjaylcblx0dmFyIENPTVBMRVRFID0gZXhwb3J0cy5DT01QTEVURSA9IDU7IC8vIGZpbGUgaGFzIGZpbmlzaGVkIHByb2Nlc3Npbmdcblx0dmFyIERFU1RST1lFRCA9IGV4cG9ydHMuREVTVFJPWUVEID0gNjsgLy8gZmlsZSBoYXMgYmVlbiBkZXN0cm95ZWRcblx0XG5cdC8vICBPdXIgYmFzZSBGaWxlIG9iamVjdCAoZnJvbSB3aGljaCBhbGwgRmlsZSBUeXBlcyBleHRlbmQpXG5cdFxuXHQvLyAga2V5ID0gdXNlciBsZXZlbCBmaWxlIGtleSAoY2FuIGJlIGZpbGVuYW1lIG9yIG90aGVyIHN0cmluZyBiYXNlZCB2YWx1ZSlcblx0Ly8gIHVybCA9IHRoZSBVUkwgdG8gbG9hZCB0aGUgZmlsZSBmcm9tLCBkb2Vzbid0IGluY2x1ZGUgYmFzZVVSTCBvciBQYXRoICh3aGljaCBhcmUgYm90aCBzZXQgYnkgdGhlIExvYWRlcilcblx0Ly8gIHR5cGUgPSBhIHVzZXItbGV2ZWwgdmFsdWUgdGhhdCBjYW4gY29udHJvbCB3aGljaCBjYWNoZSB0aGUgZmlsZSBpcyBhZGRlZCB0b1xuXHRcblx0ZnVuY3Rpb24gRmlsZShrZXksIHVybCwgdHlwZSkge1xuXHRcblx0ICAgICAgICBpZiAoIWtleSkge1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdJbnZhbGlkIEZpbGUga2V5Jyk7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4ge1xuXHRcblx0ICAgICAgICAgICAgICAgIGtleToga2V5LFxuXHRcblx0ICAgICAgICAgICAgICAgIHVybDogdXJsLFxuXHRcblx0ICAgICAgICAgICAgICAgIC8vICBCb3RoIG9mIHRoZXNlIGFyZSBvdmVycmlkZGVuIGJ5IHRoZSBCYXNlTG9hZGVyIChpZiBiZWluZyB1c2VkKVxuXHQgICAgICAgICAgICAgICAgcGF0aDogJycsXG5cdCAgICAgICAgICAgICAgICBzcmM6IHVybCxcblx0XG5cdCAgICAgICAgICAgICAgICB0YWc6ICcnLCAvLyBUYWcgdGhpcyBmaWxlLCB0aGlzIGlzIGEgbm9uLXVuaXF1ZSBzdHJpbmcuIEZvciBleGFtcGxlIHlvdSBjb3VsZCB0YWcgYSBjb2xsZWN0aW9uIG9mIGZpbGVzIGFzICdsZXZlbDEnLCBvciAnbWFpbm1lbnUnLlxuXHRcblx0ICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsIC8vIHRoZSBmaWxlIHR5cGUsIGkuZS4gJ2ltYWdlJywgJ2pzb24nLCBldGMgd2hpY2ggY2FuIGJlIHVzZWQgdG8gY29udHJvbCB3aGljaCBjYWNoZSBpdCBnZXRzIGFkZGVkIHRvXG5cdFxuXHQgICAgICAgICAgICAgICAgc3RhdGU6IFBFTkRJTkcsXG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gIE11bHRpcGFydCBmaWxlPyAoaS5lLiBhbiBhdGxhcyBhbmQgaXRzIGpzb24pXG5cdCAgICAgICAgICAgICAgICBtdWx0aXBhcnQ6IHVuZGVmaW5lZCxcblx0ICAgICAgICAgICAgICAgIGxpbmtGaWxlOiB1bmRlZmluZWQsXG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gIFRoZSBhY3R1YWwgcHJvY2Vzc2VkIGZpbGUgZGF0YVxuXHQgICAgICAgICAgICAgICAgZGF0YTogdW5kZWZpbmVkLFxuXHRcblx0ICAgICAgICAgICAgICAgIC8vICBGb3IgQ09ScyBiYXNlZCBsb2FkaW5nLlxuXHQgICAgICAgICAgICAgICAgLy8gIElmIHRoaXMgaXMgdW5kZWZpbmVkIHRoZW4gdGhlIEZpbGUgd2lsbCBjaGVjayBCYXNlTG9hZGVyLmNyb3NzT3JpZ2luIGFuZCB1c2UgdGhhdCAoaWYgc2V0KVxuXHQgICAgICAgICAgICAgICAgY3Jvc3NPcmlnaW46IHVuZGVmaW5lZCxcblx0XG5cdCAgICAgICAgICAgICAgICAvLyAgT3B0aW9uYWxseSBzZXQgYnkgdGhlIFByb21pc2UgcmV0dXJuZWQgZnJvbSBCYXNlTG9hZGVyLmFkZEZpbGUuXG5cdCAgICAgICAgICAgICAgICByZXNvbHZlOiB1bmRlZmluZWQsXG5cdCAgICAgICAgICAgICAgICByZWplY3Q6IHVuZGVmaW5lZCxcblx0XG5cdCAgICAgICAgICAgICAgICAvLyAgbWF5YmUgeW91IGhhdmUgdG8gc2V0IGl0IGluIHRoZSBQcm9taXNlP1xuXHQgICAgICAgICAgICAgICAgcHJvY2Vzc0NhbGxiYWNrOiB1bmRlZmluZWQsXG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gIHhociBzcGVjaWZpYyBzZXR0aW5ncyAoaWdub3JlZCBieSBUYWdMb2FkZWQgZmlsZXMpXG5cdCAgICAgICAgICAgICAgICB4aHI6ICgwLCBfWEhSU2V0dGluZ3MyLmRlZmF1bHQpKCd0ZXh0JyksXG5cdFxuXHQgICAgICAgICAgICAgICAgb25TdGF0ZUNoYW5nZTogZnVuY3Rpb24gb25TdGF0ZUNoYW5nZSh2YWx1ZSkge1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ29uU3RhdGVDaGFuZ2UnLCB0aGlzLnVybCwgJ2Zyb20nLCB0aGlzLnN0YXRlLCAndG8nLCB2YWx1ZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gdmFsdWU7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICBMb2FkZWQgQU5EIFByb2Nlc3NlZFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gQ09NUExFVEUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICBQYXJ0IG9mIGEgbXVsdGlwYXJ0IGxvYWQ/XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tdWx0aXBhcnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gIEhhcyB0aGUgbGlua2VkIGZpbGUgbG9hZGVkIHRvbz9cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGlua0ZpbGUuc3RhdGUgPT09IENPTVBMRVRFICYmIHRoaXMubXVsdGlwYXJ0LnJlc29sdmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgU2VuZCB0aGUgUHJvbWlzZSBmb3IgdGhlIG11bHRpcGFydCBmaWxlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBhcnQucmVzb2x2ZSh0aGlzLm11bHRpcGFydCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgU2VuZCB0aGUgUHJvbWlzZSBmb3IgdGhpcyBmaWxlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXNvbHZlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZSh0aGlzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBGQUlMRUQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICBQYXJ0IG9mIGEgbXVsdGlwYXJ0IGxvYWQ/XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tdWx0aXBhcnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlwYXJ0LnJlamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICBTZW5kIHRoZSBQcm9taXNlIGZvciB0aGUgbXVsdGlwYXJ0IGZpbGVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpcGFydC5yZWplY3QodGhpcy5tdWx0aXBhcnQsIGVycm9yKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICBTZW5kIHRoZSBQcm9taXNlIGZvciB0aGlzIGZpbGVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdCh0aGlzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH0sXG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gIFRoZXNlIGZ1bmN0aW9ucyBhcmUgdXN1YWxseSBvdmVycmlkZGVuIGJ5IHRoZSBjdXN0b20gZmlsZSB0eXBlc1xuXHRcblx0ICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uIGxvYWQoZ2xvYmFsWEhSU2V0dGluZ3MpIHtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShMT0FESU5HKTtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vICBSZXR1cm5zIGEgUHJvbWlzZSBmcm9tIHRoZSBYSFJMb2FkZXJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfWEhSTG9hZGVyMi5kZWZhdWx0KSh0aGlzLCBnbG9iYWxYSFJTZXR0aW5ncyk7XG5cdCAgICAgICAgICAgICAgICB9LFxuXHRcblx0ICAgICAgICAgICAgICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkge1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gIElmIG92ZXJyaWRkZW4gaXQgbXVzdCBzZXQgYHN0YXRlYCB0byBMT0FERURcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlKExPQURFRCk7XG5cdCAgICAgICAgICAgICAgICB9LFxuXHRcblx0ICAgICAgICAgICAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIG9uRXJyb3IoKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyAgSWYgb3ZlcnJpZGRlbiBpdCBtdXN0IHNldCBgc3RhdGVgIHRvIEZBSUxFRFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3RhdGVDaGFuZ2UoRkFJTEVEKTtcblx0ICAgICAgICAgICAgICAgIH0sXG5cdFxuXHQgICAgICAgICAgICAgICAgb25Qcm9jZXNzOiBmdW5jdGlvbiBvblByb2Nlc3MoKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyAgSWYgb3ZlcnJpZGRlbiBpdCBtdXN0IHNldCBgc3RhdGVgIHRvIFBST0NFU1NJTkdcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlKFBST0NFU1NJTkcpO1xuXHQgICAgICAgICAgICAgICAgfSxcblx0XG5cdCAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiBvbkNvbXBsZXRlKCkge1xuXHRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gIElmIG92ZXJyaWRkZW4gaXQgbXVzdCBzZXQgYHN0YXRlYCB0byBDT01QTEVURVxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3RhdGVDaGFuZ2UoQ09NUExFVEUpO1xuXHQgICAgICAgICAgICAgICAgfSxcblx0XG5cdCAgICAgICAgICAgICAgICBvbkRlc3Ryb3k6IGZ1bmN0aW9uIG9uRGVzdHJveSgpIHtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vICBJZiBvdmVycmlkZGVuIGl0IG11c3Qgc2V0IGBzdGF0ZWAgdG8gREVTVFJPWUVEXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShERVNUUk9ZRUQpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICB9O1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxNzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFhIUkxvYWRlcjtcblx0XG5cdHZhciBfTWVyZ2VYSFJTZXR0aW5ncyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc5KTtcblx0XG5cdHZhciBfTWVyZ2VYSFJTZXR0aW5nczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NZXJnZVhIUlNldHRpbmdzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBYSFJMb2FkZXIoZmlsZSwgZ2xvYmFsWEhSU2V0dGluZ3MpIHtcblx0XG5cdCAgICB2YXIgY29uZmlnID0gKDAsIF9NZXJnZVhIUlNldHRpbmdzMi5kZWZhdWx0KShnbG9iYWxYSFJTZXR0aW5ncywgZmlsZS54aHIpO1xuXHRcblx0ICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XG5cdCAgICB4aHIub3BlbignR0VUJywgZmlsZS5zcmMsIGNvbmZpZy5hc3luYywgY29uZmlnLnVzZXIsIGNvbmZpZy5wYXNzd29yZCk7XG5cdFxuXHQgICAgeGhyLnJlc3BvbnNlVHlwZSA9IGZpbGUueGhyLnJlc3BvbnNlVHlwZTtcblx0ICAgIHhoci50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7XG5cdFxuXHQgICAgaWYgKGNvbmZpZy5oZWFkZXIgJiYgY29uZmlnLmhlYWRlclZhbHVlKSB7XG5cdCAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoY29uZmlnLmhlYWRlciwgY29uZmlnLmhlYWRlclZhbHVlKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoY29uZmlnLm92ZXJyaWRlTWltZVR5cGUpIHtcblx0ICAgICAgICB4aHIub3ZlcnJpZGVNaW1lVHlwZShjb25maWcub3ZlcnJpZGVNaW1lVHlwZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0XG5cdCAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgZmlsZS5vbkxvYWQoeGhyKTtcblx0ICAgICAgICAgICAgcmVzb2x2ZShmaWxlKTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgZmlsZS5vbkVycm9yKHhocik7XG5cdCAgICAgICAgICAgIHJlamVjdChmaWxlKTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICB4aHIuc2VuZCgpO1xuXHQgICAgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE3OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gTWVyZ2VYSFJTZXR0aW5ncztcblx0XG5cdHZhciBfWEhSU2V0dGluZ3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nik7XG5cdFxuXHR2YXIgX1hIUlNldHRpbmdzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1hIUlNldHRpbmdzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvLyAgVGFrZXMgdHdvIFhIUiBPYmplY3RzIGFuZCBjcmVhdGVzIGEgbmV3IG9iamVjdFxuXHRcblx0Ly8gIFRoZSBuZXcgb2JqZWN0IGlzIGJhc2VkIG9uIGdsb2JhbCBpbml0aWFsbHksIGJ1dCBhbnkgc2V0dGluZyBpblxuXHQvLyAgbG9jYWwgb3ZlcnJpZGVzIHRoZSBnbG9iYWwgdmFsdWUuXG5cdFxuXHRmdW5jdGlvbiBNZXJnZVhIUlNldHRpbmdzKGdsb2JhbCwgbG9jYWwpIHtcblx0XG5cdCAgICB2YXIgb3V0cHV0ID0gZ2xvYmFsID09PSB1bmRlZmluZWQgPyAoMCwgX1hIUlNldHRpbmdzMi5kZWZhdWx0KSgpIDogT2JqZWN0LmFzc2lnbihnbG9iYWwpO1xuXHRcblx0ICAgIGlmIChsb2NhbCkge1xuXHQgICAgICAgIGZvciAodmFyIHNldHRpbmcgaW4gbG9jYWwpIHtcblx0ICAgICAgICAgICAgaWYgKGxvY2FsW3NldHRpbmddICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICAgIG91dHB1dFtzZXR0aW5nXSA9IGxvY2FsW3NldHRpbmddO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBvdXRwdXQ7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE4MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5UWVBFID0gdW5kZWZpbmVkO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBJbWFnZUZpbGU7XG5cdFxuXHR2YXIgX0ZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nyk7XG5cdFxuXHR2YXIgRklMRSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9GaWxlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cdFxuXHR2YXIgVFlQRSA9IGV4cG9ydHMuVFlQRSA9ICdpbWFnZSc7XG5cdFxuXHRmdW5jdGlvbiBJbWFnZUZpbGUoa2V5KSB7XG5cdCAgICB2YXIgdXJsID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMV07XG5cdCAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1syXTtcblx0XG5cdFxuXHQgICAgaWYgKHVybCA9PT0gJycgJiYgIWRhdGEpIHtcblx0ICAgICAgICB1cmwgPSBrZXkgKyAnLnBuZyc7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGZpbGUgPSAoMCwgRklMRS5kZWZhdWx0KShrZXksIHVybCwgVFlQRSk7XG5cdFxuXHQgICAgZmlsZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShGSUxFLkxPQURJTkcpO1xuXHRcblx0ICAgICAgICB0aGlzLmRhdGEgPSBuZXcgSW1hZ2UoKTtcblx0XG5cdCAgICAgICAgaWYgKHRoaXMuY3Jvc3NPcmlnaW4pIHtcblx0ICAgICAgICAgICAgdGhpcy5kYXRhLmNyb3NzT3JpZ2luID0gdGhpcy5jcm9zc09yaWdpbjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFxuXHQgICAgICAgICAgICBfdGhpcy5kYXRhLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChfdGhpcy5kYXRhLm9ubG9hZCkge1xuXHQgICAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGEub25sb2FkID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICBfdGhpcy5kYXRhLm9uZXJyb3IgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIF90aGlzLnN0YXRlID0gRklMRS5MT0FERUQ7XG5cdCAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmaWxlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfTtcblx0XG5cdCAgICAgICAgICAgIF90aGlzLmRhdGEub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKF90aGlzLmRhdGEub25sb2FkKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGF0YS5vbmxvYWQgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGEub25lcnJvciA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IgPSBldmVudDtcblx0ICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGF0ZSA9IEZJTEUuRkFJTEVEO1xuXHQgICAgICAgICAgICAgICAgICAgIHJlamVjdChmaWxlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfTtcblx0XG5cdCAgICAgICAgICAgIF90aGlzLmRhdGEubmFtZSA9IGtleTtcblx0ICAgICAgICAgICAgX3RoaXMuZGF0YS5zcmMgPSBfdGhpcy5zcmM7XG5cdFxuXHQgICAgICAgICAgICAvLyBJbWFnZSBpcyBpbW1lZGlhdGVseS1hdmFpbGFibGUgb3IgY2FjaGVkXG5cdFxuXHQgICAgICAgICAgICBpZiAoX3RoaXMuZGF0YS5jb21wbGV0ZSAmJiBfdGhpcy5kYXRhLndpZHRoICYmIF90aGlzLmRhdGEuaGVpZ2h0KSB7XG5cdCAgICAgICAgICAgICAgICBfdGhpcy5kYXRhLm9ubG9hZCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICBfdGhpcy5kYXRhLm9uZXJyb3IgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBGSUxFLkxPQURFRDtcblx0ICAgICAgICAgICAgICAgIHJlc29sdmUoZmlsZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIGZpbGU7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE4MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5UWVBFID0gdW5kZWZpbmVkO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBKU09ORmlsZTtcblx0XG5cdHZhciBfRmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTc3KTtcblx0XG5cdHZhciBGSUxFID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX0ZpbGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblx0XG5cdHZhciBUWVBFID0gZXhwb3J0cy5UWVBFID0gJ2pzb24nO1xuXHRcblx0ZnVuY3Rpb24gSlNPTkZpbGUoa2V5KSB7XG5cdCAgICB2YXIgdXJsID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMV07XG5cdCAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1syXTtcblx0XG5cdFxuXHQgICAgaWYgKHVybCA9PT0gJycgJiYgIWRhdGEpIHtcblx0ICAgICAgICB1cmwgPSBrZXkgKyAnLmpzb24nO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmaWxlID0gKDAsIEZJTEUuZGVmYXVsdCkoa2V5LCB1cmwsIFRZUEUpO1xuXHRcblx0ICAgIC8vICBTZXQgdGhlIGV4cGVjdGVkIFhIUiByZXNwb25zZSB0eXBlXG5cdCAgICBmaWxlLnhoci5yZXNwb25zZVR5cGUgPSAndGV4dCc7XG5cdFxuXHQgICAgZmlsZS5vbkxvYWQgPSBmdW5jdGlvbiAoeGhyKSB7XG5cdFxuXHQgICAgICAgIHRoaXMuZGF0YSA9IHhoci5yZXNwb25zZVRleHQ7XG5cdFxuXHQgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShGSUxFLkxPQURFRCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGZpbGUub25Qcm9jZXNzID0gZnVuY3Rpb24gKCkge1xuXHRcblx0ICAgICAgICB0aGlzLm9uU3RhdGVDaGFuZ2UoRklMRS5QUk9DRVNTSU5HKTtcblx0XG5cdCAgICAgICAgdGhpcy5kYXRhID0gSlNPTi5wYXJzZSh0aGlzLmRhdGEpO1xuXHQgICAgfTtcblx0XG5cdCAgICBpZiAoZGF0YSkge1xuXHQgICAgICAgIGZpbGUuZGF0YSA9IGRhdGE7XG5cdCAgICAgICAgZmlsZS5vblByb2Nlc3MoKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZmlsZTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTgyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlRZUEUgPSB1bmRlZmluZWQ7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFhNTEZpbGU7XG5cdFxuXHR2YXIgX1BhcnNlWE1MID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODMpO1xuXHRcblx0dmFyIF9QYXJzZVhNTDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QYXJzZVhNTCk7XG5cdFxuXHR2YXIgX0ZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nyk7XG5cdFxuXHR2YXIgRklMRSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9GaWxlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0dmFyIFRZUEUgPSBleHBvcnRzLlRZUEUgPSAneG1sJztcblx0XG5cdGZ1bmN0aW9uIFhNTEZpbGUoa2V5KSB7XG5cdCAgICB2YXIgdXJsID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMV07XG5cdCAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1syXTtcblx0XG5cdFxuXHQgICAgaWYgKHVybCA9PT0gJycgJiYgIWRhdGEpIHtcblx0ICAgICAgICB1cmwgPSBrZXkgKyAnLnhtbCc7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGZpbGUgPSAoMCwgRklMRS5kZWZhdWx0KShrZXksIHVybCwgVFlQRSk7XG5cdFxuXHQgICAgLy8gIFNldCB0aGUgZXhwZWN0ZWQgWEhSIHJlc3BvbnNlIHR5cGVcblx0ICAgIGZpbGUueGhyLnJlc3BvbnNlVHlwZSA9ICd0ZXh0Jztcblx0XG5cdCAgICBmaWxlLm9uTG9hZCA9IGZ1bmN0aW9uICh4aHIpIHtcblx0XG5cdCAgICAgICAgdGhpcy5kYXRhID0geGhyLnJlc3BvbnNlVGV4dDtcblx0XG5cdCAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlKEZJTEUuTE9BREVEKTtcblx0ICAgIH07XG5cdFxuXHQgICAgZmlsZS5vblByb2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShGSUxFLlBST0NFU1NJTkcpO1xuXHRcblx0ICAgICAgICB2YXIgeG1sID0gKDAsIF9QYXJzZVhNTDIuZGVmYXVsdCkodGhpcy5kYXRhKTtcblx0XG5cdCAgICAgICAgaWYgKCF4bWwpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdYTUxGaWxlOiBJbnZhbGlkIFhNTCcpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuZGF0YSA9IHhtbDtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGlmIChkYXRhKSB7XG5cdCAgICAgICAgZmlsZS5kYXRhID0gZGF0YTtcblx0ICAgICAgICBmaWxlLm9uUHJvY2VzcygpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBmaWxlO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxODMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFBhcnNlWE1MO1xuXHRmdW5jdGlvbiBQYXJzZVhNTChkYXRhKSB7XG5cdFxuXHQgICAgdmFyIHhtbCA9ICcnO1xuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHdpbmRvd1snRE9NUGFyc2VyJ10pIHtcblx0ICAgICAgICAgICAgdmFyIGRvbXBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcblx0ICAgICAgICAgICAgeG1sID0gZG9tcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhkYXRhLCAndGV4dC94bWwnKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB4bWwgPSBuZXcgQWN0aXZlWE9iamVjdCgnTWljcm9zb2Z0LlhNTERPTScpO1xuXHQgICAgICAgICAgICB4bWwubG9hZFhNTChkYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgeG1sID0gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIXhtbCB8fCAheG1sLmRvY3VtZW50RWxlbWVudCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhcnNlcmVycm9yJykubGVuZ3RoKSB7XG5cdCAgICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB4bWw7XG5cdCAgICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE4NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5UWVBFID0gdW5kZWZpbmVkO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBUZXh0RmlsZTtcblx0XG5cdHZhciBfRmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTc3KTtcblx0XG5cdHZhciBGSUxFID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX0ZpbGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblx0XG5cdHZhciBUWVBFID0gZXhwb3J0cy5UWVBFID0gJ3RleHQnO1xuXHRcblx0ZnVuY3Rpb24gVGV4dEZpbGUoa2V5KSB7XG5cdCAgICB2YXIgdXJsID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMV07XG5cdCAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1syXTtcblx0XG5cdFxuXHQgICAgaWYgKHVybCA9PT0gJycgJiYgIWRhdGEpIHtcblx0ICAgICAgICB1cmwgPSBrZXkgKyAnLnR4dCc7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGZpbGUgPSAoMCwgRklMRS5kZWZhdWx0KShrZXksIHVybCwgVFlQRSk7XG5cdFxuXHQgICAgLy8gIFNldCB0aGUgZXhwZWN0ZWQgWEhSIHJlc3BvbnNlIHR5cGVcblx0ICAgIGZpbGUueGhyLnJlc3BvbnNlVHlwZSA9ICd0ZXh0Jztcblx0XG5cdCAgICBmaWxlLm9uTG9hZCA9IGZ1bmN0aW9uICh4aHIpIHtcblx0XG5cdCAgICAgICAgdGhpcy5kYXRhID0geGhyLnJlc3BvbnNlVGV4dDtcblx0XG5cdCAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlKEZJTEUuTE9BREVEKTtcblx0ICAgIH07XG5cdFxuXHQgICAgaWYgKGRhdGEpIHtcblx0ICAgICAgICBmaWxlLmRhdGEgPSBkYXRhO1xuXHQgICAgICAgIGZpbGUub25Qcm9jZXNzKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGZpbGU7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5UWVBFID0gdW5kZWZpbmVkO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBHTFNMRmlsZTtcblx0XG5cdHZhciBfRmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTc3KTtcblx0XG5cdHZhciBGSUxFID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX0ZpbGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblx0XG5cdHZhciBUWVBFID0gZXhwb3J0cy5UWVBFID0gJ2dsc2wnO1xuXHRcblx0ZnVuY3Rpb24gR0xTTEZpbGUoa2V5KSB7XG5cdCAgICB2YXIgdXJsID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMV07XG5cdCAgICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1syXTtcblx0XG5cdFxuXHQgICAgaWYgKHVybCA9PT0gJycgJiYgIWRhdGEpIHtcblx0ICAgICAgICB1cmwgPSBrZXkgKyAnLmdsc2wnO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmaWxlID0gKDAsIEZJTEUuZGVmYXVsdCkoa2V5LCB1cmwsIFRZUEUpO1xuXHRcblx0ICAgIC8vICBTZXQgdGhlIGV4cGVjdGVkIFhIUiByZXNwb25zZSB0eXBlXG5cdCAgICBmaWxlLnhoci5yZXNwb25zZVR5cGUgPSAndGV4dCc7XG5cdFxuXHQgICAgZmlsZS5vbkxvYWQgPSBmdW5jdGlvbiAoeGhyKSB7XG5cdFxuXHQgICAgICAgIHRoaXMuZGF0YSA9IHhoci5yZXNwb25zZVRleHQ7XG5cdFxuXHQgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShGSUxFLkxPQURFRCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGlmIChkYXRhKSB7XG5cdCAgICAgICAgZmlsZS5kYXRhID0gZGF0YTtcblx0ICAgICAgICBmaWxlLm9uUHJvY2VzcygpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBmaWxlO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxODYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuVFlQRSA9IHVuZGVmaW5lZDtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQmluYXJ5RmlsZTtcblx0XG5cdHZhciBfRmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTc3KTtcblx0XG5cdHZhciBGSUxFID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX0ZpbGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblx0XG5cdHZhciBUWVBFID0gZXhwb3J0cy5UWVBFID0gJ2JpbmFyeSc7XG5cdFxuXHRmdW5jdGlvbiBCaW5hcnlGaWxlKGtleSkge1xuXHQgICAgdmFyIHVybCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/ICcnIDogYXJndW1lbnRzWzFdO1xuXHQgICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbMl07XG5cdFxuXHRcblx0ICAgIGlmICh1cmwgPT09ICcnICYmICFkYXRhKSB7XG5cdCAgICAgICAgdXJsID0ga2V5ICsgJy5iaW4nO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmaWxlID0gKDAsIEZJTEUuZGVmYXVsdCkoa2V5LCB1cmwsIFRZUEUpO1xuXHRcblx0ICAgIC8vICBTZXQgdGhlIGV4cGVjdGVkIFhIUiByZXNwb25zZSB0eXBlXG5cdCAgICBmaWxlLnhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuXHRcblx0ICAgIGZpbGUub25Mb2FkID0gZnVuY3Rpb24gKHhocikge1xuXHRcblx0ICAgICAgICB0aGlzLmRhdGEgPSB4aHIucmVzcG9uc2U7XG5cdFxuXHQgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShGSUxFLkxPQURFRCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGlmIChkYXRhKSB7XG5cdCAgICAgICAgZmlsZS5kYXRhID0gZGF0YTtcblx0ICAgICAgICBmaWxlLm9uUHJvY2VzcygpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBmaWxlO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAxODcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEF0bGFzSlNPTkZpbGU7XG5cdFxuXHR2YXIgX0ltYWdlRmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgwKTtcblx0XG5cdHZhciBfSW1hZ2VGaWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ltYWdlRmlsZSk7XG5cdFxuXHR2YXIgX0pTT05GaWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODEpO1xuXHRcblx0dmFyIF9KU09ORmlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9KU09ORmlsZSk7XG5cdFxuXHR2YXIgX011bHRpRmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTg4KTtcblx0XG5cdHZhciBfTXVsdGlGaWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX011bHRpRmlsZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gQXRsYXNKU09ORmlsZShrZXksIHRleHR1cmVVUkwsIGF0bGFzVVJMLCBhdGxhc0RhdGEpIHtcblx0XG5cdCAgICBpZiAoYXRsYXNVUkwgPT09ICcnICYmIGF0bGFzRGF0YSA9PT0gbnVsbCkge1xuXHQgICAgICAgIGF0bGFzVVJMID0ga2V5ICsgJy5qc29uJztcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gKDAsIF9NdWx0aUZpbGUyLmRlZmF1bHQpKCgwLCBfSW1hZ2VGaWxlMi5kZWZhdWx0KShrZXksIHRleHR1cmVVUkwpLCAoMCwgX0pTT05GaWxlMi5kZWZhdWx0KShrZXksIGF0bGFzVVJMLCBhdGxhc0RhdGEpKTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTg4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IE11bHRpRmlsZTtcblx0ZnVuY3Rpb24gTXVsdGlGaWxlKGZpbGVBLCBmaWxlQikge1xuXHRcblx0ICAgIC8vICBMaW5rIHRoZSB0d28gZmlsZXNcblx0ICAgIGZpbGVBLmxpbmtGaWxlID0gZmlsZUI7XG5cdCAgICBmaWxlQi5saW5rRmlsZSA9IGZpbGVBO1xuXHRcblx0ICAgIHZhciBtdWx0aXBhcnQgPSB7XG5cdFxuXHQgICAgICAgIG11bHRpcGFydDogdHJ1ZSxcblx0XG5cdCAgICAgICAgZmlsZUE6IGZpbGVBLFxuXHQgICAgICAgIGZpbGVCOiBmaWxlQixcblx0XG5cdCAgICAgICAgcmVzb2x2ZTogdW5kZWZpbmVkLFxuXHQgICAgICAgIHJlamVjdDogdW5kZWZpbmVkLFxuXHRcblx0ICAgICAgICBsb2FkOiBmdW5jdGlvbiBsb2FkKCkge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgLy8gICBUaGlzIGlzbid0IHVzZWQgYnkgdGhlIEJhc2VMb2FkZXIsIGJ1dCBhbGxvd3MgeW91IHRvIGNhbGwgbG9hZCBkaXJlY3RseSBvbiB0aGUgbXVsdGlwYXJ0IGZpbGVcblx0XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gIFdoZW4gdGhpcyBmaWxlIGxvYWRzIHdlIG5lZWQgdG8gY2FsbCAncmVzb2x2ZSdcblx0ICAgICAgICAgICAgICAgIF90aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuXHQgICAgICAgICAgICAgICAgX3RoaXMucmVqZWN0ID0gcmVqZWN0O1xuXHRcblx0ICAgICAgICAgICAgICAgIF90aGlzLmZpbGVBLmxvYWQoKS50aGVuKGZ1bmN0aW9uIChmaWxlKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGZpbGUub25Qcm9jZXNzKCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlLnByb2Nlc3NDYWxsYmFjaykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnByb2Nlc3NDYWxsYmFjayhmaWxlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGZpbGUub25Db21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGZpbGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmaWxlLm9uRXJyb3IoKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgICAgIF90aGlzLmZpbGVCLmxvYWQoKS50aGVuKGZ1bmN0aW9uIChmaWxlKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGZpbGUub25Qcm9jZXNzKCk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlLnByb2Nlc3NDYWxsYmFjaykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnByb2Nlc3NDYWxsYmFjayhmaWxlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgIGZpbGUub25Db21wbGV0ZSgpO1xuXHQgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGZpbGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmaWxlLm9uRXJyb3IoKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgfTtcblx0XG5cdCAgICBmaWxlQS5tdWx0aXBhcnQgPSBtdWx0aXBhcnQ7XG5cdCAgICBmaWxlQi5tdWx0aXBhcnQgPSBtdWx0aXBhcnQ7XG5cdFxuXHQgICAgcmV0dXJuIG11bHRpcGFydDtcblx0fVxuXG4vKioqLyB9LFxuLyogMTg5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBBdGxhc1hNTEZpbGU7XG5cdFxuXHR2YXIgX0ltYWdlRmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgwKTtcblx0XG5cdHZhciBfSW1hZ2VGaWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ltYWdlRmlsZSk7XG5cdFxuXHR2YXIgX0pTT05GaWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODEpO1xuXHRcblx0dmFyIF9KU09ORmlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9KU09ORmlsZSk7XG5cdFxuXHR2YXIgX011bHRpRmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTg4KTtcblx0XG5cdHZhciBfTXVsdGlGaWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX011bHRpRmlsZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gQXRsYXNYTUxGaWxlKGtleSwgdGV4dHVyZVVSTCwgYXRsYXNVUkwsIGF0bGFzRGF0YSkge1xuXHRcblx0ICAgIGlmIChhdGxhc1VSTCA9PT0gJycgJiYgYXRsYXNEYXRhID09PSBudWxsKSB7XG5cdCAgICAgICAgYXRsYXNVUkwgPSBrZXkgKyAnLnhtbCc7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuICgwLCBfTXVsdGlGaWxlMi5kZWZhdWx0KSgoMCwgX0ltYWdlRmlsZTIuZGVmYXVsdCkoa2V5LCB0ZXh0dXJlVVJMKSwgWE1MRmlsZShrZXksIGF0bGFzVVJMLCBhdGxhc0RhdGEpKTtcblx0fVxuXG4vKioqLyB9LFxuLyogMTkwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgICAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX0Jhc2VUcmFuc2Zvcm0yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTEpO1xuXHRcblx0dmFyIF9CYXNlVHJhbnNmb3JtMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Jhc2VUcmFuc2Zvcm0yKTtcblx0XG5cdHZhciBfU2V0VHJhbnNmb3JtVG9Db250ZXh0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDApO1xuXHRcblx0dmFyIF9TZXRUcmFuc2Zvcm1Ub0NvbnRleHQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU2V0VHJhbnNmb3JtVG9Db250ZXh0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBTcHJpdGUgPSBmdW5jdGlvbiAoX0Jhc2VUcmFuc2Zvcm0pIHtcblx0ICAgICAgICBfaW5oZXJpdHMoU3ByaXRlLCBfQmFzZVRyYW5zZm9ybSk7XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIFNwcml0ZShpbWFnZSwgeCwgeSkge1xuXHQgICAgICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNwcml0ZSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNwcml0ZSkuY2FsbCh0aGlzLCB4LCB5KSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgX3RoaXMudGV4dHVyZSA9IHsgaW1hZ2U6IGltYWdlLCB3aWR0aDogaW1hZ2Uud2lkdGgsIGhlaWdodDogaW1hZ2UuaGVpZ2h0IH07XG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gdGhpcy5yb3RhdGlvbkFuY2hvci5zZXQoMC41KTtcblx0ICAgICAgICAgICAgICAgIC8vIHRoaXMudHJhbnNmb3JtLmVuYWJsZUludGVycG9sYXRpb24oKTtcblx0XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBfY3JlYXRlQ2xhc3MoU3ByaXRlLCBbe1xuXHQgICAgICAgICAgICAgICAga2V5OiAncmVuZGVyJyxcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoY3R4LCBpKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAoMCwgX1NldFRyYW5zZm9ybVRvQ29udGV4dDIuZGVmYXVsdCkodGhpcy50cmFuc2Zvcm0sIGN0eCwgaSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHggPSB0aGlzLnJvdGF0aW9uQW5jaG9yLnggKiAtdGhpcy50ZXh0dXJlLndpZHRoO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHkgPSB0aGlzLnJvdGF0aW9uQW5jaG9yLnkgKiAtdGhpcy50ZXh0dXJlLmhlaWdodDtcblx0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UodGhpcy50ZXh0dXJlLmltYWdlLCBkeCwgZHkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgIH1dKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIFNwcml0ZTtcblx0fShfQmFzZVRyYW5zZm9ybTMuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBTcHJpdGU7XG5cbi8qKiovIH0sXG4vKiAxOTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9UcmFuc2Zvcm0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Mik7XG5cdFxuXHR2YXIgX1RyYW5zZm9ybTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UcmFuc2Zvcm0pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHQvLyAgQSBCYXNlVHJhbnNmb3JtIGNsYXNzIHRoYXQgeW91IGNhbiB1c2Ugd2hlbiBleHRlbmRpbmcgYSBTcHJpdGUgb3Igb3RoZXIgR2FtZSBPYmplY3Rcblx0Ly8gIEhpZGVzIGF3YXkgdGhlICdwcml2YXRlJyBzdHVmZiBhbmQgZXhwb3NlcyBvbmx5IHRoZSB1c2VmdWwgZ2V0dGVycyBhbmQgc2V0dGVyc1xuXHRcblx0dmFyIEJhc2VUcmFuc2Zvcm0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBCYXNlVHJhbnNmb3JtKCkge1xuXHQgICAgICAgIHZhciB4ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gMCA6IGFyZ3VtZW50c1swXTtcblx0ICAgICAgICB2YXIgeSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IDAgOiBhcmd1bWVudHNbMV07XG5cdCAgICAgICAgdmFyIHJvdGF0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gMCA6IGFyZ3VtZW50c1syXTtcblx0ICAgICAgICB2YXIgc2NhbGVYID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1szXTtcblx0ICAgICAgICB2YXIgc2NhbGVZID0gYXJndW1lbnRzLmxlbmd0aCA8PSA0IHx8IGFyZ3VtZW50c1s0XSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1s0XTtcblx0XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJhc2VUcmFuc2Zvcm0pO1xuXHRcblx0ICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IG5ldyBfVHJhbnNmb3JtMi5kZWZhdWx0KHgsIHksIHJvdGF0aW9uLCBzY2FsZVgsIHNjYWxlWSk7XG5cdFxuXHQgICAgICAgIC8vICBEaXJlY3QgY29tcG9uZW50IHJlZmVyZW5jZXNcblx0ICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy50cmFuc2Zvcm0ucG9zaXRpb247XG5cdCAgICAgICAgdGhpcy5zY2FsZSA9IHRoaXMudHJhbnNmb3JtLnNjYWxlO1xuXHQgICAgICAgIHRoaXMucm90YXRpb25BbmNob3IgPSB0aGlzLnRyYW5zZm9ybS5yb3RhdGlvbkFuY2hvcjtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoQmFzZVRyYW5zZm9ybSwgW3tcblx0ICAgICAgICBrZXk6ICd4Jyxcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLmdldFgoKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi5zZXRYKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAneScsXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi5nZXRZKCk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24uc2V0WSh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3JvdGF0aW9uJyxcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybS5yb3RhdGlvbi5nZXRWYWx1ZSgpO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybS5yb3RhdGlvbi5zZXRWYWx1ZSh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBCYXNlVHJhbnNmb3JtO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBCYXNlVHJhbnNmb3JtO1xuXG4vKioqLyB9LFxuLyogMTkyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfQnVpbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Myk7XG5cdFxuXHR2YXIgX0J1aWxkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0J1aWxkKTtcblx0XG5cdHZhciBfU2NhbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5NCk7XG5cdFxuXHR2YXIgX1NjYWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1NjYWxlKTtcblx0XG5cdHZhciBfUG9zaXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Nik7XG5cdFxuXHR2YXIgX1Bvc2l0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Bvc2l0aW9uKTtcblx0XG5cdHZhciBfUm90YXRpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Nyk7XG5cdFxuXHR2YXIgX1JvdGF0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1JvdGF0aW9uKTtcblx0XG5cdHZhciBfUm90YXRpb25BbmNob3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5OSk7XG5cdFxuXHR2YXIgX1JvdGF0aW9uQW5jaG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1JvdGF0aW9uQW5jaG9yKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0Ly8gIEEgQmFzaWMgMkQgVHJhbnNmb3JtIGNsYXNzXG5cdFxuXHQvLyAgQ29tcG9uZW50czogUG9zaXRpb24sIFNjYWxlLCBSb3RhdGlvbiBhbmQgUm90YXRpb25BbmNob3IsIGJha2VkIHRvIGEgTWF0MjNcblx0Ly8gIFN1cHBvcnRzOiBJbW1lZGlhdGUgb3IgRGVmZXJyZWQgVXBkYXRlcywgSW50ZXJwb2xhdGlvbi5cblx0XG5cdHZhciBUcmFuc2Zvcm0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBUcmFuc2Zvcm0oKSB7XG5cdCAgICAgICAgdmFyIHggPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzBdO1xuXHQgICAgICAgIHZhciB5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gMCA6IGFyZ3VtZW50c1sxXTtcblx0ICAgICAgICB2YXIgcm90YXRpb24gPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzJdO1xuXHQgICAgICAgIHZhciBzY2FsZVggPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyAxIDogYXJndW1lbnRzWzNdO1xuXHQgICAgICAgIHZhciBzY2FsZVkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDQgfHwgYXJndW1lbnRzWzRdID09PSB1bmRlZmluZWQgPyAxIDogYXJndW1lbnRzWzRdO1xuXHRcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHJhbnNmb3JtKTtcblx0XG5cdCAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBfUG9zaXRpb24yLmRlZmF1bHQodGhpcywgeCwgeSk7XG5cdCAgICAgICAgdGhpcy5zY2FsZSA9IG5ldyBfU2NhbGUyLmRlZmF1bHQodGhpcywgc2NhbGVYLCBzY2FsZVkpO1xuXHQgICAgICAgIHRoaXMucm90YXRpb24gPSBuZXcgX1JvdGF0aW9uMi5kZWZhdWx0KHRoaXMsIHJvdGF0aW9uKTtcblx0ICAgICAgICB0aGlzLnJvdGF0aW9uQW5jaG9yID0gbmV3IF9Sb3RhdGlvbkFuY2hvcjIuZGVmYXVsdCh0aGlzLCAwLCAwKTtcblx0XG5cdCAgICAgICAgdGhpcy5sb2NhbCA9ICgwLCBfQnVpbGQyLmRlZmF1bHQpKHNjYWxlWCwgMCwgMCwgc2NhbGVZLCB4LCB5KTtcblx0XG5cdCAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZSA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMuaW1tZWRpYXRlID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gIEluamVjdCB0aGUgdHJhbnNmb3JtIHByb3BlcnRpZXMgdG8gdGhlIGdpdmVuIHRhcmdldFxuXHRcblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoVHJhbnNmb3JtLCBbe1xuXHQgICAgICAgIGtleTogJ2FkZFByb3BlcnRpZXMnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRQcm9wZXJ0aWVzKHRhcmdldCkge1xuXHRcblx0ICAgICAgICAgICAgLy8gIFByb3BlcnR5IGdldHRlci9zZXR0ZXIgaW5qZWN0aW9uXG5cdCAgICAgICAgICAgIHRoaXMucG9zaXRpb24uYWRkUHJvcGVydGllcyh0YXJnZXQpO1xuXHQgICAgICAgICAgICB0aGlzLnJvdGF0aW9uLmFkZFByb3BlcnRpZXModGFyZ2V0KTtcblx0XG5cdCAgICAgICAgICAgIC8vICBDb21wb25lbnQgcmVmZXJlbmNlc1xuXHQgICAgICAgICAgICB0YXJnZXQucG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uO1xuXHQgICAgICAgICAgICB0YXJnZXQuc2NhbGUgPSB0aGlzLnNjYWxlO1xuXHQgICAgICAgICAgICB0YXJnZXQucm90YXRpb25BbmNob3IgPSB0aGlzLnJvdGF0aW9uQW5jaG9yO1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnZW5hYmxlSW1tZWRpYXRlVXBkYXRlcycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVuYWJsZUltbWVkaWF0ZVVwZGF0ZXMoKSB7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLmltbWVkaWF0ZSA9IHRydWU7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnZGlzYWJsZUltbWVkaWF0ZVVwZGF0ZXMnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNhYmxlSW1tZWRpYXRlVXBkYXRlcygpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXMuaW1tZWRpYXRlID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2VuYWJsZUludGVycG9sYXRpb24nLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBlbmFibGVJbnRlcnBvbGF0aW9uKCkge1xuXHRcblx0ICAgICAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZSA9IHRydWU7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnJlc2V0KHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcblx0ICAgICAgICAgICAgdGhpcy5zY2FsZS5yZXNldCh0aGlzLnNjYWxlLngsIHRoaXMuc2NhbGUueSk7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnZGlzYWJsZUludGVycG9sYXRpb24nLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNhYmxlSW50ZXJwb2xhdGlvbigpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXMuaW50ZXJwb2xhdGUgPSBmYWxzZTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdzZXREaXJ0eScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldERpcnR5KCkge1xuXHRcblx0ICAgICAgICAgICAgaWYgKHRoaXMuaW1tZWRpYXRlKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRyYW5zZm9ybSgpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICd1cGRhdGVUcmFuc2Zvcm0nLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVUcmFuc2Zvcm0oKSB7XG5cdCAgICAgICAgICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1swXTtcblx0XG5cdFxuXHQgICAgICAgICAgICBpZiAodGhpcy5yb3RhdGlvbi5pc0Zhc3QpIHtcblx0ICAgICAgICAgICAgICAgIC8vICBGYXN0IChubyByb3RhdGlvbilcblx0ICAgICAgICAgICAgICAgIHRoaXMubG9jYWxbMF0gPSB0aGlzLnNjYWxlWzBdO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFsxXSA9IDA7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmxvY2FsWzJdID0gMDtcblx0ICAgICAgICAgICAgICAgIHRoaXMubG9jYWxbM10gPSB0aGlzLnNjYWxlWzFdO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFswXSA9IHRoaXMucm90YXRpb24uY3IgKiB0aGlzLnNjYWxlWzBdO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFsxXSA9IHRoaXMucm90YXRpb24uc3IgKiB0aGlzLnNjYWxlWzBdO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFsyXSA9IC10aGlzLnJvdGF0aW9uLnNyICogdGhpcy5zY2FsZVsxXTtcblx0ICAgICAgICAgICAgICAgIHRoaXMubG9jYWxbM10gPSB0aGlzLnJvdGF0aW9uLmNyICogdGhpcy5zY2FsZVsxXTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJwb2xhdGUpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMubG9jYWxbNF0gPSB0aGlzLnBvc2l0aW9uLmdldERlbHRhWChpKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMubG9jYWxbNV0gPSB0aGlzLnBvc2l0aW9uLmdldERlbHRhWShpKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMubG9jYWxbNF0gPSB0aGlzLnBvc2l0aW9uWzBdO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFs1XSA9IHRoaXMucG9zaXRpb25bMV07XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdkZXN0cm95Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXMucG9zaXRpb24uZGVzdHJveSgpO1xuXHQgICAgICAgICAgICB0aGlzLnNjYWxlLmRlc3Ryb3koKTtcblx0ICAgICAgICAgICAgdGhpcy5yb3RhdGlvbi5kZXN0cm95KCk7XG5cdCAgICAgICAgICAgIHRoaXMucm90YXRpb25BbmNob3IuZGVzdHJveSgpO1xuXHRcblx0ICAgICAgICAgICAgdGhpcy5sb2NhbCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIFRyYW5zZm9ybTtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gVHJhbnNmb3JtO1xuXG4vKioqLyB9LFxuLyogMTkzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IE1hdDIzO1xuXHR2YXIgbWF0ID0gRmxvYXQzMkFycmF5O1xuXHRcblx0Ly8gIEEgMkQgVHJhbnNmb3JtYXRpb24gTWF0cml4IGluaXRpYWxpemVkIHdpdGggYW4gaWRlbnRpdHkgbWF0cml4XG5cdFxuXHQvLyAgRm9sbG93cyB0aGUgY2FudmFzIHRyYW5zZm9ybSBvcmRlcjpcblx0Ly8gXG5cdC8vICBhICBjICBlXG5cdC8vICBiICBkICBmXG5cdC8vICAwICAwICAxXG5cdC8vIFxuXHQvLyAgd2hlcmU6XG5cdC8vIFxuXHQvLyAgYSAtIHNjYWxlIHhcblx0Ly8gIGIgLSBzaGVhciB5XG5cdC8vICBjIC0gc2hlYXIgeFxuXHQvLyAgZCAtIHNjYWxlIHlcblx0Ly8gIGUgLSB0cmFuc2xhdGUgeFxuXHQvLyAgZiAtIHRyYW5zbGF0ZSB5XG5cdC8vIFxuXHQvLyAgQW5kIHRoZSAzcmQgcm93ICgwLCAwLCAxKSBpcyBpZ25vcmVkIGZvciBzcGVlZFxuXHRcblx0ZnVuY3Rpb24gTWF0MjMoKSB7XG5cdCAgICB2YXIgYSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IDEgOiBhcmd1bWVudHNbMF07XG5cdCAgICB2YXIgYiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IDAgOiBhcmd1bWVudHNbMV07XG5cdCAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IDAgOiBhcmd1bWVudHNbMl07XG5cdCAgICB2YXIgZCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IDEgOiBhcmd1bWVudHNbM107XG5cdCAgICB2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gNCB8fCBhcmd1bWVudHNbNF0gPT09IHVuZGVmaW5lZCA/IDAgOiBhcmd1bWVudHNbNF07XG5cdCAgICB2YXIgZiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gNSB8fCBhcmd1bWVudHNbNV0gPT09IHVuZGVmaW5lZCA/IDAgOiBhcmd1bWVudHNbNV07XG5cdCAgICB2YXIgZHN0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSA2IHx8IGFyZ3VtZW50c1s2XSA9PT0gdW5kZWZpbmVkID8gbmV3IG1hdCg2KSA6IGFyZ3VtZW50c1s2XTtcblx0XG5cdFxuXHQgICAgZHN0WzBdID0gYTtcblx0ICAgIGRzdFsxXSA9IGI7XG5cdCAgICBkc3RbMl0gPSBjO1xuXHQgICAgZHN0WzNdID0gZDtcblx0ICAgIGRzdFs0XSA9IGU7XG5cdCAgICBkc3RbNV0gPSBmO1xuXHRcblx0ICAgIHJldHVybiBkc3Q7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDE5NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX0Jhc2VUcmFuc2Zvcm1Db21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5NSk7XG5cdFxuXHR2YXIgX0Jhc2VUcmFuc2Zvcm1Db21wb25lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQmFzZVRyYW5zZm9ybUNvbXBvbmVudCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgU2NhbGUgPSBmdW5jdGlvbiAoX0Jhc2VUcmFuc2Zvcm1Db21wb25lKSB7XG5cdCAgICBfaW5oZXJpdHMoU2NhbGUsIF9CYXNlVHJhbnNmb3JtQ29tcG9uZSk7XG5cdFxuXHQgICAgZnVuY3Rpb24gU2NhbGUodHJhbnNmb3JtKSB7XG5cdCAgICAgICAgdmFyIHggPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzFdO1xuXHQgICAgICAgIHZhciB5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gMCA6IGFyZ3VtZW50c1syXTtcblx0XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNjYWxlKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihTY2FsZSkuY2FsbCh0aGlzLCB0cmFuc2Zvcm0sIHgsIHkpKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoU2NhbGUsIFt7XG5cdCAgICAgICAga2V5OiAnYWRkUHJvcGVydGllcycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFByb3BlcnRpZXModGFyZ2V0KSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgaWYgKCF0YXJnZXQuaGFzT3duUHJvcGVydHkoJ3NjYWxlJykpIHtcblx0ICAgICAgICAgICAgICAgIHRhcmdldC5zY2FsZSA9IHt9O1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQuc2NhbGUsIHtcblx0XG5cdCAgICAgICAgICAgICAgICAneCc6IHtcblx0ICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmdldFgoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuc2V0WCh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSxcblx0XG5cdCAgICAgICAgICAgICAgICAneSc6IHtcblx0ICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmdldFkoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuc2V0WSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBTY2FsZTtcblx0fShfQmFzZVRyYW5zZm9ybUNvbXBvbmVudDIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBTY2FsZTtcblxuLyoqKi8gfSxcbi8qIDE5NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHQvLyAgSXQgZG9lc24ndCBjYXJlIHdoYXQgdHlwZSBvZiBUcmFuc2Zvcm0gaXQgaXMgYm91bmQgdG8sXG5cdC8vICBhcyBsb25nIGFzIGl0IGV4cG9zZXMgYSBgc2V0RGlydHlgIG1ldGhvZC5cblx0XG5cdC8vICBUaGlzIGNsYXNzIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgVmVjMiBkYXRhIHR5cGVzLCBzbyBjYW4gYmUgcGFzc2VkIHRvIGFueVxuXHQvLyAgZnVuY3Rpb24gdGhhdCB3aWxsIGFjY2VwdCBhIFZlYzIuXG5cdFxuXHR2YXIgQmFzZVRyYW5zZm9ybUNvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEJhc2VUcmFuc2Zvcm1Db21wb25lbnQodHJhbnNmb3JtKSB7XG5cdCAgICAgICAgdmFyIHggPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzFdO1xuXHQgICAgICAgIHZhciB5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gMCA6IGFyZ3VtZW50c1syXTtcblx0XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJhc2VUcmFuc2Zvcm1Db21wb25lbnQpO1xuXHRcblx0ICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcblx0XG5cdCAgICAgICAgdGhpc1swXSA9IHg7XG5cdCAgICAgICAgdGhpc1sxXSA9IHk7XG5cdFxuXHQgICAgICAgIC8vICBPbGQgdmFsdWVzIChmb3IgaW50ZXJwb2xhdGlvbiBiYXNlZCBUcmFuc2Zvcm1zKVxuXHQgICAgICAgIHRoaXNbMl0gPSB4O1xuXHQgICAgICAgIHRoaXNbM10gPSB5O1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhCYXNlVHJhbnNmb3JtQ29tcG9uZW50LCBbe1xuXHQgICAgICAgIGtleTogXCJnZXRYXCIsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFgoKSB7XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gdGhpc1swXTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcImdldFlcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0WSgpIHtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzWzFdO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6IFwiZ2V0RGVsdGFYXCIsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlbHRhWCgpIHtcblx0ICAgICAgICAgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzBdO1xuXHRcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzWzJdICsgKHRoaXNbMF0gLSB0aGlzWzJdKSAqIGk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogXCJnZXREZWx0YVlcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVsdGFZKCkge1xuXHQgICAgICAgICAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IDAgOiBhcmd1bWVudHNbMF07XG5cdFxuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXNbM10gKyAodGhpc1sxXSAtIHRoaXNbM10pICogaTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcInNldFhcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0WCh2YWx1ZSkge1xuXHRcblx0ICAgICAgICAgICAgaWYgKHRoaXNbMF0gIT09IHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzWzJdID0gdGhpc1swXTtcblx0ICAgICAgICAgICAgICAgIHRoaXNbMF0gPSB2YWx1ZTtcblx0ICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtLnNldERpcnR5KCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcInNldFlcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0WSh2YWx1ZSkge1xuXHRcblx0ICAgICAgICAgICAgaWYgKHRoaXNbMV0gIT09IHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzWzNdID0gdGhpc1sxXTtcblx0ICAgICAgICAgICAgICAgIHRoaXNbMV0gPSB2YWx1ZTtcblx0ICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtLnNldERpcnR5KCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vICBOYXRpdmUgZ2V0dGVycyAvIHNldHRlcnNcblx0XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcInNldFwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQoeCkge1xuXHQgICAgICAgICAgICB2YXIgeSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHggOiBhcmd1bWVudHNbMV07XG5cdFxuXHRcblx0ICAgICAgICAgICAgdGhpc1syXSA9IHRoaXNbMF07XG5cdCAgICAgICAgICAgIHRoaXNbM10gPSB0aGlzWzFdO1xuXHRcblx0ICAgICAgICAgICAgdGhpc1swXSA9IHg7XG5cdCAgICAgICAgICAgIHRoaXNbMV0gPSB5O1xuXHRcblx0ICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uc2V0RGlydHkoKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcInJlc2V0WFwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldFgodmFsdWUpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXNbMF0gPSB2YWx1ZTtcblx0ICAgICAgICAgICAgdGhpc1syXSA9IHZhbHVlO1xuXHRcblx0ICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uc2V0RGlydHkoKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcInJlc2V0WVwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldFkodmFsdWUpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXNbMV0gPSB2YWx1ZTtcblx0ICAgICAgICAgICAgdGhpc1szXSA9IHZhbHVlO1xuXHRcblx0ICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uc2V0RGlydHkoKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcInJlc2V0XCIsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0KHgpIHtcblx0ICAgICAgICAgICAgdmFyIHkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB4IDogYXJndW1lbnRzWzFdO1xuXHRcblx0XG5cdCAgICAgICAgICAgIHRoaXNbMF0gPSB4O1xuXHQgICAgICAgICAgICB0aGlzWzFdID0geTtcblx0ICAgICAgICAgICAgdGhpc1syXSA9IHg7XG5cdCAgICAgICAgICAgIHRoaXNbM10gPSB5O1xuXHRcblx0ICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uc2V0RGlydHkoKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcInNldFRyYW5zZm9ybVwiLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUcmFuc2Zvcm0odHJhbnNmb3JtKSB7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcImRlc3Ryb3lcIixcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6IFwieFwiLFxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXNbMF07XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuXHRcblx0ICAgICAgICAgICAgdGhpcy5zZXRYKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiBcInlcIixcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzWzFdO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXMuc2V0WSh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBCYXNlVHJhbnNmb3JtQ29tcG9uZW50O1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBCYXNlVHJhbnNmb3JtQ29tcG9uZW50O1xuXG4vKioqLyB9LFxuLyogMTk2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfQmFzZVRyYW5zZm9ybUNvbXBvbmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTk1KTtcblx0XG5cdHZhciBfQmFzZVRyYW5zZm9ybUNvbXBvbmVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9CYXNlVHJhbnNmb3JtQ29tcG9uZW50KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBQb3NpdGlvbiA9IGZ1bmN0aW9uIChfQmFzZVRyYW5zZm9ybUNvbXBvbmUpIHtcblx0ICAgIF9pbmhlcml0cyhQb3NpdGlvbiwgX0Jhc2VUcmFuc2Zvcm1Db21wb25lKTtcblx0XG5cdCAgICBmdW5jdGlvbiBQb3NpdGlvbih0cmFuc2Zvcm0pIHtcblx0ICAgICAgICB2YXIgeCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IDAgOiBhcmd1bWVudHNbMV07XG5cdCAgICAgICAgdmFyIHkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzJdO1xuXHRcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9zaXRpb24pO1xuXHRcblx0ICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKFBvc2l0aW9uKS5jYWxsKHRoaXMsIHRyYW5zZm9ybSwgeCwgeSkpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhQb3NpdGlvbiwgW3tcblx0ICAgICAgICBrZXk6ICdhZGRQcm9wZXJ0aWVzJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkUHJvcGVydGllcyh0YXJnZXQpIHtcblx0ICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHtcblx0XG5cdCAgICAgICAgICAgICAgICAneCc6IHtcblx0ICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmdldFgoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuc2V0WCh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSxcblx0XG5cdCAgICAgICAgICAgICAgICAneSc6IHtcblx0ICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmdldFkoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuc2V0WSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBQb3NpdGlvbjtcblx0fShfQmFzZVRyYW5zZm9ybUNvbXBvbmVudDIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQb3NpdGlvbjtcblxuLyoqKi8gfSxcbi8qIDE5NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX0NvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk4KTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgUm90YXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBSb3RhdGlvbih0cmFuc2Zvcm0pIHtcblx0ICAgICAgICB2YXIgcm90YXRpb24gPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzFdO1xuXHRcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUm90YXRpb24pO1xuXHRcblx0ICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcblx0XG5cdCAgICAgICAgdGhpc1swXSA9IHJvdGF0aW9uO1xuXHQgICAgICAgIHRoaXNbMV0gPSByb3RhdGlvbiAlIF9Db25zdGFudHMuUEkyO1xuXHRcblx0ICAgICAgICB0aGlzLnNyID0gMDtcblx0ICAgICAgICB0aGlzLmNyID0gMDtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoUm90YXRpb24sIFt7XG5cdCAgICAgICAga2V5OiAnZ2V0VmFsdWUnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZSgpIHtcblx0XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzWzBdO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdzZXRWYWx1ZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKHZhbHVlKSB7XG5cdFxuXHQgICAgICAgICAgICBpZiAodGhpc1swXSAhPT0gdmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXNbMF0gPSB2YWx1ZTtcblx0ICAgICAgICAgICAgICAgIHRoaXNbMV0gPSB2YWx1ZSAlIF9Db25zdGFudHMuUEkyO1xuXHRcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzWzFdKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgLy8gIFVwZGF0ZSB0aGUgY2FjaGUgaWYgdGhlIHJvdGF0aW9uICE9IDBcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnNyID0gTWF0aC5zaW4odmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuY3IgPSBNYXRoLmNvcyh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uc2V0RGlydHkoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdzZXRUcmFuc2Zvcm0nLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUcmFuc2Zvcm0odHJhbnNmb3JtKSB7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnYWRkUHJvcGVydGllcycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFByb3BlcnRpZXModGFyZ2V0KSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHtcblx0XG5cdCAgICAgICAgICAgICAgICAncm90YXRpb24nOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldFZhbHVlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0VmFsdWUodmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdkZXN0cm95Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XG5cdCAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdpc0Zhc3QnLFxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHRcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXNbMV0gPT09IDA7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBSb3RhdGlvbjtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUm90YXRpb247XG5cbi8qKiovIH0sXG4vKiAxOTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdHZhciBQSTIgPSBleHBvcnRzLlBJMiA9IE1hdGguUEkgKiAyO1xuXHR2YXIgSEFMRlBJID0gZXhwb3J0cy5IQUxGUEkgPSBNYXRoLlBJICogMC41O1xuXHR2YXIgRVBTSUxPTiA9IGV4cG9ydHMuRVBTSUxPTiA9IDEuMGUtNjtcblxuLyoqKi8gfSxcbi8qIDE5OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX0Jhc2VUcmFuc2Zvcm1Db21wb25lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5NSk7XG5cdFxuXHR2YXIgX0Jhc2VUcmFuc2Zvcm1Db21wb25lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQmFzZVRyYW5zZm9ybUNvbXBvbmVudCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgUm90YXRpb25BbmNob3IgPSBmdW5jdGlvbiAoX0Jhc2VUcmFuc2Zvcm1Db21wb25lKSB7XG5cdCAgICBfaW5oZXJpdHMoUm90YXRpb25BbmNob3IsIF9CYXNlVHJhbnNmb3JtQ29tcG9uZSk7XG5cdFxuXHQgICAgZnVuY3Rpb24gUm90YXRpb25BbmNob3IodHJhbnNmb3JtKSB7XG5cdCAgICAgICAgdmFyIHggPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzFdO1xuXHQgICAgICAgIHZhciB5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gMCA6IGFyZ3VtZW50c1syXTtcblx0XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdGF0aW9uQW5jaG9yKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihSb3RhdGlvbkFuY2hvcikuY2FsbCh0aGlzLCB0cmFuc2Zvcm0sIHgsIHkpKTtcblx0ICAgIH1cblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoUm90YXRpb25BbmNob3IsIFt7XG5cdCAgICAgICAga2V5OiAnYWRkUHJvcGVydGllcycsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFByb3BlcnRpZXModGFyZ2V0KSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgICAgICAgaWYgKCF0YXJnZXQuaGFzT3duUHJvcGVydHkoJ3JvdGF0aW9uQW5jaG9yJykpIHtcblx0ICAgICAgICAgICAgICAgIHRhcmdldC5yb3RhdGlvbkFuY2hvciA9IHt9O1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQucm90YXRpb25BbmNob3IsIHtcblx0XG5cdCAgICAgICAgICAgICAgICAneCc6IHtcblx0ICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmdldFgoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuc2V0WCh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSxcblx0XG5cdCAgICAgICAgICAgICAgICAneSc6IHtcblx0ICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmdldFkoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuc2V0WSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXHRcblx0ICAgIHJldHVybiBSb3RhdGlvbkFuY2hvcjtcblx0fShfQmFzZVRyYW5zZm9ybUNvbXBvbmVudDIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBSb3RhdGlvbkFuY2hvcjtcblxuLyoqKi8gfSxcbi8qIDIwMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBTZXRUcmFuc2Zvcm1Ub0NvbnRleHQ7XG5cdGZ1bmN0aW9uIFNldFRyYW5zZm9ybVRvQ29udGV4dCh0cmFuc2Zvcm0sIGNvbnRleHQpIHtcblx0ICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1syXTtcblx0XG5cdFxuXHQgICAgaWYgKHRyYW5zZm9ybS5kaXJ0eSkge1xuXHQgICAgICAgIHRyYW5zZm9ybS51cGRhdGVUcmFuc2Zvcm0oaSk7XG5cdCAgICB9XG5cdFxuXHQgICAgY29udGV4dC5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtLmxvY2FsWzBdLCAvLyBzY2FsZSB4XG5cdCAgICB0cmFuc2Zvcm0ubG9jYWxbMV0sIC8vIHNoZWFyIHlcblx0ICAgIHRyYW5zZm9ybS5sb2NhbFsyXSwgLy8gc2hlYXIgeFxuXHQgICAgdHJhbnNmb3JtLmxvY2FsWzNdLCAvLyBzY2FsZSB5XG5cdCAgICB0cmFuc2Zvcm0ubG9jYWxbNF0sIC8vIHRyYW5zbGF0ZSB4XG5cdCAgICB0cmFuc2Zvcm0ubG9jYWxbNV0gLy8gdHJhbnNsYXRlIHlcblx0ICAgICk7XG5cdH1cblxuLyoqKi8gfVxuLyoqKioqKi8gXSlcbn0pO1xuO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGdhbWUuanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIDFiNmY1OGExNzc0NTA4MGYwMDFhXG4gKiovIiwiaW1wb3J0ICogYXMgbmFubyBmcm9tICcuL25hbm8nO1xyXG5cclxuZXhwb3J0IHtcclxuICAgIG5hbm9cclxufTtcclxuXHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2dhbWUvaW5kZXguanNcbiAqKi8iLCIvLyAgIE5lZWQgdG8gYWRkIGluIGEgQ2FudmFzUG9vbCB0aGF0IHNldHMgYSBwYXJlbnQsIGJ1dCB0aGF0IHdpbGwgYmUgb25lXHJcbi8vICAgbGF5ZXIgdXAgZnJvbSB0aGlzXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAod2lkdGggPSAyNTYsIGhlaWdodCA9IDI1NiwgaWQgPSAnJykge1xyXG5cclxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG5cclxuICAgIGlmIChpZCAhPT0gJycpXHJcbiAgICB7XHJcbiAgICAgICAgY2FudmFzLmlkID0gaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG5cclxuICAgIHJldHVybiBjYW52YXM7XHJcblxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2NhbnZhcy9DYW52YXMuanNcbiAqKi8iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBHZXRDb250ZXh0IChjYW52YXMsIG9wdGlvbnMpIHtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIG9wdGlvbnMpIHx8IFxyXG4gICAgICAgIG51bGxcclxuICAgICk7XHJcblxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2NhbnZhcy9HZXRDb250ZXh0LmpzXG4gKiovIiwiXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlc2V0VHJhbnNmb3JtIChjb250ZXh0KSB7XHJcblxyXG4gICAgY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XHJcblxyXG4gICAgcmV0dXJuIGNvbnRleHQ7XHJcbiAgICBcclxufVxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2NhbnZhcy9SZXNldFRyYW5zZm9ybS5qc1xuICoqLyIsIi8qKlxyXG4qIEZpbGxzIHRoZSBCaXRtYXBEYXRhIHdpdGggdGhlIGdpdmVuIGNvbG9yLlxyXG4qXHJcbiogQG1ldGhvZCBQaGFzZXIuQml0bWFwRGF0YSNmaWxsXHJcbiogQHBhcmFtIHtudW1iZXJ9IHIgLSBUaGUgcmVkIGNvbG9yIHZhbHVlLCBiZXR3ZWVuIDAgYW5kIDB4RkYgKDI1NSkuXHJcbiogQHBhcmFtIHtudW1iZXJ9IGcgLSBUaGUgZ3JlZW4gY29sb3IgdmFsdWUsIGJldHdlZW4gMCBhbmQgMHhGRiAoMjU1KS5cclxuKiBAcGFyYW0ge251bWJlcn0gYiAtIFRoZSBibHVlIGNvbG9yIHZhbHVlLCBiZXR3ZWVuIDAgYW5kIDB4RkYgKDI1NSkuXHJcbiogQHBhcmFtIHtudW1iZXJ9IFthPTFdIC0gVGhlIGFscGhhIGNvbG9yIHZhbHVlLCBiZXR3ZWVuIDAgYW5kIDEuXHJcbiogQHJldHVybiB7UGhhc2VyLkJpdG1hcERhdGF9IFRoaXMgQml0bWFwRGF0YSBvYmplY3QgZm9yIG1ldGhvZCBjaGFpbmluZy5cclxuKi9cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENsZWFyIChjb250ZXh0LCBmaWxsID0gZmFsc2UsIHIgPSAwLCBnID0gMCwgYiA9IDAsIGEgPSAxKSB7XHJcblxyXG4gICAgY29uc3QgY2FudmFzID0gY29udGV4dC5jYW52YXM7XHJcblxyXG4gICAgaWYgKCFmaWxsKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgb2xkU3R5bGUgPSBjb250ZXh0LmZpbGxTdHlsZTtcclxuXHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSAncmdiYSgnICsgciArICcsJyArIGcgKyAnLCcgKyBiICsgJywnICsgYSArICcpJztcclxuXHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9sZFN0eWxlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjb250ZXh0O1xyXG4gICAgXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvY2FudmFzL2dyYXBoaWNzL0NsZWFyLmpzXG4gKiovIiwiLy8gIENvbmZpZyBMb2FkZXJcclxuXHJcbmxldCBkYXRhID0ge307XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb25maWcgKC4uLnNldHRpbmdzKSB7XHJcblxyXG4gICAgbGV0IGNvbmZpZyA9IHtcclxuXHJcbiAgICAgICAgYWRkOiBmdW5jdGlvbiAoc2V0dGluZykge1xyXG5cclxuICAgICAgICAgICAgZGF0YVtzZXR0aW5nLm5hbWVdID0gKHNldHRpbmcuaGFzT3duUHJvcGVydHkoJ3ZhbHVlJykpID8gc2V0dGluZy52YWx1ZSA6IHNldHRpbmcucHJvcGVydGllcztcclxuXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSkge1xyXG5cclxuICAgICAgICAgICAgZGVsZXRlIGRhdGFbbmFtZV07XHJcblxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHJlcXVpcmU6IGZ1bmN0aW9uICguLi5zZXR0aW5ncykge1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgc2V0dGluZyBvZiBzZXR0aW5ncylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KHNldHRpbmcubmFtZSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmFkZChzZXR0aW5nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChrZXkgJiYgZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgZm9yIChsZXQgc2V0dGluZyBvZiBzZXR0aW5ncylcclxuICAgIHtcclxuICAgICAgICBjb25maWcuYWRkKHNldHRpbmcpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjb25maWc7XHJcblxyXG59XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvY29uZmlnL0NvbmZpZy5qc1xuICoqLyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERpbWVuc2lvbnMgKHdpZHRoID0gODAwLCBoZWlnaHQgPSA2MDApIHtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6ICdkaW1lbnNpb25zJyxcclxuICAgICAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxufVxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2NvbmZpZy9zZXR0aW5ncy9EaW1lbnNpb25zLmpzXG4gKiovIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRnJhbWVSYXRlICh2YWx1ZSA9IDYwKSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiAnZnJhbWVSYXRlJyxcclxuICAgICAgICB2YWx1ZVxyXG4gICAgfTtcclxuXHJcbn1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9jb25maWcvc2V0dGluZ3MvRnJhbWVSYXRlLmpzXG4gKiovIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGFyZW50ICh2YWx1ZSA9ICcnKSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiAncGFyZW50JyxcclxuICAgICAgICB2YWx1ZVxyXG4gICAgfTtcclxuXHJcbn1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9jb25maWcvc2V0dGluZ3MvUGFyZW50LmpzXG4gKiovIiwiaW1wb3J0IEJhc2VTdGF0ZSBmcm9tICcuL1N0YXRlLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFN0YXRlIChzZXR0aW5ncykge1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogJ3N0YXRlJyxcclxuICAgICAgICB2YWx1ZTogQmFzZVN0YXRlKHNldHRpbmdzKVxyXG4gICAgfTtcclxuXHJcbn1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9jb25maWcvc2V0dGluZ3MvU3RhdGUuanNcbiAqKi8iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBZGRUb0RPTSAoZWxlbWVudCwgcGFyZW50ID0gbnVsbCwgb3ZlcmZsb3dIaWRkZW4gPSB0cnVlKSB7XHJcblxyXG4gICAgbGV0IHRhcmdldDtcclxuXHJcbiAgICBpZiAocGFyZW50KVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0eXBlb2YgcGFyZW50ID09PSAnc3RyaW5nJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIGhvcGVmdWxseSBhbiBlbGVtZW50IElEXHJcbiAgICAgICAgICAgIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwYXJlbnQgPT09ICdvYmplY3QnICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIHF1aWNrIHRlc3QgZm9yIGEgSFRNTGVsZW1lbnRcclxuICAgICAgICAgICAgdGFyZ2V0ID0gcGFyZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBGYWxsYmFjaywgY292ZXJzIGFuIGludmFsaWQgSUQgYW5kIGEgbm9uIEhUTUxlbGVtZW50IG9iamVjdFxyXG4gICAgaWYgKCF0YXJnZXQpXHJcbiAgICB7XHJcbiAgICAgICAgdGFyZ2V0ID0gZG9jdW1lbnQuYm9keTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob3ZlcmZsb3dIaWRkZW4gJiYgdGFyZ2V0LnN0eWxlKVxyXG4gICAge1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gICAgfVxyXG5cclxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuXHJcbiAgICByZXR1cm4gZWxlbWVudDtcclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZG9tL0FkZFRvRE9NLmpzXG4gKiovIiwibGV0IGlzQm9vdGVkID0gZmFsc2U7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBCb290ICgpIHtcclxuXHJcbiAgICBpZiAoaXNCb290ZWQpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShcclxuICAgICAgICAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlzQm9vdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2sgKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkZXZpY2VyZWFkeScsIGNoZWNrLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgY2hlY2ssIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgY2hlY2ssIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5ib2R5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrLCAyMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGNoZWNrLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGNoZWNrLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICk7XHJcbiAgICBcclxufVxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2RvbS9Cb290LmpzXG4gKiovIiwiaW1wb3J0IE5PT1AgZnJvbSAnLi4vc3lzdGVtL05PT1AuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAocm9vdCwgZm9yY2VTZXRUaW1lT3V0ID0gZmFsc2UpIHtcclxuXHJcbiAgICAgICAgdGhpcy5yb290ID0gcm9vdDtcclxuICAgICAgICB0aGlzLmZvcmNlU2V0VGltZU91dCA9IGZvcmNlU2V0VGltZU91dDtcclxuXHJcbiAgICAgICAgLy8gIElmIHRoZXJlJ3Mgbm8gd2luZG93IG9iamVjdCBvciBSQUYgdGhlbiB3ZSBoYXZlIHRvIHVzZSBTVCBhbnl3YXlcclxuICAgICAgICBpZiAoIWZvcmNlU2V0VGltZU91dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9yY2VTZXRUaW1lT3V0ID0gIXRoaXMubm9ybWFsaXplUmFmKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fdGltZU91dElEID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9jYWxsYmFjayA9IE5PT1A7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vICBVbmRlciBTZXRUaW1lb3V0IHRoZSBjYWxsYmFjayBtdXN0IHJldHVybiB0aGUgbXMgdmFsdWUgb2Ygd2hlbiB0byBydW4gdGhlIG5leHQgdXBkYXRlXHJcbiAgICBzdGFydCAoY2FsbGJhY2spIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9ydW5uaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fcnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrID0gY2FsbGJhY2s7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy51c2luZ1NldFRpbWVvdXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVPdXRJRCA9IHRoaXMucm9vdC5zZXRUaW1lb3V0KG5vdyA9PiB0aGlzLnVwZGF0ZVNldFRpbWVvdXQoRGF0ZS5ub3coKSksIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGltZU91dElEID0gdGhpcy5yb290LnJlcXVlc3RBbmltYXRpb25GcmFtZShub3cgPT4gdGhpcy51cGRhdGVSQUYobm93KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVJBRiAobm93KSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrKG5vdyk7XHJcblxyXG4gICAgICAgIHRoaXMuX3RpbWVPdXRJRCA9IHRoaXMucm9vdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobm93ID0+IHRoaXMudXBkYXRlUkFGKG5vdykpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTZXRUaW1lb3V0IChub3cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fdGltZU91dElEID0gdGhpcy5yb290LnNldFRpbWVvdXQobm93ID0+IHRoaXMudXBkYXRlU2V0VGltZW91dChEYXRlLm5vdygpKSwgMCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHN0b3AgKCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fcnVubmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVzaW5nU2V0VGltZW91dClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb290LmNsZWFyVGltZW91dCh0aGlzLl90aW1lT3V0SUQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb290LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX3RpbWVPdXRJRCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3J1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5vcm1hbGl6ZVJhZiAoKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJvb3QucmVxdWVzdEFuaW1hdGlvbkZyYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHZlbmRvciBvZiBbJ21zJywgJ21veicsICd3ZWJraXQnLCAnbyddKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yb290W3ZlbmRvcl0gKyAnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3QucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gdGhpcy5yb290W3ZlbmRvcl0gKyAnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3QuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB0aGlzLnJvb3RbdmVuZG9yXSArICdDYW5jZWxBbmltYXRpb25GcmFtZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVzaW5nU2V0VGltZW91dCAoKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmZvcmNlU2V0VGltZU91dDtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVzaW5nUkFGICgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuICF0aGlzLmZvcmNlU2V0VGltZU91dDtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzUnVubmluZyAoKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9ydW5uaW5nO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzZXQgaXNSdW5uaW5nICh2YWx1ZSkge1xyXG5cclxuICAgICAgICBpZiAodmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2RvbS9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanNcbiAqKi8iLCIvLyBJbiBhbGwgbWFqb3IgYnJvd3NlcnMsIHJlcGxhY2luZyBub24tc3BlY2lmaWVkIGZ1bmN0aW9ucyB3aXRoIE5PT1BzXHJcbi8vIHNlZW1zIHRvIGJlIGFzIGZhc3Qgb3Igc2xpZ2h0bHkgZmFzdGVyIHRoYW4gdXNpbmcgY29uZGl0aW9ucyB0byBvbmx5XHJcbi8vIGNhbGwgdGhlIGZ1bmN0aW9ucyBpZiB0aGV5IGFyZSBzcGVjaWZpZWQuIFRoaXMgaXMgcHJvYmFibHkgZHVlIHRvIGVtcHR5XHJcbi8vIGZ1bmN0aW9ucyBiZWluZyBvcHRpbWl6ZWQgYXdheS4gaHR0cDovL2pzcGVyZi5jb20vbm9vcC12cy1jb25kaXRpb25cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE5PT1AgKCkge1xyXG5cclxuICAgIC8vICBUaGF0J3MgcmlnaHQsIHRoZXJlJ3Mgbm90aGluZyBoZXJlLlxyXG4gICAgXHJcbn1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9zeXN0ZW0vTk9PUC5qc1xuICoqLyIsImltcG9ydCBHYW1lIGZyb20gJy4vR2FtZS5qcyc7XHJcbmltcG9ydCBTcHJpdGUgZnJvbSAnLi9TcHJpdGUuanMnO1xyXG5cclxuZXhwb3J0IHtcclxuICAgIEdhbWUsXHJcbiAgICBTcHJpdGVcclxufTtcclxuXHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2dhbWUvbmFuby9pbmRleC5qc1xuICoqLyIsImltcG9ydCBDb25maWcgZnJvbSAnLi4vLi4vY29uZmlnL0NvbmZpZy5qcyc7XHJcbmltcG9ydCBEaW1lbnNpb25zIGZyb20gJy4uLy4uL2NvbmZpZy9zZXR0aW5ncy9EaW1lbnNpb25zLmpzJztcclxuaW1wb3J0IFBhcmVudCBmcm9tICcuLi8uLi9jb25maWcvc2V0dGluZ3MvUGFyZW50LmpzJztcclxuaW1wb3J0IEZyYW1lUmF0ZSBmcm9tICcuLi8uLi9jb25maWcvc2V0dGluZ3MvRnJhbWVSYXRlLmpzJztcclxuaW1wb3J0IFN0YXRlIGZyb20gJy4uLy4uL2NvbmZpZy9zZXR0aW5ncy9TdGF0ZS5qcyc7XHJcbmltcG9ydCBCb290IGZyb20gJy4uLy4uL2RvbS9Cb290LmpzJztcclxuaW1wb3J0IEJhbm5lciBmcm9tICcuLi8uLi91dGlscy9CYW5uZXIuanMnO1xyXG5pbXBvcnQgTWFpbkxvb3AgZnJvbSAnLi4vLi4vc3lzdGVtL01haW5Mb29wLmpzJztcclxuaW1wb3J0IENhbnZhcyBmcm9tICcuLi8uLi9jYW52YXMvQ2FudmFzLmpzJztcclxuaW1wb3J0IEdldENvbnRleHQgZnJvbSAnLi4vLi4vY2FudmFzL0dldENvbnRleHQuanMnO1xyXG5pbXBvcnQgQWRkVG9ET00gZnJvbSAnLi4vLi4vZG9tL0FkZFRvRE9NLmpzJztcclxuaW1wb3J0IENsZWFyIGZyb20gJy4uLy4uL2NhbnZhcy9ncmFwaGljcy9DbGVhci5qcyc7XHJcbmltcG9ydCBMb2FkZXIgZnJvbSAnLi4vLi4vbG9hZGVyL0xvYWRlci5qcyc7XHJcbmltcG9ydCBSZXNldFRyYW5zZm9ybSBmcm9tICcuLi8uLi9jYW52YXMvUmVzZXRUcmFuc2Zvcm0uanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKGNvbmZpZyA9IENvbmZpZygpKSB7XHJcblxyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG5cclxuICAgICAgICB0aGlzLmNvbmZpZy5yZXF1aXJlKFxyXG4gICAgICAgICAgICBEaW1lbnNpb25zKCksXHJcbiAgICAgICAgICAgIFBhcmVudCgpLFxyXG4gICAgICAgICAgICBGcmFtZVJhdGUoKSxcclxuICAgICAgICAgICAgU3RhdGUoKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FudmFzID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubG9hZCA9IG51bGw7XHJcblxyXG4gICAgICAgIEJvb3QoKS50aGVuKCgpID0+IHRoaXMuaW5pdCgpKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCAoKSB7XHJcblxyXG4gICAgICAgIEJhbm5lcih0aGlzLmNvbmZpZy5nZXQoJ2dhbWVUaXRsZScpLm5hbWUsIHRoaXMuY29uZmlnLmdldCgnZ2FtZVRpdGxlJykudXJsKTtcclxuXHJcbiAgICAgICAgbGV0IHNpemUgPSB0aGlzLmNvbmZpZy5nZXQoJ2RpbWVuc2lvbnMnKTtcclxuXHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBDYW52YXMoc2l6ZS53aWR0aCwgc2l6ZS5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IEdldENvbnRleHQodGhpcy5jYW52YXMpO1xyXG5cclxuICAgICAgICBBZGRUb0RPTSh0aGlzLmNhbnZhcywgdGhpcy5jb25maWcuZ2V0KCdwYXJlbnQnKSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLmNvbmZpZy5nZXQoJ3N0YXRlJyk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZCA9IG5ldyBMb2FkZXIoKTtcclxuXHJcbiAgICAgICAgLy8gIExpbmsgc3lzdGVtcyB0byB0aGUgU3RhdGVcclxuICAgICAgICB0aGlzLnN0YXRlLmNhbnZhcyA9IHRoaXMuY2FudmFzO1xyXG4gICAgICAgIHRoaXMuc3RhdGUuY29udGV4dCA9IHRoaXMuY29udGV4dDtcclxuICAgICAgICB0aGlzLnN0YXRlLmxvYWQgPSB0aGlzLmxvYWQ7XHJcblxyXG4gICAgICAgIC8vICBQb3B1bGF0ZSB0aGUgTG9hZGVyXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5pbml0KCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5wcmVsb2FkKCk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZC5zdGFydCgpLnRoZW4oZmlsZXMgPT4gdGhpcy5zdGFydChmaWxlcykpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzdGFydCAoZmlsZXMpIHtcclxuXHJcbiAgICAgICAgLy8gIEFkZCB0byBjYWNoZT9cclxuICAgICAgICB0aGlzLnN0YXRlLmNyZWF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLmxvb3AgPSBuZXcgTWFpbkxvb3AodGhpcy5jb25maWcuZ2V0KCdmcmFtZVJhdGUnKSk7XHJcblxyXG4gICAgICAgIHRoaXMubG9vcC5iZWdpbiA9ICh0ID0+IHRoaXMuYmVnaW4odCkpO1xyXG4gICAgICAgIHRoaXMubG9vcC51cGRhdGUgPSAoZGVsdGEgPT4gdGhpcy51cGRhdGUoZGVsdGEpKTtcclxuICAgICAgICB0aGlzLmxvb3AuZHJhdyA9ICh0ID0+IHRoaXMucmVuZGVyKHQpKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb29wLnN0YXJ0KCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGJlZ2luICgpIHtcclxuXHJcbiAgICAgICAgUmVzZXRUcmFuc2Zvcm0odGhpcy5jb250ZXh0KTtcclxuXHJcbiAgICAgICAgQ2xlYXIodGhpcy5jb250ZXh0LCBmYWxzZSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSAoZGVsdGEpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGUoZGVsdGEpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIgKHQpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5wcmVSZW5kZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5yZW5kZXIodCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUucG9zdFJlbmRlcigpO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZ2FtZS9uYW5vL0dhbWUuanNcbiAqKi8iLCJpbXBvcnQgVmVyc2lvbiBmcm9tICcuLi9WZXJzaW9uLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEJhbm5lciAodGl0bGUsIHVybCkge1xyXG5cclxuICAgIGxldCBtc2cgPSAnJWMgJWMgJWMgJWMgJWMgICc7XHJcblxyXG4gICAgaWYgKHRpdGxlKVxyXG4gICAge1xyXG4gICAgICAgIG1zZyA9IG1zZy5jb25jYXQodGl0bGUgKyAnIHBvd2VyZWQgYnkgJyk7XHJcbiAgICB9XHJcblxyXG4gICAgbXNnID0gbXNnLmNvbmNhdCgnTGF6ZXIgdicgKyBWZXJzaW9uLm1ham9yICsgJy4nICsgVmVyc2lvbi5taW5vcik7XHJcblxyXG4gICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKVxyXG4gICAge1xyXG4gICAgICAgIG1zZyA9IG1zZy5jb25jYXQoJyAtIGh0dHBzOi8vbGF6ZXJqcy5pbycpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodXJsICE9PSAnJylcclxuICAgIHtcclxuICAgICAgICBtc2cgPSBtc2cuY29uY2F0KCcgLSAnICsgdXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBtc2cgPSBtc2cuY29uY2F0KCcgICcpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIFtcclxuICAgICAgICBtc2csXHJcbiAgICAgICAgJ2JhY2tncm91bmQ6ICNmZjAwMDAnLFxyXG4gICAgICAgICdiYWNrZ3JvdW5kOiAjZmZmZjAwJyxcclxuICAgICAgICAnYmFja2dyb3VuZDogIzAwZmYwMCcsXHJcbiAgICAgICAgJ2JhY2tncm91bmQ6ICMwMGZmZmYnLFxyXG4gICAgICAgICdjb2xvcjogI2ZmZmZmZjsgYmFja2dyb3VuZDogIzAwMDsnXHJcbiAgICBdKTtcclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvdXRpbHMvQmFubmVyLmpzXG4gKiovIiwiY29uc3QgVmVyc2lvbiA9IHtcclxuICAgIG1ham9yOiAxLFxyXG4gICAgbWlub3I6IDIsXHJcbiAgICBwb2ludDogMyxcclxuICAgIGJ1aWxkOiAxLFxyXG4gICAgZGF0ZTogJzEydGggSmFudWFyeSAyMDE2J1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgVmVyc2lvbjtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9WZXJzaW9uLmpzXG4gKiovIiwiaW1wb3J0IFJlcXVlc3RBbmltYXRpb25GcmFtZSBmcm9tICcuLi9kb20vUmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzJztcclxuaW1wb3J0IE5PT1AgZnJvbSAnLi9OT09QLmpzJztcclxuXHJcbi8vICBNeSB0aGFua3MgdG8gSXNhYWMgU3VraW4gZm9yIHNvbWUgb2YgdGhlIGNvbmNlcHRzIHVzZWQgaW4gdGhpcyBjbGFzc1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFpbkxvb3Age1xyXG5cclxuICAgIGNvbnN0cnVjdG9yIChmcmFtZXJhdGUgPSA2MCkge1xyXG5cclxuICAgICAgICAvLyAgTW92ZSB0byBleHRlcm5hbCBmaWxlIG9uY2UgdGVzdGVkXHJcbiAgICAgICAgdGhpcy5nZXRUaW1lID0gRGF0ZS5ub3c7XHJcblxyXG4gICAgICAgIGlmICh3aW5kb3cucGVyZm9ybWFuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAod2luZG93LnBlcmZvcm1hbmNlLm5vdylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRUaW1lID0gKCkgPT4geyByZXR1cm4gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAod2luZG93LnBlcmZvcm1hbmNlLndlYmtpdE5vdylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRUaW1lID0gKCkgPT4geyByZXR1cm4gd2luZG93LnBlcmZvcm1hbmNlLndlYmtpdE5vdygpIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGltZXN0ZXAgPSAxMDAwIC8gZnJhbWVyYXRlO1xyXG4gICAgICAgIHRoaXMucGh5c2ljc1N0ZXAgPSAxIC8gZnJhbWVyYXRlO1xyXG5cclxuICAgIC8vIFRoZSBjdW11bGF0aXZlIGFtb3VudCBvZiBpbi1hcHAgdGltZSB0aGF0IGhhc24ndCBiZWVuIHNpbXVsYXRlZCB5ZXQuXHJcbiAgICAvLyBTZWUgdGhlIGNvbW1lbnRzIGluc2lkZSBhbmltYXRlKCkgZm9yIGRldGFpbHMuXHJcbiAgICAgICAgdGhpcy5mcmFtZURlbHRhID0gMDtcclxuXHJcbiAgICAvLyBUaGUgdGltZXN0YW1wIGluIG1pbGxpc2Vjb25kcyBvZiB0aGUgbGFzdCB0aW1lIHRoZSBtYWluIGxvb3Agd2FzIHJ1bi5cclxuICAgIC8vIFVzZWQgdG8gY29tcHV0ZSB0aGUgdGltZSBlbGFwc2VkIGJldHdlZW4gZnJhbWVzLlxyXG4gICAgICAgIHRoaXMubGFzdEZyYW1lVGltZU1zID0gMDtcclxuXHJcbiAgICAvLyBBbiBleHBvbmVudGlhbCBtb3ZpbmcgYXZlcmFnZSBvZiB0aGUgZnJhbWVzIHBlciBzZWNvbmQuXHJcbiAgICAgICAgdGhpcy5mcHMgPSA2MDtcclxuXHJcbiAgICAvLyBUaGUgdGltZXN0YW1wIChpbiBtaWxsaXNlY29uZHMpIG9mIHRoZSBsYXN0IHRpbWUgdGhlIGBmcHNgIG1vdmluZ1xyXG4gICAgLy8gYXZlcmFnZSB3YXMgdXBkYXRlZC5cclxuICAgICAgICB0aGlzLmxhc3RGcHNVcGRhdGUgPSAwO1xyXG5cclxuICAgIC8vIFRoZSBudW1iZXIgb2YgZnJhbWVzIGRlbGl2ZXJlZCBpbiB0aGUgY3VycmVudCBzZWNvbmQuXHJcbiAgICAgICAgdGhpcy5mcmFtZXNUaGlzU2Vjb25kID0gMDtcclxuXHJcbiAgICAvLyBUaGUgbnVtYmVyIG9mIHRpbWVzIHVwZGF0ZSgpIGlzIGNhbGxlZCBpbiBhIGdpdmVuIGZyYW1lLiBUaGlzIGlzIG9ubHlcclxuICAgIC8vIHJlbGV2YW50IGluc2lkZSBvZiBhbmltYXRlKCksIGJ1dCBhIHJlZmVyZW5jZSBpcyBoZWxkIGV4dGVybmFsbHkgc28gdGhhdFxyXG4gICAgLy8gdGhpcyB2YXJpYWJsZSBpcyBub3QgbWFya2VkIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gZXZlcnkgdGltZSB0aGUgbWFpblxyXG4gICAgLy8gbG9vcCBydW5zLlxyXG4gICAgICAgIHRoaXMubnVtVXBkYXRlU3RlcHMgPSAwO1xyXG5cclxuICAgIC8vIFRoZSBtaW5pbXVtIGFtb3VudCBvZiB0aW1lIGluIG1pbGxpc2Vjb25kcyB0aGF0IG11c3QgcGFzcyBzaW5jZSB0aGUgbGFzdFxyXG4gICAgLy8gZnJhbWUgd2FzIGV4ZWN1dGVkIGJlZm9yZSBhbm90aGVyIGZyYW1lIGNhbiBiZSBleGVjdXRlZC4gVGhlXHJcbiAgICAvLyBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIGNhcHMgdGhlIEZQUyAodGhlIGRlZmF1bHQgb2YgemVybyBtZWFucyB0aGVyZSBpc1xyXG4gICAgLy8gbm8gY2FwKS5cclxuICAgICAgICB0aGlzLm1pbkZyYW1lRGVsYXkgPSAwO1xyXG5cclxuICAgIC8vIFdoZXRoZXIgdGhlIG1haW4gbG9vcCBpcyBydW5uaW5nLlxyXG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xyXG5cclxuICAgIC8vIGB0cnVlYCBpZiBgTWFpbkxvb3Auc3RhcnQoKWAgaGFzIGJlZW4gY2FsbGVkIGFuZCB0aGUgbW9zdCByZWNlbnQgdGltZSBpdFxyXG4gICAgLy8gd2FzIGNhbGxlZCBoYXMgbm90IGJlZW4gZm9sbG93ZWQgYnkgYSBjYWxsIHRvIGBNYWluTG9vcC5zdG9wKClgLiBUaGlzIGlzXHJcbiAgICAvLyBkaWZmZXJlbnQgdGhhbiBgcnVubmluZ2AgYmVjYXVzZSB0aGVyZSBpcyBhIGRlbGF5IG9mIGEgZmV3IG1pbGxpc2Vjb25kc1xyXG4gICAgLy8gYWZ0ZXIgYE1haW5Mb29wLnN0YXJ0KClgIGlzIGNhbGxlZCBiZWZvcmUgdGhlIGFwcGxpY2F0aW9uIGlzIGNvbnNpZGVyZWRcclxuICAgIC8vIFwicnVubmluZy5cIiBUaGlzIGRlbGF5IGlzIGR1ZSB0byB3YWl0aW5nIGZvciB0aGUgbmV4dCBmcmFtZS5cclxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBXaGV0aGVyIHRoZSBzaW11bGF0aW9uIGhhcyBmYWxsZW4gdG9vIGZhciBiZWhpbmQgcmVhbCB0aW1lLlxyXG4gICAgLy8gU3BlY2lmaWNhbGx5LCBgcGFuaWNgIHdpbGwgYmUgc2V0IHRvIGB0cnVlYCBpZiB0b28gbWFueSB1cGRhdGVzIG9jY3VyIGluXHJcbiAgICAvLyBvbmUgZnJhbWUuIFRoaXMgaXMgb25seSByZWxldmFudCBpbnNpZGUgb2YgYW5pbWF0ZSgpLCBidXQgYSByZWZlcmVuY2UgaXNcclxuICAgIC8vIGhlbGQgZXh0ZXJuYWxseSBzbyB0aGF0IHRoaXMgdmFyaWFibGUgaXMgbm90IG1hcmtlZCBmb3IgZ2FyYmFnZVxyXG4gICAgLy8gY29sbGVjdGlvbiBldmVyeSB0aW1lIHRoZSBtYWluIGxvb3AgcnVucy5cclxuICAgICAgICB0aGlzLnBhbmljID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIEEgZnVuY3Rpb24gdGhhdCBydW5zIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIG1haW4gbG9vcC5cclxuICAgICAgICAvLyBTZWUgYE1haW5Mb29wLnNldEJlZ2luKClgIGZvciBkZXRhaWxzLlxyXG4gICAgICAgIHRoaXMuYmVnaW4gPSBOT09QO1xyXG5cclxuICAgICAgICAvLyBBIGZ1bmN0aW9uIHRoYXQgcnVucyB1cGRhdGVzIChpLmUuIEFJIGFuZCBwaHlzaWNzKS5cclxuICAgICAgICAvLyBTZWUgYE1haW5Mb29wLnNldFVwZGF0ZSgpYCBmb3IgZGV0YWlscy5cclxuICAgICAgICB0aGlzLnVwZGF0ZSA9IE5PT1A7XHJcblxyXG4gICAgICAgIC8vIEEgZnVuY3Rpb24gdGhhdCBkcmF3cyB0aGluZ3Mgb24gdGhlIHNjcmVlbi5cclxuICAgICAgICAvLyBTZWUgYE1haW5Mb29wLnNldERyYXcoKWAgZm9yIGRldGFpbHMuXHJcbiAgICAgICAgdGhpcy5kcmF3ID0gTk9PUDtcclxuXHJcbiAgICAgICAgLy8gQSBmdW5jdGlvbiB0aGF0IHJ1bnMgYXQgdGhlIGVuZCBvZiB0aGUgbWFpbiBsb29wLlxyXG4gICAgICAgIC8vIFNlZSBgTWFpbkxvb3Auc2V0RW5kKClgIGZvciBkZXRhaWxzLlxyXG4gICAgICAgIHRoaXMuZW5kID0gTk9PUDtcclxuXHJcbiAgICAgICAgdGhpcy5yYWYgPSBuZXcgUmVxdWVzdEFuaW1hdGlvbkZyYW1lKHdpbmRvdywgZmFsc2UpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXQgbWF4RlBTICgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIDEwMDAgLyB0aGlzLm1pbkZyYW1lRGVsYXk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldCBtYXhGUFMgKGZwcyA9IEluZmluaXR5KSB7XHJcblxyXG4gICAgICAgIGlmIChmcHMgPT09IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5taW5GcmFtZURlbGF5ID0gMTAwMCAvIGZwcztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0RnJhbWVEZWx0YSAoKSB7XHJcblxyXG4gICAgICAgIGxldCBvbGRGcmFtZURlbHRhID0gdGhpcy5mcmFtZURlbHRhO1xyXG5cclxuICAgICAgICB0aGlzLmZyYW1lRGVsdGEgPSAwO1xyXG5cclxuICAgICAgICByZXR1cm4gb2xkRnJhbWVEZWx0YTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnQgKCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGFydGVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMubGFzdEZyYW1lVGltZU1zID0gdGhpcy5nZXRUaW1lKCk7XHJcbiAgICAgICAgdGhpcy5sYXN0RnBzVXBkYXRlID0gdGhpcy5nZXRUaW1lKCk7XHJcbiAgICAgICAgdGhpcy5mcmFtZXNUaGlzU2Vjb25kID0gMDtcclxuXHJcbiAgICAgICAgLy8gIFRoaXMgc3RhcnRzIFJBRiBnb2luZyBhdXRvbWF0aWNhbGx5XHJcbiAgICAgICAgdGhpcy5yYWYuc3RhcnQobm93ID0+IHRoaXMuc3RlcChub3cpKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc3RlcCAodGltZXN0YW1wKSB7XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRpbWVzdGFtcCk7XHJcbiAgICAgICAgLy8gZGVidWdnZXI7XHJcblxyXG4gICAgICAgIC8vIFRocm90dGxlIHRoZSBmcmFtZSByYXRlIChpZiBtaW5GcmFtZURlbGF5IGlzIHNldCB0byBhIG5vbi16ZXJvIHZhbHVlIGJ5XHJcbiAgICAgICAgLy8gYE1haW5Mb29wLnNldE1heEFsbG93ZWRGUFMoKWApLlxyXG4gICAgICAgIGlmICh0aW1lc3RhbXAgPCB0aGlzLmxhc3RGcmFtZVRpbWVNcyArIHRoaXMubWluRnJhbWVEZWxheSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIFJ1biB0aGUgbG9vcCBhZ2FpbiB0aGUgbmV4dCB0aW1lIHRoZSBicm93c2VyIGlzIHJlYWR5IHRvIHJlbmRlci5cclxuICAgICAgICAgICAgLy8gcmFmSGFuZGxlID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmcmFtZURlbHRhIGlzIHRoZSBjdW11bGF0aXZlIGFtb3VudCBvZiBpbi1hcHAgdGltZSB0aGF0IGhhc24ndCBiZWVuXHJcbiAgICAgICAgLy8gc2ltdWxhdGVkIHlldC4gQWRkIHRoZSB0aW1lIHNpbmNlIHRoZSBsYXN0IGZyYW1lLiBXZSBuZWVkIHRvIHRyYWNrIHRvdGFsXHJcbiAgICAgICAgLy8gbm90LXlldC1zaW11bGF0ZWQgdGltZSAoYXMgb3Bwb3NlZCB0byBqdXN0IHRoZSB0aW1lIGVsYXBzZWQgc2luY2UgdGhlXHJcbiAgICAgICAgLy8gbGFzdCBmcmFtZSkgYmVjYXVzZSBub3QgYWxsIGFjdHVhbGx5IGVsYXBzZWQgdGltZSBpcyBndWFyYW50ZWVkIHRvIGJlXHJcbiAgICAgICAgLy8gc2ltdWxhdGVkIGVhY2ggZnJhbWUuIFNlZSB0aGUgY29tbWVudHMgYmVsb3cgZm9yIGRldGFpbHMuXHJcbiAgICAgICAgdGhpcy5mcmFtZURlbHRhICs9IHRpbWVzdGFtcCAtIHRoaXMubGFzdEZyYW1lVGltZU1zO1xyXG4gICAgICAgIHRoaXMubGFzdEZyYW1lVGltZU1zID0gdGltZXN0YW1wO1xyXG5cclxuICAgICAgICAvLyBSdW4gYW55IHVwZGF0ZXMgdGhhdCBhcmUgbm90IGRlcGVuZGVudCBvbiB0aW1lIGluIHRoZSBzaW11bGF0aW9uLiBTZWVcclxuICAgICAgICAvLyBgTWFpbkxvb3Auc2V0QmVnaW4oKWAgZm9yIGFkZGl0aW9uYWwgZGV0YWlscyBvbiBob3cgdG8gdXNlIHRoaXMuXHJcbiAgICAgICAgdGhpcy5iZWdpbih0aW1lc3RhbXAsIHRoaXMuZnJhbWVEZWx0YSk7XHJcbiAgICAgICAgLy8gdGhpcy5iZWdpbih0aGlzLmZyYW1lRGVsdGEpO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGhlIGVzdGltYXRlIG9mIHRoZSBmcmFtZSByYXRlLCBgZnBzYC4gRXZlcnkgc2Vjb25kLCB0aGUgbnVtYmVyXHJcbiAgICAgICAgLy8gb2YgZnJhbWVzIHRoYXQgb2NjdXJyZWQgaW4gdGhhdCBzZWNvbmQgYXJlIGluY2x1ZGVkIGluIGFuIGV4cG9uZW50aWFsXHJcbiAgICAgICAgLy8gbW92aW5nIGF2ZXJhZ2Ugb2YgYWxsIGZyYW1lcyBwZXIgc2Vjb25kLCB3aXRoIGFuIGFscGhhIG9mIDAuMjUuIFRoaXNcclxuICAgICAgICAvLyBtZWFucyB0aGF0IG1vcmUgcmVjZW50IHNlY29uZHMgYWZmZWN0IHRoZSBlc3RpbWF0ZWQgZnJhbWUgcmF0ZSBtb3JlIHRoYW5cclxuICAgICAgICAvLyBvbGRlciBzZWNvbmRzLlxyXG4gICAgICAgIGlmICh0aW1lc3RhbXAgPiB0aGlzLmxhc3RGcHNVcGRhdGUgKyAxMDAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gQ29tcHV0ZSB0aGUgbmV3IGV4cG9uZW50aWFsIG1vdmluZyBhdmVyYWdlIHdpdGggYW4gYWxwaGEgb2YgMC4yNS5cclxuICAgICAgICAgICAgLy8gVXNpbmcgY29uc3RhbnRzIGlubGluZSBpcyBva2F5IGhlcmUuXHJcbiAgICAgICAgICAgIHRoaXMuZnBzID0gMC4yNSAqIHRoaXMuZnJhbWVzVGhpc1NlY29uZCArIDAuNzUgKiB0aGlzLmZwcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMubGFzdEZwc1VwZGF0ZSA9IHRpbWVzdGFtcDtcclxuICAgICAgICAgICAgdGhpcy5mcmFtZXNUaGlzU2Vjb25kID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZnJhbWVzVGhpc1NlY29uZCsrO1xyXG5cclxuICAgICAgICB0aGlzLm51bVVwZGF0ZVN0ZXBzID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKHRoaXMuZnJhbWVEZWx0YSA+PSB0aGlzLnRpbWVzdGVwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy50aW1lc3RlcCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZyYW1lRGVsdGEgLT0gdGhpcy50aW1lc3RlcDtcclxuXHJcbiAgICAgICAgICAgIGlmICgrK3RoaXMubnVtVXBkYXRlU3RlcHMgPj0gMjQwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmljID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRyYXcodGhpcy5mcmFtZURlbHRhIC8gdGhpcy50aW1lc3RlcCk7XHJcblxyXG4gICAgICAgIC8vIFJ1biBhbnkgdXBkYXRlcyB0aGF0IGFyZSBub3QgZGVwZW5kZW50IG9uIHRpbWUgaW4gdGhlIHNpbXVsYXRpb24uIFNlZVxyXG4gICAgICAgIC8vIGBNYWluTG9vcC5zZXRFbmQoKWAgZm9yIGFkZGl0aW9uYWwgZGV0YWlscyBvbiBob3cgdG8gdXNlIHRoaXMuXHJcbiAgICAgICAgdGhpcy5lbmQodGhpcy5mcHMsIHRoaXMucGFuaWMpO1xyXG5cclxuICAgICAgICB0aGlzLnBhbmljID0gZmFsc2U7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHN0b3AgKCkge1xyXG5cclxuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5yYWYuc3RvcCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzUnVubmluZyAoKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnJ1bm5pbmc7XHJcblxyXG4gICAgfVxyXG4gICAgXHJcbn1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9zeXN0ZW0vTWFpbkxvb3AuanNcbiAqKi8iLCJpbXBvcnQgQmFzZUxvYWRlciBmcm9tICcuL0Jhc2VMb2FkZXIuanMnO1xyXG5pbXBvcnQgSW1hZ2VGaWxlIGZyb20gJy4vdHlwZXMvSW1hZ2VGaWxlLmpzJztcclxuaW1wb3J0IEpTT05GaWxlIGZyb20gJy4vdHlwZXMvSlNPTkZpbGUuanMnO1xyXG5pbXBvcnQgWE1MRmlsZSBmcm9tICcuL3R5cGVzL1hNTEZpbGUuanMnO1xyXG5pbXBvcnQgVGV4dEZpbGUgZnJvbSAnLi90eXBlcy9UZXh0RmlsZS5qcyc7XHJcbmltcG9ydCBHTFNMRmlsZSBmcm9tICcuL3R5cGVzL0dMU0xGaWxlLmpzJztcclxuaW1wb3J0IEJpbmFyeUZpbGUgZnJvbSAnLi90eXBlcy9CaW5hcnlGaWxlLmpzJztcclxuaW1wb3J0IEF0bGFzSlNPTkZpbGUgZnJvbSAnLi90eXBlcy9BdGxhc0pTT05GaWxlLmpzJztcclxuaW1wb3J0IEF0bGFzWE1MRmlsZSBmcm9tICcuL3R5cGVzL0F0bGFzWE1MRmlsZS5qcyc7XHJcblxyXG4vLyAgVGhpcyBpcyBvdXIgUGhhc2VyLWxpa2UgTG9hZGVyIGNsYXNzLiBZb3UgZG9uJ3QgaGF2ZSB0byB1c2UgaXQgOilcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvYWRlciBleHRlbmRzIEJhc2VMb2FkZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuXHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgaW1hZ2UgKGtleSwgdXJsID0gJycpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkRmlsZShJbWFnZUZpbGUoa2V5LCB1cmwpKTtcclxuXHJcbiAgICB9XHJcbiBcclxuICAgIGltYWdlcyAoa2V5cywgdXJscyA9IG51bGwpIHtcclxuXHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodXJscykpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uoa2V5c1tpXSwgdXJsc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlKGtleXNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgICB9XHJcblxyXG4gICAganNvbiAoa2V5LCB1cmwgPSAnJykge1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRGaWxlKEpTT05GaWxlKGtleSwgdXJsKSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHRleHQgKGtleSwgdXJsID0gJycpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkRmlsZShUZXh0RmlsZShrZXksIHVybCkpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnbHNsIChrZXksIHVybCA9ICcnKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZEZpbGUoR0xTTEZpbGUoa2V5LCB1cmwpKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc2hhZGVyIChrZXksIHVybCA9ICcnKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZEZpbGUoR0xTTEZpbGUoa2V5LCB1cmwpKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgeG1sIChrZXksIHVybCA9ICcnKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZEZpbGUoWE1MRmlsZShrZXksIHVybCkpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBiaW5hcnkgKGtleSwgdXJsID0gJycsIGNhbGxiYWNrID0gdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgICAgIGxldCBmaWxlID0gQmluYXJ5RmlsZShrZXksIHVybCk7XHJcblxyXG4gICAgICAgIGZpbGUucHJvY2Vzc0NhbGxiYWNrID0gY2FsbGJhY2s7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZEZpbGUoZmlsZSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGF0bGFzIChrZXksIHRleHR1cmVVUkwgPSAnJywgYXRsYXNVUkwgPSAnJywgYXRsYXNEYXRhID0gdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZEZpbGUoQXRsYXNKU09ORmlsZShrZXksIHRleHR1cmVVUkwsIGF0bGFzVVJMLCBhdGxhc0RhdGEpKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYXRsYXNYTUwgKGtleSwgdGV4dHVyZVVSTCA9ICcnLCBhdGxhc1VSTCA9ICcnLCBhdGxhc0RhdGEgPSB1bmRlZmluZWQpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkRmlsZShBdGxhc1hNTEZpbGUoa2V5LCB0ZXh0dXJlVVJMLCBhdGxhc1VSTCwgYXRsYXNEYXRhKSk7XHJcblxyXG4gICAgfVxyXG5cclxufVxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2xvYWRlci9Mb2FkZXIuanNcbiAqKi8iLCJpbXBvcnQgWEhSU2V0dGluZ3MgZnJvbSAnLi9YSFJTZXR0aW5ncy5qcyc7XHJcbmltcG9ydCBGaWxlLCAqIGFzIEZJTEUgZnJvbSAnLi9GaWxlLmpzJztcclxuXHJcbmV4cG9ydCBjb25zdCBQRU5ESU5HID0gMDtcclxuZXhwb3J0IGNvbnN0IExPQURJTkcgPSAxO1xyXG5leHBvcnQgY29uc3QgUFJPQ0VTU0lORyA9IDI7XHJcbmV4cG9ydCBjb25zdCBDT01QTEVURSA9IDM7XHJcbmV4cG9ydCBjb25zdCBGQUlMRUQgPSA0O1xyXG5leHBvcnQgY29uc3QgREVTVFJPWUVEID0gNTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VMb2FkZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5iYXNlVVJMID0gJyc7XHJcblxyXG4gICAgICAgIHRoaXMucGF0aCA9ICcnO1xyXG5cclxuICAgICAgICB0aGlzLnRhZyA9ICcnO1xyXG5cclxuICAgICAgICB0aGlzLmVuYWJsZVBhcmFsbGVsID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5tYXhQYXJhbGxlbERvd25sb2FkcyA9IDQ7XHJcblxyXG4gICAgICAgIC8vICB4aHIgc3BlY2lmaWMgZ2xvYmFsIHNldHRpbmdzIChjYW4gYmUgb3ZlcnJpZGRlbiBvbiBhIHBlci1maWxlIGJhc2lzKVxyXG4gICAgICAgIHRoaXMueGhyID0gWEhSU2V0dGluZ3MoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jcm9zc09yaWdpbiA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgdGhpcy5saXN0ID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuaW5mbGlnaHQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5mYWlsZWQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSBuZXcgU2V0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3N0YXRlID0gUEVORElORztcclxuICAgICAgICB0aGlzLl9yZXNvbHZlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX3JlamVjdCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHN0YXRlICgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzZXQgc3RhdGUgKHZhbHVlKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBDT01QTEVURSAmJiB0aGlzLl9yZXNvbHZlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMuZ2V0TG9hZGVkRmlsZXMoKSwgdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IEZBSUxFRCAmJiB0aGlzLl9yZWplY3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdCh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gIElzIHRoZSBMb2FkZXIgYWN0aXZlbHkgbG9hZGluZyAob3IgcHJvY2Vzc2luZyBsb2FkZWQgZmlsZXMpXHJcbiAgICBnZXQgaXNMb2FkaW5nICgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl9zdGF0ZSA9PT0gTE9BRElORyB8fCB0aGlzLl9zdGF0ZSA9PT0gUFJPQ0VTU0lORyk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vICBJcyB0aGUgTG9hZGVyIHJlYWR5IHRvIHN0YXJ0IGEgbmV3IGxvYWQ/XHJcbiAgICBnZXQgaXNSZWFkeSAoKSB7XHJcblxyXG4gICAgICAgIHJldHVybiAodGhpcy5fc3RhdGUgPT09IFBFTkRJTkcgfHwgdGhpcy5fc3RhdGUgPT09IENPTVBMRVRFIHx8IHRoaXMuX3N0YXRlID09PSBGQUlMRUQpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzdGFydEZpbGVHcm91cCAobmFtZSkge1xyXG5cclxuICAgICAgICB0aGlzLnRhZyA9IG5hbWU7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHN0b3BGaWxlR3JvdXAgKCkge1xyXG5cclxuICAgICAgICB0aGlzLnRhZyA9ICcnO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBhZGRGaWxlIChmaWxlKSB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5pc1JlYWR5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gIE11bHRpcGFydCBmaWxlP1xyXG4gICAgICAgIGlmIChmaWxlLm11bHRpcGFydClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZpbGUuZmlsZUEucGF0aCA9IHRoaXMucGF0aDtcclxuICAgICAgICAgICAgZmlsZS5maWxlQi5wYXRoID0gdGhpcy5wYXRoO1xyXG5cclxuICAgICAgICAgICAgZmlsZS5maWxlQS50YWcgPSB0aGlzLnRhZztcclxuICAgICAgICAgICAgZmlsZS5maWxlQi50YWcgPSB0aGlzLnRhZztcclxuXHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5hZGQoZmlsZS5maWxlQSk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5hZGQoZmlsZS5maWxlQik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZpbGUucGF0aCA9IHRoaXMucGF0aDtcclxuICAgICAgICAgICAgZmlsZS50YWcgPSB0aGlzLnRhZztcclxuXHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5hZGQoZmlsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoXHJcbiAgICAgICAgICAgIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAgV2hlbiB0aGlzIGZpbGUgbG9hZHMgd2UgbmVlZCB0byBjYWxsICdyZXNvbHZlJ1xyXG4gICAgICAgICAgICAgICAgZmlsZS5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgICAgIGZpbGUucmVqZWN0ID0gcmVqZWN0O1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0ICgpIHtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0Jhc2VMb2FkZXIgc3RhcnQuIEZpbGVzIHRvIGxvYWQ6JywgdGhpcy5saXN0LnNpemUpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNSZWFkeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxpc3Quc2l6ZSA9PT0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluaXNoZWRMb2FkaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBMT0FESU5HO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5mYWlsZWQuY2xlYXIoKTtcclxuICAgICAgICAgICAgdGhpcy5pbmZsaWdodC5jbGVhcigpO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NMb2FkUXVldWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShcclxuICAgICAgICAgICAgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVQcm9ncmVzcyAoKSB7XHJcblxyXG4gICAgICAgIC8vICBUT0RPXHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByb2Nlc3NMb2FkUXVldWUgKCkge1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnQmFzZUxvYWRlciBwcm9jZXNzTG9hZFF1ZXVlJywgdGhpcy5saXN0LnNpemUpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIHRoaXMubGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChmaWxlLnN0YXRlID09PSBGSUxFLlBFTkRJTkcgJiYgdGhpcy5pbmZsaWdodC5zaXplIDwgdGhpcy5tYXhQYXJhbGxlbERvd25sb2FkcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0FEREVEIFRPIFFVRVVFOicsIGZpbGUuc3JjKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmluZmxpZ2h0LmFkZChmaWxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3QuZGVsZXRlKGZpbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZEZpbGUoZmlsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmluZmxpZ2h0LnNpemUgPT09IHRoaXMubWF4UGFyYWxsZWxEb3dubG9hZHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyAgcHJpdmF0ZVxyXG4gICAgbG9hZEZpbGUgKGZpbGUpIHtcclxuXHJcbiAgICAgICAgZmlsZS5zcmMgPSB0aGlzLmdldFVSTChmaWxlKTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0xPQURJTkcnLCBmaWxlLnNyYyk7XHJcblxyXG4gICAgICAgIC8vICBJZiB0aGUgZmlsZSBkb2Vzbid0IGhhdmUgaXRzIG93biBjcm9zc09yaWdpbiBzZXQsIHdlJ2xsIHVzZSB0aGUgTG9hZGVycyAod2hpY2ggaXMgdW5kZWZpbmVkIGJ5IGRlZmF1bHQpXHJcbiAgICAgICAgaWYgKGZpbGUuY3Jvc3NPcmlnaW4gPT09IHVuZGVmaW5lZCAmJiB0aGlzLmNyb3NzT3JpZ2luKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZmlsZS5jcm9zc09yaWdpbiA9IHRoaXMuY3Jvc3NPcmlnaW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgVGhlIGFyZ3VtZW50IGlzIGFuIFhIUlNldHRpbmdzIG9iamVjdFxyXG4gICAgICAgIGZpbGUubG9hZCh0aGlzLnhocilcclxuICAgICAgICAgICAgLnRoZW4oZmlsZSA9PiB0aGlzLm5leHRGaWxlKGZpbGUsIHRydWUpKVxyXG4gICAgICAgICAgICAuY2F0Y2goZmlsZSA9PiB0aGlzLm5leHRGaWxlKGZpbGUsIGZhbHNlKSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5leHRGaWxlIChwcmV2aW91c0ZpbGUsIHN1Y2Nlc3MpIHtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0xPQURFRDonLCBwcmV2aW91c0ZpbGUuc3JjLCBzdWNjZXNzKTtcclxuXHJcbiAgICAgICAgLy8gIE1vdmUgdGhlIGZpbGUgdGhhdCBqdXN0IGxvYWRlZCBmcm9tIHRoZSBpbmZsaWdodCBsaXN0IHRvIHRoZSBxdWV1ZSBvciBmYWlsZWQgU2V0XHJcblxyXG4gICAgICAgIGlmIChzdWNjZXNzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQocHJldmlvdXNGaWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5mYWlsZWQuYWRkKHByZXZpb3VzRmlsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmluZmxpZ2h0LmRlbGV0ZShwcmV2aW91c0ZpbGUpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5saXN0LnNpemUgPiAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ25leHRGaWxlIC0gc3RpbGwgc29tZXRoaW5nIGluIHRoZSBsaXN0Jyk7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0xvYWRRdWV1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmluZmxpZ2h0LnNpemUgPT09IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbmV4dEZpbGUgY2FsbGluZyBmaW5pc2hlZExvYWRpbmcnKTtcclxuICAgICAgICAgICAgdGhpcy5maW5pc2hlZExvYWRpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldFVSTCAoZmlsZSkge1xyXG5cclxuICAgICAgICBpZiAoIWZpbGUudXJsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZpbGUudXJsLm1hdGNoKC9eKD86YmxvYjp8ZGF0YTp8aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvfFxcL1xcLykvKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBmaWxlLnVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFzZVVSTCArIGZpbGUucGF0aCArIGZpbGUudXJsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZpbmlzaGVkTG9hZGluZyAoKSB7XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdCYXNlTG9hZGVyLmZpbmlzaGVkTG9hZGluZyBQUk9DRVNTSU5HJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBQUk9DRVNTSU5HO1xyXG5cclxuICAgICAgICB0aGlzLnN0b3JhZ2UuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgLy8gIFRoaXMgY291bGQgYmUgUHJvbWlzZSBiYXNlZCBhcyB3ZWxsLCBhbGxvd2luZyBmb3IgYXN5bmMgcHJvY2Vzc2luZ1xyXG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgdGhpcy5xdWV1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZpbGUub25Qcm9jZXNzKCk7XHJcblxyXG4gICAgICAgICAgICAvLyAgVGhlIEZpbGUgc3BlY2lmaWMgcHJvY2VzcyBoYW5kbGVyIGhhcyBydW5cclxuICAgICAgICAgICAgLy8gIE5vdyBydW4gYW55IGN1c3RvbSBjYWxsYmFja3NcclxuICAgICAgICAgICAgaWYgKGZpbGUucHJvY2Vzc0NhbGxiYWNrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmaWxlLnByb2Nlc3NDYWxsYmFjayhmaWxlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmlsZS5vbkNvbXBsZXRlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UuYWRkKGZpbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5saXN0LmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5pbmZsaWdodC5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMucXVldWUuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0xvYWRlciBDb21wbGV0ZS4gTG9hZGVkOicsIHRoaXMuc3RvcmFnZS5zaXplLCAnRmFpbGVkOicsIHRoaXMuZmFpbGVkLnNpemUpO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnQmFzZUxvYWRlciBDT01QTEVURScpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlID0gQ09NUExFVEU7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldExvYWRlZEZpbGVzQnlUeXBlICh0eXBlLCBncm91cCA9ICcnLCBvdXRwdXQgPSBbXSkge1xyXG5cclxuICAgICAgICAvLyAgUmV0dXJuIGFuIGFycmF5IG9mIGFsbCBmaWxlcyB0aGF0IGhhdmUgc3RhdGUgPSBDT01QTEVURSAod2hpY2ggbWVhbnMgbG9hZGVkICsgcHJvY2Vzc2VkKVxyXG5cclxuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIHRoaXMuc3RvcmFnZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChmaWxlLnN0YXRlID09PSBGSUxFLkNPTVBMRVRFICYmIGZpbGUudGFnID09PSBncm91cCAmJiBmaWxlLnR5cGUgPT09IHR5cGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGZpbGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXRMb2FkZWRGaWxlcyAoZ3JvdXAgPSAnJywgb3V0cHV0ID0gW10pIHtcclxuXHJcbiAgICAgICAgLy8gIFJldHVybiBhbiBhcnJheSBvZiBhbGwgZmlsZXMgdGhhdCBoYXZlIHN0YXRlID0gQ09NUExFVEUgKHdoaWNoIG1lYW5zIGxvYWRlZCArIHByb2Nlc3NlZClcclxuXHJcbiAgICAgICAgZm9yIChsZXQgZmlsZSBvZiB0aGlzLnN0b3JhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZmlsZS5zdGF0ZSA9PT0gRklMRS5DT01QTEVURSAmJiBmaWxlLnRhZyA9PT0gZ3JvdXAgJiYgKHR5cGUgIT09ICcnICYmIGZpbGUudHlwZSA9PT0gdHlwZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGZpbGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG5cclxuICAgIH1cclxuXHJcbiAgICByZXNldCAoKSB7XHJcblxyXG4gICAgICAgIHRoaXMubGlzdC5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuaW5mbGlnaHQuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLmZhaWxlZC5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMucXVldWUuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy50YWcgPSAnJztcclxuICAgICAgICB0aGlzLnBhdGggPSAnJztcclxuICAgICAgICB0aGlzLmJhc2VVUkwgPSAnJztcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFBFTkRJTkc7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3kgKCkge1xyXG5cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IERFU1RST1lFRDtcclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2xvYWRlci9CYXNlTG9hZGVyLmpzXG4gKiovIiwiLy8gIENyZWF0ZXMgYW4gWEhSU2V0dGluZ3MgT2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXNcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFhIUlNldHRpbmdzIChyZXNwb25zZVR5cGUgPSAnJywgYXN5bmMgPSB0cnVlLCB1c2VyID0gJycsIHBhc3N3b3JkID0gJycsIHRpbWVvdXQgPSAwKSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgLy8gIElnbm9yZWQgYnkgdGhlIExvYWRlciwgb25seSB1c2VkIGJ5IEZpbGUuXHJcbiAgICAgICAgcmVzcG9uc2VUeXBlOiByZXNwb25zZVR5cGUsXHJcblxyXG4gICAgICAgIGFzeW5jOiBhc3luYyxcclxuXHJcbiAgICAgICAgLy8gIGNyZWRlbnRpYWxzXHJcbiAgICAgICAgdXNlcjogdXNlcixcclxuICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXHJcblxyXG4gICAgICAgIC8vICB0aW1lb3V0IGluIG1zICgwID0gbm8gdGltZW91dClcclxuICAgICAgICB0aW1lb3V0OiB0aW1lb3V0LFxyXG5cclxuICAgICAgICAvLyAgc2V0UmVxdWVzdEhlYWRlclxyXG4gICAgICAgIGhlYWRlcjogdW5kZWZpbmVkLFxyXG4gICAgICAgIGhlYWRlclZhbHVlOiB1bmRlZmluZWQsXHJcblxyXG4gICAgICAgIC8vICBvdmVycmlkZU1pbWVUeXBlXHJcbiAgICAgICAgb3ZlcnJpZGVNaW1lVHlwZTogdW5kZWZpbmVkXHJcblxyXG4gICAgfTtcclxuICAgIFxyXG59XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbG9hZGVyL1hIUlNldHRpbmdzLmpzXG4gKiovIiwiaW1wb3J0IFhIUkxvYWRlciBmcm9tICcuL1hIUkxvYWRlci5qcyc7XHJcbmltcG9ydCBYSFJTZXR0aW5ncyBmcm9tICcuL1hIUlNldHRpbmdzLmpzJztcclxuXHJcbi8vICBGaWxlIGxldmVsIGNvbnN0c1xyXG5cclxuZXhwb3J0IGNvbnN0IFBFTkRJTkcgPSAwOyAgICAgIC8vIGZpbGUgaXMgaW4gdGhlIGxvYWQgcXVldWUgYnV0IG5vdCB5ZXQgc3RhcnRlZFxyXG5leHBvcnQgY29uc3QgTE9BRElORyA9IDE7ICAgICAgLy8gZmlsZSBoYXMgYmVlbiBzdGFydGVkIHRvIGxvYWQgYnkgdGhlIGxvYWRlciAob25Mb2FkIGNhbGxlZClcclxuZXhwb3J0IGNvbnN0IExPQURFRCA9IDI7ICAgICAgIC8vIGZpbGUgaGFzIGxvYWRlZCBzdWNjZXNzZnVsbHksIGF3YWl0aW5nIHByb2Nlc3NpbmdcclxuZXhwb3J0IGNvbnN0IEZBSUxFRCA9IDM7ICAgICAgIC8vIGZpbGUgZmFpbGVkIHRvIGxvYWRcclxuZXhwb3J0IGNvbnN0IFBST0NFU1NJTkcgPSA0OyAgIC8vIGZpbGUgaXMgYmVpbmcgcHJvY2Vzc2VkIChvblByb2Nlc3MgY2FsbGJhY2spXHJcbmV4cG9ydCBjb25zdCBDT01QTEVURSA9IDU7ICAgICAvLyBmaWxlIGhhcyBmaW5pc2hlZCBwcm9jZXNzaW5nXHJcbmV4cG9ydCBjb25zdCBERVNUUk9ZRUQgPSA2OyAgICAvLyBmaWxlIGhhcyBiZWVuIGRlc3Ryb3llZFxyXG5cclxuLy8gIE91ciBiYXNlIEZpbGUgb2JqZWN0IChmcm9tIHdoaWNoIGFsbCBGaWxlIFR5cGVzIGV4dGVuZClcclxuXHJcbi8vICBrZXkgPSB1c2VyIGxldmVsIGZpbGUga2V5IChjYW4gYmUgZmlsZW5hbWUgb3Igb3RoZXIgc3RyaW5nIGJhc2VkIHZhbHVlKVxyXG4vLyAgdXJsID0gdGhlIFVSTCB0byBsb2FkIHRoZSBmaWxlIGZyb20sIGRvZXNuJ3QgaW5jbHVkZSBiYXNlVVJMIG9yIFBhdGggKHdoaWNoIGFyZSBib3RoIHNldCBieSB0aGUgTG9hZGVyKVxyXG4vLyAgdHlwZSA9IGEgdXNlci1sZXZlbCB2YWx1ZSB0aGF0IGNhbiBjb250cm9sIHdoaWNoIGNhY2hlIHRoZSBmaWxlIGlzIGFkZGVkIHRvXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGaWxlIChrZXksIHVybCwgdHlwZSkge1xyXG5cclxuICAgIGlmICgha2V5KVxyXG4gICAge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBGaWxlIGtleScpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG5cclxuICAgICAgICBrZXk6IGtleSxcclxuXHJcbiAgICAgICAgdXJsOiB1cmwsXHJcblxyXG4gICAgICAgIC8vICBCb3RoIG9mIHRoZXNlIGFyZSBvdmVycmlkZGVuIGJ5IHRoZSBCYXNlTG9hZGVyIChpZiBiZWluZyB1c2VkKVxyXG4gICAgICAgIHBhdGg6ICcnLFxyXG4gICAgICAgIHNyYzogdXJsLFxyXG5cclxuICAgICAgICB0YWc6ICcnLCAgICAvLyBUYWcgdGhpcyBmaWxlLCB0aGlzIGlzIGEgbm9uLXVuaXF1ZSBzdHJpbmcuIEZvciBleGFtcGxlIHlvdSBjb3VsZCB0YWcgYSBjb2xsZWN0aW9uIG9mIGZpbGVzIGFzICdsZXZlbDEnLCBvciAnbWFpbm1lbnUnLlxyXG5cclxuICAgICAgICB0eXBlOiB0eXBlLCAvLyB0aGUgZmlsZSB0eXBlLCBpLmUuICdpbWFnZScsICdqc29uJywgZXRjIHdoaWNoIGNhbiBiZSB1c2VkIHRvIGNvbnRyb2wgd2hpY2ggY2FjaGUgaXQgZ2V0cyBhZGRlZCB0b1xyXG5cclxuICAgICAgICBzdGF0ZTogUEVORElORyxcclxuXHJcbiAgICAgICAgLy8gIE11bHRpcGFydCBmaWxlPyAoaS5lLiBhbiBhdGxhcyBhbmQgaXRzIGpzb24pXHJcbiAgICAgICAgbXVsdGlwYXJ0OiB1bmRlZmluZWQsXHJcbiAgICAgICAgbGlua0ZpbGU6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAgICAgLy8gIFRoZSBhY3R1YWwgcHJvY2Vzc2VkIGZpbGUgZGF0YVxyXG4gICAgICAgIGRhdGE6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAgICAgLy8gIEZvciBDT1JzIGJhc2VkIGxvYWRpbmcuXHJcbiAgICAgICAgLy8gIElmIHRoaXMgaXMgdW5kZWZpbmVkIHRoZW4gdGhlIEZpbGUgd2lsbCBjaGVjayBCYXNlTG9hZGVyLmNyb3NzT3JpZ2luIGFuZCB1c2UgdGhhdCAoaWYgc2V0KVxyXG4gICAgICAgIGNyb3NzT3JpZ2luOiB1bmRlZmluZWQsXHJcblxyXG4gICAgICAgIC8vICBPcHRpb25hbGx5IHNldCBieSB0aGUgUHJvbWlzZSByZXR1cm5lZCBmcm9tIEJhc2VMb2FkZXIuYWRkRmlsZS5cclxuICAgICAgICByZXNvbHZlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgcmVqZWN0OiB1bmRlZmluZWQsXHJcblxyXG4gICAgICAgIC8vICBtYXliZSB5b3UgaGF2ZSB0byBzZXQgaXQgaW4gdGhlIFByb21pc2U/XHJcbiAgICAgICAgcHJvY2Vzc0NhbGxiYWNrOiB1bmRlZmluZWQsXHJcblxyXG4gICAgICAgIC8vICB4aHIgc3BlY2lmaWMgc2V0dGluZ3MgKGlnbm9yZWQgYnkgVGFnTG9hZGVkIGZpbGVzKVxyXG4gICAgICAgIHhocjogWEhSU2V0dGluZ3MoJ3RleHQnKSxcclxuXHJcbiAgICAgICAgb25TdGF0ZUNoYW5nZTogZnVuY3Rpb24gKHZhbHVlKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnb25TdGF0ZUNoYW5nZScsIHRoaXMudXJsLCAnZnJvbScsIHRoaXMuc3RhdGUsICd0bycsIHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB2YWx1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vICBMb2FkZWQgQU5EIFByb2Nlc3NlZFxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBDT01QTEVURSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgUGFydCBvZiBhIG11bHRpcGFydCBsb2FkP1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm11bHRpcGFydClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICBIYXMgdGhlIGxpbmtlZCBmaWxlIGxvYWRlZCB0b28/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxpbmtGaWxlLnN0YXRlID09PSBDT01QTEVURSAmJiB0aGlzLm11bHRpcGFydC5yZXNvbHZlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgU2VuZCB0aGUgUHJvbWlzZSBmb3IgdGhlIG11bHRpcGFydCBmaWxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpcGFydC5yZXNvbHZlKHRoaXMubXVsdGlwYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIFNlbmQgdGhlIFByb21pc2UgZm9yIHRoaXMgZmlsZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdmUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmUodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IEZBSUxFRClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgUGFydCBvZiBhIG11bHRpcGFydCBsb2FkP1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm11bHRpcGFydClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm11bHRpcGFydC5yZWplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICBTZW5kIHRoZSBQcm9taXNlIGZvciB0aGUgbXVsdGlwYXJ0IGZpbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwYXJ0LnJlamVjdCh0aGlzLm11bHRpcGFydCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyAgU2VuZCB0aGUgUHJvbWlzZSBmb3IgdGhpcyBmaWxlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVqZWN0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3QodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vICBUaGVzZSBmdW5jdGlvbnMgYXJlIHVzdWFsbHkgb3ZlcnJpZGRlbiBieSB0aGUgY3VzdG9tIGZpbGUgdHlwZXNcclxuXHJcbiAgICAgICAgbG9hZDogZnVuY3Rpb24gKGdsb2JhbFhIUlNldHRpbmdzKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uU3RhdGVDaGFuZ2UoTE9BRElORyk7XHJcblxyXG4gICAgICAgICAgICAvLyAgUmV0dXJucyBhIFByb21pc2UgZnJvbSB0aGUgWEhSTG9hZGVyXHJcbiAgICAgICAgICAgIHJldHVybiBYSFJMb2FkZXIodGhpcywgZ2xvYmFsWEhSU2V0dGluZ3MpO1xyXG5cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIC8vICBJZiBvdmVycmlkZGVuIGl0IG11c3Qgc2V0IGBzdGF0ZWAgdG8gTE9BREVEXHJcbiAgICAgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShMT0FERUQpO1xyXG5cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBvbkVycm9yOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAvLyAgSWYgb3ZlcnJpZGRlbiBpdCBtdXN0IHNldCBgc3RhdGVgIHRvIEZBSUxFRFxyXG4gICAgICAgICAgICB0aGlzLm9uU3RhdGVDaGFuZ2UoRkFJTEVEKTtcclxuXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgb25Qcm9jZXNzOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAvLyAgSWYgb3ZlcnJpZGRlbiBpdCBtdXN0IHNldCBgc3RhdGVgIHRvIFBST0NFU1NJTkdcclxuICAgICAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlKFBST0NFU1NJTkcpO1xyXG5cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAvLyAgSWYgb3ZlcnJpZGRlbiBpdCBtdXN0IHNldCBgc3RhdGVgIHRvIENPTVBMRVRFXHJcbiAgICAgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShDT01QTEVURSk7XHJcblxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG9uRGVzdHJveTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gIElmIG92ZXJyaWRkZW4gaXQgbXVzdCBzZXQgYHN0YXRlYCB0byBERVNUUk9ZRURcclxuICAgICAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlKERFU1RST1lFRCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9sb2FkZXIvRmlsZS5qc1xuICoqLyIsImltcG9ydCBNZXJnZVhIUlNldHRpbmdzIGZyb20gJy4vTWVyZ2VYSFJTZXR0aW5ncy5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBYSFJMb2FkZXIgKGZpbGUsIGdsb2JhbFhIUlNldHRpbmdzKSB7XHJcblxyXG4gICAgbGV0IGNvbmZpZyA9IE1lcmdlWEhSU2V0dGluZ3MoZ2xvYmFsWEhSU2V0dGluZ3MsIGZpbGUueGhyKTtcclxuXHJcbiAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgeGhyLm9wZW4oJ0dFVCcsIGZpbGUuc3JjLCBjb25maWcuYXN5bmMsIGNvbmZpZy51c2VyLCBjb25maWcucGFzc3dvcmQpO1xyXG5cclxuICAgIHhoci5yZXNwb25zZVR5cGUgPSBmaWxlLnhoci5yZXNwb25zZVR5cGU7XHJcbiAgICB4aHIudGltZW91dCA9IGNvbmZpZy50aW1lb3V0O1xyXG5cclxuICAgIGlmIChjb25maWcuaGVhZGVyICYmIGNvbmZpZy5oZWFkZXJWYWx1ZSlcclxuICAgIHtcclxuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihjb25maWcuaGVhZGVyLCBjb25maWcuaGVhZGVyVmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjb25maWcub3ZlcnJpZGVNaW1lVHlwZSlcclxuICAgIHtcclxuICAgICAgICB4aHIub3ZlcnJpZGVNaW1lVHlwZShjb25maWcub3ZlcnJpZGVNaW1lVHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKFxyXG4gICAgICAgIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmaWxlLm9uTG9hZCh4aHIpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmaWxlKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZmlsZS5vbkVycm9yKHhocik7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZmlsZSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICApO1xyXG5cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9sb2FkZXIvWEhSTG9hZGVyLmpzXG4gKiovIiwiaW1wb3J0IFhIUlNldHRpbmdzIGZyb20gJy4vWEhSU2V0dGluZ3MuanMnO1xyXG5cclxuLy8gIFRha2VzIHR3byBYSFIgT2JqZWN0cyBhbmQgY3JlYXRlcyBhIG5ldyBvYmplY3RcclxuXHJcbi8vICBUaGUgbmV3IG9iamVjdCBpcyBiYXNlZCBvbiBnbG9iYWwgaW5pdGlhbGx5LCBidXQgYW55IHNldHRpbmcgaW5cclxuLy8gIGxvY2FsIG92ZXJyaWRlcyB0aGUgZ2xvYmFsIHZhbHVlLlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTWVyZ2VYSFJTZXR0aW5ncyAoZ2xvYmFsLCBsb2NhbCkge1xyXG5cclxuICAgIGxldCBvdXRwdXQgPSAoZ2xvYmFsID09PSB1bmRlZmluZWQpID8gWEhSU2V0dGluZ3MoKSA6IE9iamVjdC5hc3NpZ24oZ2xvYmFsKTtcclxuXHJcbiAgICBpZiAobG9jYWwpXHJcbiAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgc2V0dGluZyBpbiBsb2NhbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChsb2NhbFtzZXR0aW5nXSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXRbc2V0dGluZ10gPSBsb2NhbFtzZXR0aW5nXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gb3V0cHV0O1xyXG5cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9sb2FkZXIvTWVyZ2VYSFJTZXR0aW5ncy5qc1xuICoqLyIsImltcG9ydCBGaWxlLCAqIGFzIEZJTEUgZnJvbSAnLi4vRmlsZS5qcyc7XHJcblxyXG5leHBvcnQgY29uc3QgVFlQRSA9ICdpbWFnZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJbWFnZUZpbGUgKGtleSwgdXJsID0gJycsIGRhdGEgPSB1bmRlZmluZWQpIHtcclxuXHJcbiAgICBpZiAodXJsID09PSAnJyAmJiAhZGF0YSlcclxuICAgIHtcclxuICAgICAgICB1cmwgPSBrZXkgKyAnLnBuZyc7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGZpbGUgPSBGaWxlKGtleSwgdXJsLCBUWVBFKTtcclxuXHJcbiAgICBmaWxlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShGSUxFLkxPQURJTkcpO1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgSW1hZ2UoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3Jvc3NPcmlnaW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEuY3Jvc3NPcmlnaW4gPSB0aGlzLmNyb3NzT3JpZ2luO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKFxyXG4gICAgICAgICAgICAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhLm9ubG9hZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5vbmxvYWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEub25lcnJvciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBGSUxFLkxPQURFRDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5vbmVycm9yID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5vbmxvYWQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEub25sb2FkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLm9uZXJyb3IgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBGSUxFLkZBSUxFRDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLm5hbWUgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuc3JjID0gdGhpcy5zcmM7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSW1hZ2UgaXMgaW1tZWRpYXRlbHktYXZhaWxhYmxlIG9yIGNhY2hlZFxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuY29tcGxldGUgJiYgdGhpcy5kYXRhLndpZHRoICYmIHRoaXMuZGF0YS5oZWlnaHQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLm9ubG9hZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLm9uZXJyb3IgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBGSUxFLkxPQURFRDtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gZmlsZTtcclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbG9hZGVyL3R5cGVzL0ltYWdlRmlsZS5qc1xuICoqLyIsImltcG9ydCBGaWxlLCAqIGFzIEZJTEUgZnJvbSAnLi4vRmlsZS5qcyc7XHJcblxyXG5leHBvcnQgY29uc3QgVFlQRSA9ICdqc29uJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEpTT05GaWxlIChrZXksIHVybCA9ICcnLCBkYXRhID0gdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgaWYgKHVybCA9PT0gJycgJiYgIWRhdGEpXHJcbiAgICB7XHJcbiAgICAgICAgdXJsID0ga2V5ICsgJy5qc29uJztcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZmlsZSA9IEZpbGUoa2V5LCB1cmwsIFRZUEUpO1xyXG5cclxuICAgIC8vICBTZXQgdGhlIGV4cGVjdGVkIFhIUiByZXNwb25zZSB0eXBlXHJcbiAgICBmaWxlLnhoci5yZXNwb25zZVR5cGUgPSAndGV4dCc7XHJcblxyXG4gICAgZmlsZS5vbkxvYWQgPSBmdW5jdGlvbiAoeGhyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHhoci5yZXNwb25zZVRleHQ7XHJcblxyXG4gICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShGSUxFLkxPQURFRCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBmaWxlLm9uUHJvY2VzcyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlKEZJTEUuUFJPQ0VTU0lORyk7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IEpTT04ucGFyc2UodGhpcy5kYXRhKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChkYXRhKVxyXG4gICAge1xyXG4gICAgICAgIGZpbGUuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgZmlsZS5vblByb2Nlc3MoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmlsZTtcclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbG9hZGVyL3R5cGVzL0pTT05GaWxlLmpzXG4gKiovIiwiaW1wb3J0IFBhcnNlWE1MIGZyb20gJy4uLy4uL3N5c3RlbS9QYXJzZVhNTC5qcyc7XHJcbmltcG9ydCBGaWxlLCAqIGFzIEZJTEUgZnJvbSAnLi4vRmlsZS5qcyc7XHJcblxyXG5leHBvcnQgY29uc3QgVFlQRSA9ICd4bWwnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gWE1MRmlsZSAoa2V5LCB1cmwgPSAnJywgZGF0YSA9IHVuZGVmaW5lZCkge1xyXG5cclxuICAgIGlmICh1cmwgPT09ICcnICYmICFkYXRhKVxyXG4gICAge1xyXG4gICAgICAgIHVybCA9IGtleSArICcueG1sJztcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZmlsZSA9IEZpbGUoa2V5LCB1cmwsIFRZUEUpO1xyXG5cclxuICAgIC8vICBTZXQgdGhlIGV4cGVjdGVkIFhIUiByZXNwb25zZSB0eXBlXHJcbiAgICBmaWxlLnhoci5yZXNwb25zZVR5cGUgPSAndGV4dCc7XHJcblxyXG4gICAgZmlsZS5vbkxvYWQgPSBmdW5jdGlvbiAoeGhyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHhoci5yZXNwb25zZVRleHQ7XHJcblxyXG4gICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShGSUxFLkxPQURFRCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBmaWxlLm9uUHJvY2VzcyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlKEZJTEUuUFJPQ0VTU0lORyk7XHJcblxyXG4gICAgICAgIGxldCB4bWwgPSBQYXJzZVhNTCh0aGlzLmRhdGEpO1xyXG5cclxuICAgICAgICBpZiAoIXhtbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWE1MRmlsZTogSW52YWxpZCBYTUwnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhID0geG1sO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChkYXRhKVxyXG4gICAge1xyXG4gICAgICAgIGZpbGUuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgZmlsZS5vblByb2Nlc3MoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmlsZTtcclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbG9hZGVyL3R5cGVzL1hNTEZpbGUuanNcbiAqKi8iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQYXJzZVhNTCAoZGF0YSkge1xyXG5cclxuICAgIGxldCB4bWwgPSAnJztcclxuXHJcbiAgICB0cnlcclxuICAgIHtcclxuICAgICAgICBpZiAod2luZG93WydET01QYXJzZXInXSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkb21wYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XHJcbiAgICAgICAgICAgIHhtbCA9IGRvbXBhcnNlci5wYXJzZUZyb21TdHJpbmcoZGF0YSwgJ3RleHQveG1sJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHhtbCA9IG5ldyBBY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MRE9NJyk7XHJcbiAgICAgICAgICAgIHhtbC5sb2FkWE1MKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKVxyXG4gICAge1xyXG4gICAgICAgIHhtbCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF4bWwgfHwgIXhtbC5kb2N1bWVudEVsZW1lbnQgfHwgeG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwYXJzZXJlcnJvcicpLmxlbmd0aClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICByZXR1cm4geG1sO1xyXG4gICAgfVxyXG5cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9zeXN0ZW0vUGFyc2VYTUwuanNcbiAqKi8iLCJpbXBvcnQgRmlsZSwgKiBhcyBGSUxFIGZyb20gJy4uL0ZpbGUuanMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IFRZUEUgPSAndGV4dCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUZXh0RmlsZSAoa2V5LCB1cmwgPSAnJywgZGF0YSA9IHVuZGVmaW5lZCkge1xyXG5cclxuICAgIGlmICh1cmwgPT09ICcnICYmICFkYXRhKVxyXG4gICAge1xyXG4gICAgICAgIHVybCA9IGtleSArICcudHh0JztcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZmlsZSA9IEZpbGUoa2V5LCB1cmwsIFRZUEUpO1xyXG5cclxuICAgIC8vICBTZXQgdGhlIGV4cGVjdGVkIFhIUiByZXNwb25zZSB0eXBlXHJcbiAgICBmaWxlLnhoci5yZXNwb25zZVR5cGUgPSAndGV4dCc7XHJcblxyXG4gICAgZmlsZS5vbkxvYWQgPSBmdW5jdGlvbiAoeGhyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHhoci5yZXNwb25zZVRleHQ7XHJcblxyXG4gICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShGSUxFLkxPQURFRCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoZGF0YSlcclxuICAgIHtcclxuICAgICAgICBmaWxlLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIGZpbGUub25Qcm9jZXNzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZpbGU7XHJcblxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2xvYWRlci90eXBlcy9UZXh0RmlsZS5qc1xuICoqLyIsImltcG9ydCBGaWxlLCAqIGFzIEZJTEUgZnJvbSAnLi4vRmlsZS5qcyc7XHJcblxyXG5leHBvcnQgY29uc3QgVFlQRSA9ICdnbHNsJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEdMU0xGaWxlIChrZXksIHVybCA9ICcnLCBkYXRhID0gdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgaWYgKHVybCA9PT0gJycgJiYgIWRhdGEpXHJcbiAgICB7XHJcbiAgICAgICAgdXJsID0ga2V5ICsgJy5nbHNsJztcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZmlsZSA9IEZpbGUoa2V5LCB1cmwsIFRZUEUpO1xyXG5cclxuICAgIC8vICBTZXQgdGhlIGV4cGVjdGVkIFhIUiByZXNwb25zZSB0eXBlXHJcbiAgICBmaWxlLnhoci5yZXNwb25zZVR5cGUgPSAndGV4dCc7XHJcblxyXG4gICAgZmlsZS5vbkxvYWQgPSBmdW5jdGlvbiAoeGhyKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHhoci5yZXNwb25zZVRleHQ7XHJcblxyXG4gICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShGSUxFLkxPQURFRCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoZGF0YSlcclxuICAgIHtcclxuICAgICAgICBmaWxlLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIGZpbGUub25Qcm9jZXNzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZpbGU7XHJcblxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2xvYWRlci90eXBlcy9HTFNMRmlsZS5qc1xuICoqLyIsImltcG9ydCBGaWxlLCAqIGFzIEZJTEUgZnJvbSAnLi4vRmlsZS5qcyc7XHJcblxyXG5leHBvcnQgY29uc3QgVFlQRSA9ICdiaW5hcnknO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQmluYXJ5RmlsZSAoa2V5LCB1cmwgPSAnJywgZGF0YSA9IHVuZGVmaW5lZCkge1xyXG5cclxuICAgIGlmICh1cmwgPT09ICcnICYmICFkYXRhKVxyXG4gICAge1xyXG4gICAgICAgIHVybCA9IGtleSArICcuYmluJztcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZmlsZSA9IEZpbGUoa2V5LCB1cmwsIFRZUEUpO1xyXG5cclxuICAgIC8vICBTZXQgdGhlIGV4cGVjdGVkIFhIUiByZXNwb25zZSB0eXBlXHJcbiAgICBmaWxlLnhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xyXG5cclxuICAgIGZpbGUub25Mb2FkID0gZnVuY3Rpb24gKHhocikge1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB4aHIucmVzcG9uc2U7XHJcblxyXG4gICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZShGSUxFLkxPQURFRCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoZGF0YSlcclxuICAgIHtcclxuICAgICAgICBmaWxlLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIGZpbGUub25Qcm9jZXNzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZpbGU7XHJcblxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2xvYWRlci90eXBlcy9CaW5hcnlGaWxlLmpzXG4gKiovIiwiaW1wb3J0IEltYWdlRmlsZSBmcm9tICcuL0ltYWdlRmlsZS5qcyc7XHJcbmltcG9ydCBKU09ORmlsZSBmcm9tICcuL0pTT05GaWxlLmpzJztcclxuaW1wb3J0IE11bHRpRmlsZSBmcm9tICcuLi9NdWx0aUZpbGUuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXRsYXNKU09ORmlsZSAoa2V5LCB0ZXh0dXJlVVJMLCBhdGxhc1VSTCwgYXRsYXNEYXRhKSB7XHJcblxyXG4gICAgaWYgKGF0bGFzVVJMID09PSAnJyAmJiBhdGxhc0RhdGEgPT09IG51bGwpXHJcbiAgICB7XHJcbiAgICAgICAgYXRsYXNVUkwgPSBrZXkgKyAnLmpzb24nO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBNdWx0aUZpbGUoXHJcbiAgICAgICAgSW1hZ2VGaWxlKGtleSwgdGV4dHVyZVVSTCksXHJcbiAgICAgICAgSlNPTkZpbGUoa2V5LCBhdGxhc1VSTCwgYXRsYXNEYXRhKVxyXG4gICAgKTtcclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbG9hZGVyL3R5cGVzL0F0bGFzSlNPTkZpbGUuanNcbiAqKi8iLCJcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTXVsdGlGaWxlIChmaWxlQSwgZmlsZUIpIHtcclxuXHJcbiAgICAvLyAgTGluayB0aGUgdHdvIGZpbGVzXHJcbiAgICBmaWxlQS5saW5rRmlsZSA9IGZpbGVCO1xyXG4gICAgZmlsZUIubGlua0ZpbGUgPSBmaWxlQTtcclxuXHJcbiAgICBsZXQgbXVsdGlwYXJ0ID0ge1xyXG5cclxuICAgICAgICBtdWx0aXBhcnQ6IHRydWUsXHJcblxyXG4gICAgICAgIGZpbGVBOiBmaWxlQSxcclxuICAgICAgICBmaWxlQjogZmlsZUIsXHJcblxyXG4gICAgICAgIHJlc29sdmU6IHVuZGVmaW5lZCxcclxuICAgICAgICByZWplY3Q6IHVuZGVmaW5lZCxcclxuXHJcbiAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gICBUaGlzIGlzbid0IHVzZWQgYnkgdGhlIEJhc2VMb2FkZXIsIGJ1dCBhbGxvd3MgeW91IHRvIGNhbGwgbG9hZCBkaXJlY3RseSBvbiB0aGUgbXVsdGlwYXJ0IGZpbGVcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShcclxuICAgICAgICAgICAgICAgIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIFdoZW4gdGhpcyBmaWxlIGxvYWRzIHdlIG5lZWQgdG8gY2FsbCAncmVzb2x2ZSdcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVBLmxvYWQoKS50aGVuKGZpbGUgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5vblByb2Nlc3MoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlLnByb2Nlc3NDYWxsYmFjaylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5wcm9jZXNzQ2FsbGJhY2soZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUub25Db21wbGV0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmaWxlID0+IHsgZmlsZS5vbkVycm9yKCkgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZUIubG9hZCgpLnRoZW4oZmlsZSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLm9uUHJvY2VzcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUucHJvY2Vzc0NhbGxiYWNrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnByb2Nlc3NDYWxsYmFjayhmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5vbkNvbXBsZXRlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZpbGUgPT4geyBmaWxlLm9uRXJyb3IoKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGZpbGVBLm11bHRpcGFydCA9IG11bHRpcGFydDtcclxuICAgIGZpbGVCLm11bHRpcGFydCA9IG11bHRpcGFydDtcclxuXHJcbiAgICByZXR1cm4gbXVsdGlwYXJ0O1xyXG5cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9sb2FkZXIvTXVsdGlGaWxlLmpzXG4gKiovIiwiaW1wb3J0IEltYWdlRmlsZSBmcm9tICcuL0ltYWdlRmlsZS5qcyc7XHJcbmltcG9ydCBKU09ORmlsZSBmcm9tICcuL0pTT05GaWxlLmpzJztcclxuaW1wb3J0IE11bHRpRmlsZSBmcm9tICcuLi9NdWx0aUZpbGUuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXRsYXNYTUxGaWxlIChrZXksIHRleHR1cmVVUkwsIGF0bGFzVVJMLCBhdGxhc0RhdGEpIHtcclxuXHJcbiAgICBpZiAoYXRsYXNVUkwgPT09ICcnICYmIGF0bGFzRGF0YSA9PT0gbnVsbClcclxuICAgIHtcclxuICAgICAgICBhdGxhc1VSTCA9IGtleSArICcueG1sJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTXVsdGlGaWxlKFxyXG4gICAgICAgIEltYWdlRmlsZShrZXksIHRleHR1cmVVUkwpLFxyXG4gICAgICAgIFhNTEZpbGUoa2V5LCBhdGxhc1VSTCwgYXRsYXNEYXRhKVxyXG4gICAgKTtcclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbG9hZGVyL3R5cGVzL0F0bGFzWE1MRmlsZS5qc1xuICoqLyIsImltcG9ydCBCYXNlVHJhbnNmb3JtIGZyb20gJy4uLy4uL21hdGgvdHJhbnNmb3JtLzJkL2Jhc2ljL0Jhc2VUcmFuc2Zvcm0uanMnO1xyXG5pbXBvcnQgU2V0VHJhbnNmb3JtVG9Db250ZXh0IGZyb20gJy4uLy4uL21hdGgvdHJhbnNmb3JtLzJkL1NldFRyYW5zZm9ybVRvQ29udGV4dC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTcHJpdGUgZXh0ZW5kcyBCYXNlVHJhbnNmb3JtIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoaW1hZ2UsIHgsIHkpIHtcclxuXHJcbiAgICAgICAgc3VwZXIoeCwgeSk7XHJcblxyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IHsgaW1hZ2U6IGltYWdlLCB3aWR0aDogaW1hZ2Uud2lkdGgsIGhlaWdodDogaW1hZ2UuaGVpZ2h0IH07XHJcblxyXG4gICAgICAgIC8vIHRoaXMucm90YXRpb25BbmNob3Iuc2V0KDAuNSk7XHJcbiAgICAgICAgLy8gdGhpcy50cmFuc2Zvcm0uZW5hYmxlSW50ZXJwb2xhdGlvbigpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIgKGN0eCwgaSkge1xyXG5cclxuICAgICAgICBTZXRUcmFuc2Zvcm1Ub0NvbnRleHQodGhpcy50cmFuc2Zvcm0sIGN0eCwgaSk7XHJcblxyXG4gICAgICAgIGxldCBkeCA9IHRoaXMucm90YXRpb25BbmNob3IueCAqIC10aGlzLnRleHR1cmUud2lkdGg7XHJcbiAgICAgICAgbGV0IGR5ID0gdGhpcy5yb3RhdGlvbkFuY2hvci55ICogLXRoaXMudGV4dHVyZS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UodGhpcy50ZXh0dXJlLmltYWdlLCBkeCwgZHkpO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZ2FtZS9uYW5vL1Nwcml0ZS5qc1xuICoqLyIsImltcG9ydCBUcmFuc2Zvcm0gZnJvbSAnLi9UcmFuc2Zvcm0uanMnO1xyXG5cclxuLy8gIEEgQmFzZVRyYW5zZm9ybSBjbGFzcyB0aGF0IHlvdSBjYW4gdXNlIHdoZW4gZXh0ZW5kaW5nIGEgU3ByaXRlIG9yIG90aGVyIEdhbWUgT2JqZWN0XHJcbi8vICBIaWRlcyBhd2F5IHRoZSAncHJpdmF0ZScgc3R1ZmYgYW5kIGV4cG9zZXMgb25seSB0aGUgdXNlZnVsIGdldHRlcnMgYW5kIHNldHRlcnNcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VUcmFuc2Zvcm0ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICh4ID0gMCwgeSA9IDAsIHJvdGF0aW9uID0gMCwgc2NhbGVYID0gMSwgc2NhbGVZID0gMSkge1xyXG5cclxuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oeCwgeSwgcm90YXRpb24sIHNjYWxlWCwgc2NhbGVZKTtcclxuXHJcbiAgICAgICAgLy8gIERpcmVjdCBjb21wb25lbnQgcmVmZXJlbmNlc1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbjtcclxuICAgICAgICB0aGlzLnNjYWxlID0gdGhpcy50cmFuc2Zvcm0uc2NhbGU7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbkFuY2hvciA9IHRoaXMudHJhbnNmb3JtLnJvdGF0aW9uQW5jaG9yO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXQgeCAoKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLmdldFgoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHkgKCkge1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi5nZXRZKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldCByb3RhdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybS5yb3RhdGlvbi5nZXRWYWx1ZSgpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzZXQgeCAodmFsdWUpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24uc2V0WCh2YWx1ZSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldCB5ICh2YWx1ZSkge1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi5zZXRZKHZhbHVlKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHJvdGF0aW9uICh2YWx1ZSkge1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm0ucm90YXRpb24uc2V0VmFsdWUodmFsdWUpO1xyXG5cclxuICAgIH1cclxuXHJcbn1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9tYXRoL3RyYW5zZm9ybS8yZC9iYXNpYy9CYXNlVHJhbnNmb3JtLmpzXG4gKiovIiwiaW1wb3J0IE1hdDIzIGZyb20gJy4uLy4uLy4uL21hdHJpeC9tYXQyMy9CdWlsZC5qcyc7XHJcbmltcG9ydCBTY2FsZSBmcm9tICcuLi9jb21wb25lbnRzL1NjYWxlLmpzJztcclxuaW1wb3J0IFBvc2l0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvUG9zaXRpb24uanMnO1xyXG5pbXBvcnQgUm90YXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Sb3RhdGlvbi5qcyc7XHJcbmltcG9ydCBSb3RhdGlvbkFuY2hvciBmcm9tICcuLi9jb21wb25lbnRzL1JvdGF0aW9uQW5jaG9yLmpzJztcclxuXHJcbi8vICBBIEJhc2ljIDJEIFRyYW5zZm9ybSBjbGFzc1xyXG5cclxuLy8gIENvbXBvbmVudHM6IFBvc2l0aW9uLCBTY2FsZSwgUm90YXRpb24gYW5kIFJvdGF0aW9uQW5jaG9yLCBiYWtlZCB0byBhIE1hdDIzXHJcbi8vICBTdXBwb3J0czogSW1tZWRpYXRlIG9yIERlZmVycmVkIFVwZGF0ZXMsIEludGVycG9sYXRpb24uXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUcmFuc2Zvcm0ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICh4ID0gMCwgeSA9IDAsIHJvdGF0aW9uID0gMCwgc2NhbGVYID0gMSwgc2NhbGVZID0gMSkge1xyXG5cclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFBvc2l0aW9uKHRoaXMsIHgsIHkpO1xyXG4gICAgICAgIHRoaXMuc2NhbGUgPSBuZXcgU2NhbGUodGhpcywgc2NhbGVYLCBzY2FsZVkpO1xyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSBuZXcgUm90YXRpb24odGhpcywgcm90YXRpb24pO1xyXG4gICAgICAgIHRoaXMucm90YXRpb25BbmNob3IgPSBuZXcgUm90YXRpb25BbmNob3IodGhpcywgMCwgMCk7XHJcblxyXG4gICAgICAgIHRoaXMubG9jYWwgPSBNYXQyMyhzY2FsZVgsIDAsIDAsIHNjYWxlWSwgeCwgeSk7XHJcblxyXG4gICAgICAgIHRoaXMuaW50ZXJwb2xhdGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmltbWVkaWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyAgSW5qZWN0IHRoZSB0cmFuc2Zvcm0gcHJvcGVydGllcyB0byB0aGUgZ2l2ZW4gdGFyZ2V0XHJcbiAgICBhZGRQcm9wZXJ0aWVzICh0YXJnZXQpIHtcclxuXHJcbiAgICAgICAgLy8gIFByb3BlcnR5IGdldHRlci9zZXR0ZXIgaW5qZWN0aW9uXHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5hZGRQcm9wZXJ0aWVzKHRhcmdldCk7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbi5hZGRQcm9wZXJ0aWVzKHRhcmdldCk7XHJcblxyXG4gICAgICAgIC8vICBDb21wb25lbnQgcmVmZXJlbmNlc1xyXG4gICAgICAgIHRhcmdldC5wb3NpdGlvbiA9IHRoaXMucG9zaXRpb247XHJcbiAgICAgICAgdGFyZ2V0LnNjYWxlID0gdGhpcy5zY2FsZTtcclxuICAgICAgICB0YXJnZXQucm90YXRpb25BbmNob3IgPSB0aGlzLnJvdGF0aW9uQW5jaG9yO1xyXG5cclxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVJbW1lZGlhdGVVcGRhdGVzICgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5pbW1lZGlhdGUgPSB0cnVlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZGlzYWJsZUltbWVkaWF0ZVVwZGF0ZXMgKCkge1xyXG5cclxuICAgICAgICB0aGlzLmltbWVkaWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlSW50ZXJwb2xhdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuaW50ZXJwb2xhdGUgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnJlc2V0KHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcclxuICAgICAgICB0aGlzLnNjYWxlLnJlc2V0KHRoaXMuc2NhbGUueCwgdGhpcy5zY2FsZS55KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRpc2FibGVJbnRlcnBvbGF0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGlydHkgKCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pbW1lZGlhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRyYW5zZm9ybSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVUcmFuc2Zvcm0gKGkgPSAxKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJvdGF0aW9uLmlzRmFzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vICBGYXN0IChubyByb3RhdGlvbilcclxuICAgICAgICAgICAgdGhpcy5sb2NhbFswXSA9IHRoaXMuc2NhbGVbMF07XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxbMV0gPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsWzJdID0gMDtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbFszXSA9IHRoaXMuc2NhbGVbMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxbMF0gPSB0aGlzLnJvdGF0aW9uLmNyICogdGhpcy5zY2FsZVswXTtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbFsxXSA9IHRoaXMucm90YXRpb24uc3IgKiB0aGlzLnNjYWxlWzBdO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsWzJdID0gLXRoaXMucm90YXRpb24uc3IgKiB0aGlzLnNjYWxlWzFdO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsWzNdID0gdGhpcy5yb3RhdGlvbi5jciAqIHRoaXMuc2NhbGVbMV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pbnRlcnBvbGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxbNF0gPSB0aGlzLnBvc2l0aW9uLmdldERlbHRhWChpKTtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbFs1XSA9IHRoaXMucG9zaXRpb24uZ2V0RGVsdGFZKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsWzRdID0gdGhpcy5wb3NpdGlvblswXTtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbFs1XSA9IHRoaXMucG9zaXRpb25bMV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95ICgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5zY2FsZS5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbi5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbkFuY2hvci5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgIHRoaXMubG9jYWwgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgfVxyXG5cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9tYXRoL3RyYW5zZm9ybS8yZC9iYXNpYy9UcmFuc2Zvcm0uanNcbiAqKi8iLCJsZXQgbWF0ID0gRmxvYXQzMkFycmF5O1xyXG5cclxuLy8gIEEgMkQgVHJhbnNmb3JtYXRpb24gTWF0cml4IGluaXRpYWxpemVkIHdpdGggYW4gaWRlbnRpdHkgbWF0cml4XHJcblxyXG4vLyAgRm9sbG93cyB0aGUgY2FudmFzIHRyYW5zZm9ybSBvcmRlcjpcclxuLy8gIFxyXG4vLyAgYSAgYyAgZVxyXG4vLyAgYiAgZCAgZlxyXG4vLyAgMCAgMCAgMVxyXG4vLyAgXHJcbi8vICB3aGVyZTpcclxuLy8gIFxyXG4vLyAgYSAtIHNjYWxlIHhcclxuLy8gIGIgLSBzaGVhciB5XHJcbi8vICBjIC0gc2hlYXIgeFxyXG4vLyAgZCAtIHNjYWxlIHlcclxuLy8gIGUgLSB0cmFuc2xhdGUgeFxyXG4vLyAgZiAtIHRyYW5zbGF0ZSB5XHJcbi8vICBcclxuLy8gIEFuZCB0aGUgM3JkIHJvdyAoMCwgMCwgMSkgaXMgaWdub3JlZCBmb3Igc3BlZWRcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1hdDIzIChhID0gMSwgYiA9IDAsIGMgPSAwLCBkID0gMSwgZSA9IDAsIGYgPSAwLCBkc3QgPSBuZXcgbWF0KDYpKSB7XHJcblxyXG4gICAgZHN0WzBdID0gYTtcclxuICAgIGRzdFsxXSA9IGI7XHJcbiAgICBkc3RbMl0gPSBjO1xyXG4gICAgZHN0WzNdID0gZDtcclxuICAgIGRzdFs0XSA9IGU7XHJcbiAgICBkc3RbNV0gPSBmO1xyXG5cclxuICAgIHJldHVybiBkc3Q7XHJcblxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21hdGgvbWF0cml4L21hdDIzL0J1aWxkLmpzXG4gKiovIiwiaW1wb3J0IEJhc2VUcmFuc2Zvcm1Db21wb25lbnQgZnJvbSAnLi9CYXNlVHJhbnNmb3JtQ29tcG9uZW50LmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjYWxlIGV4dGVuZHMgQmFzZVRyYW5zZm9ybUNvbXBvbmVudCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKHRyYW5zZm9ybSwgeCA9IDAsIHkgPSAwKSB7XHJcblxyXG4gICAgICAgIHN1cGVyKHRyYW5zZm9ybSwgeCwgeSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGFkZFByb3BlcnRpZXMgKHRhcmdldCkge1xyXG5cclxuICAgICAgICBpZiAoIXRhcmdldC5oYXNPd25Qcm9wZXJ0eSgnc2NhbGUnKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRhcmdldC5zY2FsZSA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LnNjYWxlLCB7XHJcblxyXG4gICAgICAgICAgICAneCc6IHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHRoaXMuZ2V0WCgpLFxyXG4gICAgICAgICAgICAgICAgc2V0OiAodmFsdWUpID0+IHRoaXMuc2V0WCh2YWx1ZSlcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICd5Jzoge1xyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gdGhpcy5nZXRZKCksXHJcbiAgICAgICAgICAgICAgICBzZXQ6ICh2YWx1ZSkgPT4gdGhpcy5zZXRZKHZhbHVlKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbWF0aC90cmFuc2Zvcm0vMmQvY29tcG9uZW50cy9TY2FsZS5qc1xuICoqLyIsIlxyXG4vLyAgSXQgZG9lc24ndCBjYXJlIHdoYXQgdHlwZSBvZiBUcmFuc2Zvcm0gaXQgaXMgYm91bmQgdG8sIFxyXG4vLyAgYXMgbG9uZyBhcyBpdCBleHBvc2VzIGEgYHNldERpcnR5YCBtZXRob2QuXHJcblxyXG4vLyAgVGhpcyBjbGFzcyBpcyBjb21wYXRpYmxlIHdpdGggdGhlIFZlYzIgZGF0YSB0eXBlcywgc28gY2FuIGJlIHBhc3NlZCB0byBhbnlcclxuLy8gIGZ1bmN0aW9uIHRoYXQgd2lsbCBhY2NlcHQgYSBWZWMyLlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZVRyYW5zZm9ybUNvbXBvbmVudCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKHRyYW5zZm9ybSwgeCA9IDAsIHkgPSAwKSB7XHJcblxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xyXG5cclxuICAgICAgICB0aGlzWzBdID0geDtcclxuICAgICAgICB0aGlzWzFdID0geTtcclxuXHJcbiAgICAgICAgLy8gIE9sZCB2YWx1ZXMgKGZvciBpbnRlcnBvbGF0aW9uIGJhc2VkIFRyYW5zZm9ybXMpXHJcbiAgICAgICAgdGhpc1syXSA9IHg7XHJcbiAgICAgICAgdGhpc1szXSA9IHk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldFggKCkge1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpc1swXTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0WSAoKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzWzFdO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXREZWx0YVggKGkgPSAwKSB7XHJcblxyXG4gICAgICAgIHJldHVybiAodGhpc1syXSArICh0aGlzWzBdIC0gdGhpc1syXSkgKiBpKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGVsdGFZIChpID0gMCkge1xyXG5cclxuICAgICAgICByZXR1cm4gKHRoaXNbM10gKyAodGhpc1sxXSAtIHRoaXNbM10pICogaSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldFggKHZhbHVlKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzWzBdICE9PSB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXNbMl0gPSB0aGlzWzBdO1xyXG4gICAgICAgICAgICB0aGlzWzBdID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtLnNldERpcnR5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBzZXRZICh2YWx1ZSkge1xyXG5cclxuICAgICAgICBpZiAodGhpc1sxXSAhPT0gdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzWzNdID0gdGhpc1sxXTtcclxuICAgICAgICAgICAgdGhpc1sxXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybS5zZXREaXJ0eSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gIE5hdGl2ZSBnZXR0ZXJzIC8gc2V0dGVyc1xyXG5cclxuICAgIGdldCB4ICgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXNbMF07XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldCB5ICgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXNbMV07XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldCB4ICh2YWx1ZSkge1xyXG5cclxuICAgICAgICB0aGlzLnNldFgodmFsdWUpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzZXQgeSAodmFsdWUpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRZKHZhbHVlKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc2V0ICh4LCB5ID0geCkge1xyXG5cclxuICAgICAgICB0aGlzWzJdID0gdGhpc1swXTtcclxuICAgICAgICB0aGlzWzNdID0gdGhpc1sxXTtcclxuXHJcbiAgICAgICAgdGhpc1swXSA9IHg7XHJcbiAgICAgICAgdGhpc1sxXSA9IHk7XHJcblxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLnNldERpcnR5KCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0WCAodmFsdWUpIHtcclxuXHJcbiAgICAgICAgdGhpc1swXSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXNbMl0gPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0uc2V0RGlydHkoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRZICh2YWx1ZSkge1xyXG5cclxuICAgICAgICB0aGlzWzFdID0gdmFsdWU7XHJcbiAgICAgICAgdGhpc1szXSA9IHZhbHVlO1xyXG5cclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5zZXREaXJ0eSgpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICByZXNldCAoeCwgeSA9IHgpIHtcclxuXHJcbiAgICAgICAgdGhpc1swXSA9IHg7XHJcbiAgICAgICAgdGhpc1sxXSA9IHk7XHJcbiAgICAgICAgdGhpc1syXSA9IHg7XHJcbiAgICAgICAgdGhpc1szXSA9IHk7XHJcblxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLnNldERpcnR5KCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldFRyYW5zZm9ybSAodHJhbnNmb3JtKSB7XHJcblxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95ICgpIHtcclxuXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgfVxyXG5cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9tYXRoL3RyYW5zZm9ybS8yZC9jb21wb25lbnRzL0Jhc2VUcmFuc2Zvcm1Db21wb25lbnQuanNcbiAqKi8iLCJpbXBvcnQgQmFzZVRyYW5zZm9ybUNvbXBvbmVudCBmcm9tICcuL0Jhc2VUcmFuc2Zvcm1Db21wb25lbnQuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9zaXRpb24gZXh0ZW5kcyBCYXNlVHJhbnNmb3JtQ29tcG9uZW50IHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAodHJhbnNmb3JtLCB4ID0gMCwgeSA9IDApIHtcclxuXHJcbiAgICAgICAgc3VwZXIodHJhbnNmb3JtLCB4LCB5KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYWRkUHJvcGVydGllcyAodGFyZ2V0KSB7XHJcblxyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwge1xyXG5cclxuICAgICAgICAgICAgJ3gnOiB7XHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiB0aGlzLmdldFgoKSxcclxuICAgICAgICAgICAgICAgIHNldDogKHZhbHVlKSA9PiB0aGlzLnNldFgodmFsdWUpXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAneSc6IHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHRoaXMuZ2V0WSgpLFxyXG4gICAgICAgICAgICAgICAgc2V0OiAodmFsdWUpID0+IHRoaXMuc2V0WSh2YWx1ZSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21hdGgvdHJhbnNmb3JtLzJkL2NvbXBvbmVudHMvUG9zaXRpb24uanNcbiAqKi8iLCJpbXBvcnQgeyBQSTIgfSBmcm9tICcuLi8uLi8uLi9Db25zdGFudHMuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm90YXRpb24ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICh0cmFuc2Zvcm0sIHJvdGF0aW9uID0gMCkge1xyXG5cclxuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcclxuXHJcbiAgICAgICAgdGhpc1swXSA9IHJvdGF0aW9uO1xyXG4gICAgICAgIHRoaXNbMV0gPSByb3RhdGlvbiAlIFBJMjtcclxuXHJcbiAgICAgICAgdGhpcy5zciA9IDA7XHJcbiAgICAgICAgdGhpcy5jciA9IDA7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldFZhbHVlICgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXNbMF07XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldFZhbHVlICh2YWx1ZSkge1xyXG5cclxuICAgICAgICBpZiAodGhpc1swXSAhPT0gdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzWzBdID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXNbMV0gPSB2YWx1ZSAlIFBJMjtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzWzFdKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyAgVXBkYXRlIHRoZSBjYWNoZSBpZiB0aGUgcm90YXRpb24gIT0gMFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zciA9IE1hdGguc2luKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3IgPSBNYXRoLmNvcyh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtLnNldERpcnR5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNGYXN0ICgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuICh0aGlzWzFdID09PSAwKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc2V0VHJhbnNmb3JtICh0cmFuc2Zvcm0pIHtcclxuXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGFkZFByb3BlcnRpZXMgKHRhcmdldCkge1xyXG5cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHtcclxuXHJcbiAgICAgICAgICAgICdyb3RhdGlvbic6IHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHRoaXMuZ2V0VmFsdWUoKSxcclxuICAgICAgICAgICAgICAgIHNldDogKHZhbHVlKSA9PiB0aGlzLnNldFZhbHVlKHZhbHVlKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95ICgpIHtcclxuXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgfVxyXG5cclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9tYXRoL3RyYW5zZm9ybS8yZC9jb21wb25lbnRzL1JvdGF0aW9uLmpzXG4gKiovIiwiZXhwb3J0IGNvbnN0IFBJMiA9IE1hdGguUEkgKiAyO1xyXG5leHBvcnQgY29uc3QgSEFMRlBJID0gTWF0aC5QSSAqIDAuNTtcclxuZXhwb3J0IGNvbnN0IEVQU0lMT04gPSAxLjBlLTY7XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21hdGgvQ29uc3RhbnRzLmpzXG4gKiovIiwiaW1wb3J0IEJhc2VUcmFuc2Zvcm1Db21wb25lbnQgZnJvbSAnLi9CYXNlVHJhbnNmb3JtQ29tcG9uZW50LmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJvdGF0aW9uQW5jaG9yIGV4dGVuZHMgQmFzZVRyYW5zZm9ybUNvbXBvbmVudCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKHRyYW5zZm9ybSwgeCA9IDAsIHkgPSAwKSB7XHJcblxyXG4gICAgICAgIHN1cGVyKHRyYW5zZm9ybSwgeCwgeSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGFkZFByb3BlcnRpZXMgKHRhcmdldCkge1xyXG5cclxuICAgICAgICBpZiAoIXRhcmdldC5oYXNPd25Qcm9wZXJ0eSgncm90YXRpb25BbmNob3InKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRhcmdldC5yb3RhdGlvbkFuY2hvciA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LnJvdGF0aW9uQW5jaG9yLCB7XHJcblxyXG4gICAgICAgICAgICAneCc6IHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHRoaXMuZ2V0WCgpLFxyXG4gICAgICAgICAgICAgICAgc2V0OiAodmFsdWUpID0+IHRoaXMuc2V0WCh2YWx1ZSlcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICd5Jzoge1xyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gdGhpcy5nZXRZKCksXHJcbiAgICAgICAgICAgICAgICBzZXQ6ICh2YWx1ZSkgPT4gdGhpcy5zZXRZKHZhbHVlKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbWF0aC90cmFuc2Zvcm0vMmQvY29tcG9uZW50cy9Sb3RhdGlvbkFuY2hvci5qc1xuICoqLyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNldFRyYW5zZm9ybVRvQ29udGV4dCAodHJhbnNmb3JtLCBjb250ZXh0LCBpID0gMSkge1xyXG5cclxuICAgIGlmICh0cmFuc2Zvcm0uZGlydHkpXHJcbiAgICB7XHJcbiAgICAgICAgdHJhbnNmb3JtLnVwZGF0ZVRyYW5zZm9ybShpKTtcclxuICAgIH1cclxuXHJcbiAgICBjb250ZXh0LnNldFRyYW5zZm9ybShcclxuICAgICAgICB0cmFuc2Zvcm0ubG9jYWxbMF0sICAvLyBzY2FsZSB4XHJcbiAgICAgICAgdHJhbnNmb3JtLmxvY2FsWzFdLCAgLy8gc2hlYXIgeVxyXG4gICAgICAgIHRyYW5zZm9ybS5sb2NhbFsyXSwgIC8vIHNoZWFyIHhcclxuICAgICAgICB0cmFuc2Zvcm0ubG9jYWxbM10sICAvLyBzY2FsZSB5XHJcbiAgICAgICAgdHJhbnNmb3JtLmxvY2FsWzRdLCAgLy8gdHJhbnNsYXRlIHhcclxuICAgICAgICB0cmFuc2Zvcm0ubG9jYWxbNV0gICAvLyB0cmFuc2xhdGUgeVxyXG4gICAgKTtcclxuXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbWF0aC90cmFuc2Zvcm0vMmQvU2V0VHJhbnNmb3JtVG9Db250ZXh0LmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==